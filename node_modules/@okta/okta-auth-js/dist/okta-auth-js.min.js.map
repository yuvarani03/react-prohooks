{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e4815c10cb7683656589","webpack:///okta-auth-js.min.js","webpack:///./lib/util.js","webpack:///./lib/errors/AuthSdkError.js","webpack:///./lib/browser/browserStorage.js","webpack:///./lib/constants.js","webpack:///./lib/http.js","webpack:///./lib/oauthUtil.js","webpack:////root/okta/okta-auth-js/node_modules/@babel/runtime/helpers/typeof.js","webpack:///./lib/storageBuilder.js","webpack:////root/okta/okta-auth-js/node_modules/@babel/runtime/regenerator/index.js","webpack:////root/okta/okta-auth-js/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./lib/tx.js","webpack:///./lib/browser/browserIndex.js","webpack:///./lib/fetch/fetchRequest.js","webpack:////root/okta/okta-auth-js/node_modules/cross-fetch/dist/browser-ponyfill.js","webpack:////root/okta/okta-auth-js/node_modules/js-cookie/src/js.cookie.js","webpack:///./lib/browser/browser.js","webpack:////root/okta/okta-auth-js/node_modules/regenerator-runtime/runtime.js","webpack:////root/okta/okta-auth-js/node_modules/tiny-emitter/index.js","webpack:///./lib/builderUtil.js","webpack:///./lib/errors/AuthApiError.js","webpack:///./lib/errors/AuthPollStopError.js","webpack:///./lib/session.js","webpack:///./lib/token.js","webpack:///./lib/crypto.js","webpack:///./lib/errors/OAuthError.js","webpack:///./lib/pkce.js","webpack:///./lib/TokenManager.js","webpack:///./lib/clock.js","webpack:///./lib/PromiseQueue.js"],"names":["root","factory","exports","module","define","amd","self","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","util","stringToBase64Url","str","b64","btoa","base64ToBase64Url","replace","base64UrlToBase64","b64u","base64UrlToString","length","utf8","atob","decodeURIComponent","escape","e","stringToBuffer","buffer","Uint8Array","charCodeAt","base64UrlDecode","bind","fn","ctx","additionalArgs","Array","slice","arguments","args","concat","apply","isAbsoluteUrl","url","test","isString","obj","toString","isObject","isNumber","isoToUTCString","parts","match","isoTime","Date","UTC","toUTCString","toQueryParams","key","undefined","push","encodeURIComponent","join","genRandomString","randomCharset","random","cl","Math","floor","extend","obj1","forEach","prop","removeNils","cleaned","value","clone","JSON","stringify","parse","omit","props","newobj","indexOf","find","collection","searchParams","item","found","getLink","linkName","altName","_links","link","getNativeConsole","window","console","getConsole","nativeConsole","log","warn","text","deprecate","deprecateWrap","removeTrailingSlash","path","trimmed","isIE11OrLess","document","documentMode","isFunction","delay","ms","Promise","resolve","setTimeout","isPromise","finally","AuthSdkError","msg","xhr","message","errorCode","errorSummary","errorLink","errorId","errorCauses","Error","Cookies","require","storageBuilder","constants","storageUtil","browserHasLocalStorage","storage","getLocalStorage","testStorage","browserHasSessionStorage","getSessionStorage","getPKCEStorage","options","preferLocalStorage","PKCE_STORAGE_NAME","getCookieStorage","getHttpCache","CACHE_STORAGE_NAME","localStorage","sessionStorage","secure","sameSite","getItem","setItem","set","getInMemoryStorage","store","removeItem","expiresAt","cookieOptions","expires","delete","remove","httpRequest","sdk","method","saveAuthnState","accessToken","withCredentials","httpCache","cookies","cacheResponse","cacheContents","getStorage","cachedResponse","now","response","headers","userAgent","err","res","ajaxOptions","data","httpRequestClient","then","resp","responseText","stateToken","STATE_TOKEN_KEY_NAME","updateStorage","DEFAULT_CACHE_DURATION","catch","serverErr","status","transformErrorXHR","AuthApiError","getIssuerOrigin","getOptions","post","postOptions","generateState","generateNonce","isToken","idToken","isArray","scopes","addListener","eventTarget","addEventListener","attachEvent","removeListener","removeEventListener","detachEvent","loadFrame","src","iframe","createElement","style","display","body","appendChild","loadPopup","title","popupTitle","appearance","winEl","open","location","href","getWellKnown","issuer","authServerUri","http","getKey","kid","wellKnown","jwksUri","cachedKey","keys","clearStorage","validateClaims","claims","validationParams","aud","clientId","iss","nonce","iat","exp","maxClockSkew","getOAuthUrls","authorizeUrl","userinfoUrl","tokenUrl","logoutUrl","revokeUrl","baseUrl","urlParamsToObject","hashOrSearch","plus2space","paramSplit","fragment","charAt","substring","param","exec","hasTokensInHash","hash","hasCodeInUrl","isRedirectUri","uri","authParams","redirectUri","isLoginRedirect","pkce","responseType","responseMode","hasCode","search","_typeof","Symbol","iterator","constructor","webstorage","storageName","storageString","setStorage","asyncGeneratorStep","gen","reject","_next","_throw","arg","info","error","done","_asyncToGenerator","addStateToken","builtArgs","getStateToken","transactionStatus","resumeTransaction","tx","exists","_get","AuthTransaction","introspect","transactionStep","transactionExists","postToTransaction","getPollFn","ref","pollFn","opts","autoPush","rememberDevice","pollLink","transactionCallBack","DEFAULT_POLLING_DELAY","isPolling","retryCount","recursivePoll","pollRes","factorResult","AuthPollStopError","delayLength","pow","link2fn","lk","hints","allow","factorType","provider","params","profile","updatePhone","links2fns","fns","type","poll","flattenEmbedded","objArr","ol","embedded","_embedded","cancel","fetchRequest","readData","toLowerCase","json","formatResult","result","responseJSON","fetch","credentials","ok","__self__","F","DOMException","isDataView","DataView","isPrototypeOf","normalizeName","String","TypeError","normalizeValue","iteratorFor","items","next","shift","support","iterable","Headers","map","append","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","chars","fromCharCode","bufferClone","byteLength","Body","_initBody","_bodyInit","_bodyText","Blob","_bodyBlob","formData","FormData","_bodyFormData","URLSearchParams","arrayBuffer","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","rejected","decode","normalizeMethod","upcased","toUpperCase","methods","Request","input","mode","signal","referrer","form","trim","split","bytes","parseHeaders","rawHeaders","line","Response","bodyInit","statusText","init","abortXhr","abort","request","aborted","XMLHttpRequest","getAllResponseHeaders","responseURL","ontimeout","onabort","setRequestHeader","onreadystatechange","readyState","send","viewClasses","isView","oldValue","has","callback","thisArg","values","entries","redirectStatuses","redirect","RangeError","stack","create","polyfill","default","registeredInModuleLoader","OldCookies","api","noConflict","attributes","converter","defaults","setMilliseconds","getMilliseconds","write","stringifiedAttributes","attributeName","cookie","rdecode","read","getJSON","withConverter","getCookieSettings","cookieSettings","features","isHTTPS","OktaAuthBuilder","builderUtil","assertValidConfig","postLogoutRedirectUri","onSessionExpired","getUserAgent","SDK_VERSION","DEFAULT_MAX_CLOCK_SKEW","ignoreSignature","session","close","closeSession","sessionExists","getSession","refresh","refreshSession","setCookieAndRedirect","resume","authorize","_getLocationHref","_tokenQueue","PromiseQueue","token","getWithoutPrompt","getWithPopup","getWithRedirect","parseFromUrl","decodeToken","revoke","revokeToken","renew","renewToken","getUserInfo","verify","verifyToken","oauthUtil","syncMethods","_setLocation","_getHistory","history","_getLocation","_getDocument","fingerprint","_getUserAgent","navigator","isWindowsPhone","isFingerprintSupported","agent","emitter","Emitter","tokenManager","TokenManager","on","_onTokenManagerError","_regeneratorRuntime","proto","isPopupPostMessageSupported","isIE8or9","postMessage","isTokenVerifySupported","crypto","subtle","hasTextEncoder","TextEncoder","isPKCESupported","protocol","isLocalhost","hostname","signIn","sendFingerprint","clear","revokeAccessToken","ACCESS_TOKEN_STORAGE_KEY","signOut","defaultUri","origin","currentUri","ID_TOKEN_STORAGE_KEY","reload","assign","state","idTokenHint","logoutUri","addSharedPrototypes","webfinger","timeout","listener","source","clearTimeout","contains","parentElement","removeChild","buildOktaAuth","runtime","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","makeInvokeMethod","tryCatch","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","AsyncIterator","invoke","record","hasOwn","__await","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","GenStateSuspendedYield","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","iteratorSymbol","isNaN","Op","$Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","reverse","pop","skipTempReset","prev","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","E","once","off","_","emit","evtArr","len","evts","liveEvents","RegExp","template","forgotPassword","unlockAccount","verifyRecoveryToken","OktaAuth","ajaxRequest","sdkValue","user","sessionToken","redirectUrl","checkAccountSetupComplete","token_type_hint","creds","decodedToken","jwt","payload","signature","validationOptions","sdkCrypto","valid","at_hash","getOidcHash","addPostMessageListener","responseHandler","timeoutId","exchangeCodeForToken","oauthParams","authorizationCode","urls","meta","PKCE","loadMeta","getTokenParams","codeVerifier","getToken","validateResponse","clearMeta","OAuthError","handleOAuthResponse","code","tokenDict","expiresIn","expires_in","tokenType","token_type","access_token","id_token","Number","idTokenObj","tokens","getDefaultOAuthParams","convertOAuthParamsToQueryParams","oauthQueryParams","codeChallenge","codeChallengeMethod","idp","idpScope","loginHint","maxAge","prompt","mayBeArray","scope","buildAuthorizeParams","prepareOauthParams","sessionTokenOverrides","idpOverrides","requestUrl","endpoint","iframePromise","iframeEl","oauthPromise","windowOptions","windowEl","closePoller","setInterval","closed","clearInterval","errorMessage","DEFAULT_CODE_CHALLENGE_METHOD","generateVerifier","saveMeta","computeChallenge","clonedParams","_addOAuthParamsToStorage","tokenParams","tokenParamsStr","REDIRECT_OAUTH_PARAMS_NAME","browserStorage","REDIRECT_NONCE_COOKIE_NAME","REDIRECT_STATE_COOKIE_NAME","removeHash","nativeHistory","nativeDoc","nativeLoc","replaceState","pathname","removeSearch","_getOAuthParamsStrFromStorage","oauthParamsStr","paramStr","defaultResponseMode","_getUserInfo","accessTokenObject","idTokenObject","userInfo","sub","authenticateHeader","getResponseHeader","errorMatches","errorDescriptionMatches","errorDescription","encode","digest","intBuffer","firstHalf","algo","usages","use","importKey","cryptoKey","b64Signature","summary","dec2hex","dec","substr","getRandomString","a","ceil","getRandomValues","from","prefix","verifier","MIN_VERIFIER_LENGTH","MAX_VERIFIER_LENGTH","validateOptions","oauthOptions","getPostData","getExpireTime","tokenMgmtRef","expireEarlySeconds","hasExpired","clock","emitExpired","emitError","clearExpireEventTimeout","expireTimeouts","renewPromise","clearExpireEventTimeoutAll","setExpireEventTimeout","expireTime","expireEventWait","max","expireEventTimeout","setExpireEventTimeoutAll","tokenStorage","add","getAsync","autoRenew","existingPromise","freshToken","oldToken","tokenKey","DEFAULT_OPTIONS","storageProvider","k","existingValues","storageKey","valueToStore","TOKEN_STORAGE_NAME","SdkClock","localOffset","parseInt","queue","running","thisObject","run","queueItem"],"mappings":"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","file":"okta-auth-js.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OktaAuth\"] = factory();\n\telse\n\t\troot[\"OktaAuth\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e4815c10cb7683656589","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OktaAuth\"] = factory();\n\telse\n\t\troot[\"OktaAuth\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n/* global window, document, btoa, atob, Uint8Array */\nvar util = module.exports; // converts a string to base64 (url/filename safe variant)\n\nutil.stringToBase64Url = function (str) {\n  var b64 = btoa(str);\n  return util.base64ToBase64Url(b64);\n}; // converts a standard base64-encoded string to a \"url/filename safe\" variant\n\n\nutil.base64ToBase64Url = function (b64) {\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}; // converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\n\n\nutil.base64UrlToBase64 = function (b64u) {\n  return b64u.replace(/-/g, '+').replace(/_/g, '/');\n};\n\nutil.base64UrlToString = function (b64u) {\n  var b64 = util.base64UrlToBase64(b64u);\n\n  switch (b64.length % 4) {\n    case 0:\n      break;\n\n    case 2:\n      b64 += '==';\n      break;\n\n    case 3:\n      b64 += '=';\n      break;\n\n    default:\n      throw 'Not a valid Base64Url';\n  }\n\n  var utf8 = atob(b64);\n\n  try {\n    return decodeURIComponent(escape(utf8));\n  } catch (e) {\n    return utf8;\n  }\n};\n\nutil.stringToBuffer = function (str) {\n  var buffer = new Uint8Array(str.length);\n\n  for (var i = 0; i < str.length; i++) {\n    buffer[i] = str.charCodeAt(i);\n  }\n\n  return buffer;\n};\n\nutil.base64UrlDecode = function (str) {\n  return atob(util.base64UrlToBase64(str));\n};\n\nutil.bind = function (fn, ctx) {\n  var additionalArgs = Array.prototype.slice.call(arguments, 2);\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    args = additionalArgs.concat(args);\n    return fn.apply(ctx, args);\n  };\n};\n\nutil.isAbsoluteUrl = function (url) {\n  return /^(?:[a-z]+:)?\\/\\//i.test(url);\n};\n\nutil.isString = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object String]';\n};\n\nutil.isObject = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\nutil.isNumber = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Number]';\n};\n\nutil.isoToUTCString = function (str) {\n  var parts = str.match(/\\d+/g),\n      isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]),\n      isoDate = new Date(isoTime);\n  return isoDate.toUTCString();\n};\n\nutil.toQueryParams = function (obj) {\n  var str = [];\n\n  if (obj !== null) {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] !== undefined && obj[key] !== null) {\n        str.push(key + '=' + encodeURIComponent(obj[key]));\n      }\n    }\n  }\n\n  if (str.length) {\n    return '?' + str.join('&');\n  } else {\n    return '';\n  }\n};\n\nutil.genRandomString = function (length) {\n  var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  var random = '';\n\n  for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n    random += randomCharset[Math.floor(Math.random() * cl)];\n  }\n\n  return random;\n};\n\nutil.extend = function () {\n  // First object will be modified!\n  var obj1 = arguments[0]; // Properties from other objects will be copied over\n\n  var objArray = [].slice.call(arguments, 1);\n  objArray.forEach(function (obj) {\n    for (var prop in obj) {\n      // copy over all properties with defined values\n      if (obj.hasOwnProperty(prop) && obj[prop] !== undefined) {\n        obj1[prop] = obj[prop];\n      }\n    }\n  });\n  return obj1; // return the modified object\n};\n\nutil.removeNils = function (obj) {\n  var cleaned = {};\n\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      var value = obj[prop];\n\n      if (value !== null && value !== undefined) {\n        cleaned[prop] = value;\n      }\n    }\n  }\n\n  return cleaned;\n};\n\nutil.clone = function (obj) {\n  if (obj) {\n    var str = JSON.stringify(obj);\n\n    if (str) {\n      return JSON.parse(str);\n    }\n  }\n\n  return obj;\n}; // Analogous to _.omit\n\n\nutil.omit = function (obj) {\n  var props = Array.prototype.slice.call(arguments, 1);\n  var newobj = {};\n\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p) && props.indexOf(p) == -1) {\n      newobj[p] = obj[p];\n    }\n  }\n\n  return util.clone(newobj);\n};\n\nutil.find = function (collection, searchParams) {\n  var c = collection.length;\n\n  while (c--) {\n    var item = collection[c];\n    var found = true;\n\n    for (var prop in searchParams) {\n      if (!searchParams.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      if (item[prop] !== searchParams[prop]) {\n        found = false;\n        break;\n      }\n    }\n\n    if (found) {\n      return item;\n    }\n  }\n};\n\nutil.getLink = function (obj, linkName, altName) {\n  if (!obj || !obj._links) {\n    return;\n  }\n\n  var link = util.clone(obj._links[linkName]); // If a link has a name and we have an altName, return if they match\n\n  if (link && link.name && altName) {\n    if (link.name === altName) {\n      return link;\n    }\n  } else {\n    return link;\n  }\n};\n\nutil.getNativeConsole = function () {\n  if (typeof window !== 'undefined') {\n    return window.console;\n  } else if (typeof console !== 'undefined') {\n    return console;\n  } else {\n    return undefined;\n  }\n};\n\nutil.getConsole = function () {\n  var nativeConsole = util.getNativeConsole();\n\n  if (nativeConsole && nativeConsole.log) {\n    return nativeConsole;\n  }\n\n  return {\n    log: function log() {}\n  };\n};\n\nutil.warn = function (text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] WARN: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecate = function (text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] DEPRECATION: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecateWrap = function (text, fn) {\n  return function () {\n    util.deprecate(text);\n    return fn.apply(null, arguments);\n  };\n};\n\nutil.removeTrailingSlash = function (path) {\n  if (!path) {\n    return;\n  } // Remove any whitespace before or after string\n\n\n  var trimmed = path.replace(/^\\s+|\\s+$/gm, ''); // Remove trailing slash(es)\n\n  trimmed = trimmed.replace(/\\/+$/, '');\n  return trimmed;\n};\n\nutil.isIE11OrLess = function () {\n  return !!document.documentMode && document.documentMode <= 11;\n};\n\nutil.isFunction = function (fn) {\n  return !!fn && {}.toString.call(fn) === '[object Function]';\n};\n\nutil.delay = function (ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nutil.isPromise = function (obj) {\n  return obj && obj.finally && typeof obj.finally === 'function';\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction AuthSdkError(msg, xhr) {\n  this.name = 'AuthSdkError';\n  this.message = msg;\n  this.errorCode = 'INTERNAL';\n  this.errorSummary = msg;\n  this.errorLink = 'INTERNAL';\n  this.errorId = 'INTERNAL';\n  this.errorCauses = [];\n\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\n\nAuthSdkError.prototype = new Error();\nmodule.exports = AuthSdkError;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* global localStorage, sessionStorage */\nvar Cookies = __webpack_require__(14);\n\nvar storageBuilder = __webpack_require__(7);\n\nvar constants = __webpack_require__(3);\n\nvar AuthSdkError = __webpack_require__(1); // Building this as an object allows us to mock the functions in our tests\n\n\nvar storageUtil = {}; // IE11 bug that Microsoft doesn't plan to fix\n// https://connect.microsoft.com/IE/Feedback/Details/1496040\n\nstorageUtil.browserHasLocalStorage = function () {\n  try {\n    var storage = storageUtil.getLocalStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.browserHasSessionStorage = function () {\n  try {\n    var storage = storageUtil.getSessionStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.getPKCEStorage = function (options) {\n  options = options || {};\n\n  if (!options.preferLocalStorage && storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.PKCE_STORAGE_NAME);\n  } else if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.PKCE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage(options), constants.PKCE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getHttpCache = function (options) {\n  if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.CACHE_STORAGE_NAME);\n  } else if (storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.CACHE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage(options), constants.CACHE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getLocalStorage = function () {\n  return localStorage;\n};\n\nstorageUtil.getSessionStorage = function () {\n  return sessionStorage;\n}; // Provides webStorage-like interface for cookies\n\n\nstorageUtil.getCookieStorage = function (options) {\n  var secure = options.secure;\n  var sameSite = options.sameSite;\n\n  if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n    throw new AuthSdkError('getCookieStorage: \"secure\" and \"sameSite\" options must be provided');\n  }\n\n  return {\n    getItem: storageUtil.storage.get,\n    setItem: function setItem(key, value) {\n      // Cookie shouldn't expire\n      storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n        secure: secure,\n        sameSite: sameSite\n      });\n    }\n  };\n}; // Provides an in-memory solution\n\n\nstorageUtil.getInMemoryStorage = function () {\n  var store = {};\n  return {\n    getItem: function getItem(key) {\n      return store[key];\n    },\n    setItem: function setItem(key, value) {\n      store[key] = value;\n    }\n  };\n};\n\nstorageUtil.testStorage = function (storage) {\n  var key = 'okta-test-storage';\n\n  try {\n    storage.setItem(key, key);\n    storage.removeItem(key);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.storage = {\n  set: function set(name, value, expiresAt, options) {\n    var secure = options.secure;\n    var sameSite = options.sameSite;\n\n    if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n      throw new AuthSdkError('storage.set: \"secure\" and \"sameSite\" options must be provided');\n    }\n\n    var cookieOptions = {\n      path: options.path || '/',\n      secure: secure,\n      sameSite: sameSite\n    }; // eslint-disable-next-line no-extra-boolean-cast\n\n    if (!!Date.parse(expiresAt)) {\n      // Expires value can be converted to a Date object.\n      //\n      // If the 'expiresAt' value is not provided, or the value cannot be\n      // parsed as a Date object, the cookie will set as a session cookie.\n      cookieOptions.expires = new Date(expiresAt);\n    }\n\n    Cookies.set(name, value, cookieOptions);\n    return storageUtil.storage.get(name);\n  },\n  get: function get(name) {\n    return Cookies.get(name);\n  },\n  delete: function _delete(name) {\n    return Cookies.remove(name, {\n      path: '/'\n    });\n  }\n};\nmodule.exports = storageUtil;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n  'STATE_TOKEN_KEY_NAME': 'oktaStateToken',\n  'DEFAULT_POLLING_DELAY': 500,\n  'DEFAULT_MAX_CLOCK_SKEW': 300,\n  'DEFAULT_CACHE_DURATION': 86400,\n  'REDIRECT_OAUTH_PARAMS_NAME': 'okta-oauth-redirect-params',\n  'REDIRECT_STATE_COOKIE_NAME': 'okta-oauth-state',\n  'REDIRECT_NONCE_COOKIE_NAME': 'okta-oauth-nonce',\n  'TOKEN_STORAGE_NAME': 'okta-token-storage',\n  'CACHE_STORAGE_NAME': 'okta-cache-storage',\n  'PKCE_STORAGE_NAME': 'okta-pkce-storage',\n  'ACCESS_TOKEN_STORAGE_KEY': 'accessToken',\n  'ID_TOKEN_STORAGE_KEY': 'idToken'\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity */\nvar util = __webpack_require__(0);\n\nvar AuthApiError = __webpack_require__(19);\n\nvar constants = __webpack_require__(3);\n\nfunction httpRequest(sdk, options) {\n  options = options || {};\n  var url = options.url,\n      method = options.method,\n      args = options.args,\n      saveAuthnState = options.saveAuthnState,\n      accessToken = options.accessToken,\n      withCredentials = options.withCredentials !== false,\n      // default value is true\n  storageUtil = sdk.options.storageUtil,\n      storage = storageUtil.storage,\n      httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n\n  if (options.cacheResponse) {\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[url];\n\n    if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n      return Promise.resolve(cachedResponse.response);\n    }\n  }\n\n  var headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'X-Okta-User-Agent-Extended': sdk.userAgent\n  };\n  util.extend(headers, sdk.options.headers, options.headers);\n\n  if (accessToken && util.isString(accessToken)) {\n    headers['Authorization'] = 'Bearer ' + accessToken;\n  }\n\n  var ajaxOptions = {\n    headers: headers,\n    data: args || undefined,\n    withCredentials: withCredentials\n  };\n  var err, res;\n  return sdk.options.httpRequestClient(method, url, ajaxOptions).then(function (resp) {\n    res = resp.responseText;\n\n    if (res && util.isString(res)) {\n      res = JSON.parse(res);\n    }\n\n    if (saveAuthnState) {\n      if (!res.stateToken) {\n        storage.delete(constants.STATE_TOKEN_KEY_NAME);\n      }\n    }\n\n    if (res && res.stateToken && res.expiresAt) {\n      storage.set(constants.STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt, sdk.options.cookies);\n    }\n\n    if (res && options.cacheResponse) {\n      httpCache.updateStorage(url, {\n        expiresAt: Math.floor(Date.now() / 1000) + constants.DEFAULT_CACHE_DURATION,\n        response: res\n      });\n    }\n\n    return res;\n  }).catch(function (resp) {\n    var serverErr = resp.responseText || {};\n\n    if (util.isString(serverErr)) {\n      try {\n        serverErr = JSON.parse(serverErr);\n      } catch (e) {\n        serverErr = {\n          errorSummary: 'Unknown error'\n        };\n      }\n    }\n\n    if (resp.status >= 500) {\n      serverErr.errorSummary = 'Unknown error';\n    }\n\n    if (sdk.options.transformErrorXHR) {\n      resp = sdk.options.transformErrorXHR(util.clone(resp));\n    }\n\n    err = new AuthApiError(serverErr, resp);\n\n    if (err.errorCode === 'E0000011') {\n      storage.delete(constants.STATE_TOKEN_KEY_NAME);\n    }\n\n    throw err;\n  });\n}\n\nfunction get(sdk, url, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n  var getOptions = {\n    url: url,\n    method: 'GET'\n  };\n  util.extend(getOptions, options);\n  return httpRequest(sdk, getOptions);\n}\n\nfunction post(sdk, url, args, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n  var postOptions = {\n    url: url,\n    method: 'POST',\n    args: args,\n    saveAuthnState: true\n  };\n  util.extend(postOptions, options);\n  return httpRequest(sdk, postOptions);\n}\n\nmodule.exports = {\n  get: get,\n  post: post,\n  httpRequest: httpRequest\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* global window, document */\n\n/* eslint-disable complexity, max-statements */\nvar http = __webpack_require__(4);\n\nvar util = __webpack_require__(0);\n\nvar storageUtil = __webpack_require__(2);\n\nvar AuthSdkError = __webpack_require__(1);\n\nfunction generateState() {\n  return util.genRandomString(64);\n}\n\nfunction generateNonce() {\n  return util.genRandomString(64);\n}\n\nfunction isToken(obj) {\n  if (obj && (obj.accessToken || obj.idToken) && Array.isArray(obj.scopes)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction addListener(eventTarget, name, fn) {\n  if (eventTarget.addEventListener) {\n    eventTarget.addEventListener(name, fn);\n  } else {\n    eventTarget.attachEvent('on' + name, fn);\n  }\n}\n\nfunction removeListener(eventTarget, name, fn) {\n  if (eventTarget.removeEventListener) {\n    eventTarget.removeEventListener(name, fn);\n  } else {\n    eventTarget.detachEvent('on' + name, fn);\n  }\n}\n\nfunction loadFrame(src) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.src = src;\n  return document.body.appendChild(iframe);\n}\n\nfunction loadPopup(src, options) {\n  var title = options.popupTitle || 'External Identity Provider User Authentication';\n  var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' + 'top=100, left=500, width=600, height=600';\n\n  if (util.isIE11OrLess()) {\n    // IE<=11 doesn't fully support postMessage at time of writting.\n    // the following simple solution happened to solve the issue\n    // without adding another proxy layer which makes flow more complecated.\n    var winEl = window.open('/', title, appearance);\n    winEl.location.href = src;\n    return winEl;\n  } else {\n    return window.open(src, title, appearance);\n  }\n}\n\nfunction getWellKnown(sdk, issuer) {\n  var authServerUri = issuer || sdk.options.issuer;\n  return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n    cacheResponse: true\n  });\n}\n\nfunction getKey(sdk, issuer, kid) {\n  var httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n  return getWellKnown(sdk, issuer).then(function (wellKnown) {\n    var jwksUri = wellKnown['jwks_uri']; // Check our kid against the cached version (if it exists and isn't expired)\n\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[jwksUri];\n\n    if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n      var cachedKey = util.find(cachedResponse.response.keys, {\n        kid: kid\n      });\n\n      if (cachedKey) {\n        return cachedKey;\n      }\n    } // Remove cache for the key\n\n\n    httpCache.clearStorage(jwksUri); // Pull the latest keys if the key wasn't in the cache\n\n    return http.get(sdk, jwksUri, {\n      cacheResponse: true\n    }).then(function (res) {\n      var key = util.find(res.keys, {\n        kid: kid\n      });\n\n      if (key) {\n        return key;\n      }\n\n      throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n    });\n  });\n}\n\nfunction validateClaims(sdk, claims, validationParams) {\n  var aud = validationParams.clientId;\n  var iss = validationParams.issuer;\n  var nonce = validationParams.nonce;\n\n  if (!claims || !iss || !aud) {\n    throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n  }\n\n  if (nonce && claims.nonce !== nonce) {\n    throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n  }\n\n  var now = Math.floor(Date.now() / 1000);\n\n  if (claims.iss !== iss) {\n    throw new AuthSdkError('The issuer [' + claims.iss + '] ' + 'does not match [' + iss + ']');\n  }\n\n  if (claims.aud !== aud) {\n    throw new AuthSdkError('The audience [' + claims.aud + '] ' + 'does not match [' + aud + ']');\n  }\n\n  if (claims.iat > claims.exp) {\n    throw new AuthSdkError('The JWT expired before it was issued');\n  }\n\n  if (now - sdk.options.maxClockSkew > claims.exp) {\n    throw new AuthSdkError('The JWT expired and is no longer valid');\n  }\n\n  if (claims.iat > now + sdk.options.maxClockSkew) {\n    throw new AuthSdkError('The JWT was issued in the future');\n  }\n}\n\nfunction getOAuthUrls(sdk, options) {\n  if (arguments.length > 2) {\n    throw new AuthSdkError('As of version 3.0, \"getOAuthUrls\" takes only a single set of options');\n  }\n\n  options = options || {}; // Get user-supplied arguments\n\n  var authorizeUrl = util.removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n  var issuer = util.removeTrailingSlash(options.issuer) || sdk.options.issuer;\n  var userinfoUrl = util.removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n  var tokenUrl = util.removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n  var logoutUrl = util.removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n  var revokeUrl = util.removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n  var baseUrl = issuer.indexOf('/oauth2') > 0 ? issuer : issuer + '/oauth2';\n  authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n  userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n  tokenUrl = tokenUrl || baseUrl + '/v1/token';\n  revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n  logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n  return {\n    issuer: issuer,\n    authorizeUrl: authorizeUrl,\n    userinfoUrl: userinfoUrl,\n    tokenUrl: tokenUrl,\n    revokeUrl: revokeUrl,\n    logoutUrl: logoutUrl\n  };\n}\n\nfunction urlParamsToObject(hashOrSearch) {\n  // Predefine regexs for parsing hash\n  var plus2space = /\\+/g;\n  var paramSplit = /([^&=]+)=?([^&]*)/g;\n  var fragment = hashOrSearch; // Some hash based routers will automatically add a / character after the hash\n\n  if (fragment.charAt(0) === '#' && fragment.charAt(1) === '/') {\n    fragment = fragment.substring(2);\n  } // Remove the leading # or ?\n\n\n  if (fragment.charAt(0) === '#' || fragment.charAt(0) === '?') {\n    fragment = fragment.substring(1);\n  }\n\n  var obj = {}; // Loop until we have no more params\n\n  var param;\n\n  while (true) {\n    // eslint-disable-line no-constant-condition\n    param = paramSplit.exec(fragment);\n\n    if (!param) {\n      break;\n    }\n\n    var key = param[1];\n    var value = param[2]; // id_token should remain base64url encoded\n\n    if (key === 'id_token' || key === 'access_token' || key === 'code') {\n      obj[key] = value;\n    } else {\n      obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n    }\n  }\n\n  return obj;\n}\n\nfunction hasTokensInHash(hash) {\n  return /((id|access)_token=)/i.test(hash);\n}\n\nfunction hasCodeInUrl(hashOrSearch) {\n  return /(code=)/i.test(hashOrSearch);\n}\n\nfunction isRedirectUri(uri, sdk) {\n  var authParams = sdk.options;\n  return uri && uri.indexOf(authParams.redirectUri) == 0;\n}\n/**\n * Check if tokens or a code have been passed back into the url, which happens in\n * the social auth IDP redirect flow.\n */\n\n\nfunction isLoginRedirect(sdk) {\n  var authParams = sdk.options;\n\n  if (authParams.pkce || authParams.responseType === 'code' || authParams.responseMode === 'query') {\n    // Look for code\n    var hasCode = authParams.responseMode === 'fragment' ? hasCodeInUrl(window.location.hash) : hasCodeInUrl(window.location.search);\n    return isRedirectUri(window.location.href, sdk) && hasCode;\n  } // Look for tokens (Implicit OIDC flow)\n\n\n  return hasTokensInHash(window.location.hash);\n}\n\nmodule.exports = {\n  generateState: generateState,\n  generateNonce: generateNonce,\n  getWellKnown: getWellKnown,\n  getKey: getKey,\n  validateClaims: validateClaims,\n  getOAuthUrls: getOAuthUrls,\n  loadFrame: loadFrame,\n  loadPopup: loadPopup,\n  urlParamsToObject: urlParamsToObject,\n  isToken: isToken,\n  addListener: addListener,\n  removeListener: removeListener,\n  isLoginRedirect: isLoginRedirect\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nvar AuthSdkError = __webpack_require__(1); // storage must have getItem and setItem\n\n\nfunction storageBuilder(webstorage, storageName) {\n  if (typeof storageName !== 'string' || !storageName.length) {\n    throw new AuthSdkError('\"storageName\" is required');\n  }\n\n  function getStorage() {\n    var storageString = webstorage.getItem(storageName);\n    storageString = storageString || '{}';\n\n    try {\n      return JSON.parse(storageString);\n    } catch (e) {\n      throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n    }\n  }\n\n  function setStorage(storage) {\n    try {\n      var storageString = JSON.stringify(storage);\n      webstorage.setItem(storageName, storageString);\n    } catch (e) {\n      throw new AuthSdkError('Unable to set storage: ' + storageName);\n    }\n  }\n\n  function clearStorage(key) {\n    if (!key) {\n      return setStorage({});\n    }\n\n    var storage = getStorage();\n    delete storage[key];\n    setStorage(storage);\n  }\n\n  function updateStorage(key, value) {\n    var storage = getStorage();\n    storage[key] = value;\n    setStorage(storage);\n  }\n\n  return {\n    getStorage: getStorage,\n    setStorage: setStorage,\n    clearStorage: clearStorage,\n    updateStorage: updateStorage\n  };\n}\n\nmodule.exports = storageBuilder;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(16);\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http = __webpack_require__(4);\n\nvar util = __webpack_require__(0);\n\nvar AuthSdkError = __webpack_require__(1);\n\nvar AuthPollStopError = __webpack_require__(20);\n\nvar constants = __webpack_require__(3);\n\nfunction addStateToken(res, options) {\n  var builtArgs = {};\n  util.extend(builtArgs, options); // Add the stateToken if one isn't passed and we have one\n\n  if (!builtArgs.stateToken && res.stateToken) {\n    builtArgs.stateToken = res.stateToken;\n  }\n\n  return builtArgs;\n}\n\nfunction getStateToken(res) {\n  return addStateToken(res);\n}\n\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args);\n}\n\nfunction resumeTransaction(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n\n  return sdk.tx.status(args).then(function (res) {\n    return new AuthTransaction(sdk, res);\n  });\n}\n\nfunction introspect(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n\n  return transactionStep(sdk, args).then(function (res) {\n    return new AuthTransaction(sdk, res);\n  });\n}\n\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args); // v1 pipeline introspect API\n\n  return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args);\n}\n\nfunction transactionExists(sdk) {\n  // We have a cookie state token\n  return !!sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n}\n\nfunction postToTransaction(sdk, url, args, options) {\n  return http.post(sdk, url, args, options).then(function (res) {\n    return new AuthTransaction(sdk, res);\n  });\n}\n\nfunction getPollFn(sdk, res, ref) {\n  return function (options) {\n    var delay;\n    var rememberDevice;\n    var autoPush;\n    var transactionCallBack;\n\n    if (util.isNumber(options)) {\n      delay = options;\n    } else if (util.isObject(options)) {\n      delay = options.delay;\n      rememberDevice = options.rememberDevice;\n      autoPush = options.autoPush;\n      transactionCallBack = options.transactionCallBack;\n    }\n\n    if (!delay && delay !== 0) {\n      delay = constants.DEFAULT_POLLING_DELAY;\n    } // Get the poll function\n\n\n    var pollLink = util.getLink(res, 'next', 'poll');\n\n    function pollFn() {\n      var opts = {};\n\n      if (typeof autoPush === 'function') {\n        try {\n          opts.autoPush = !!autoPush();\n        } catch (e) {\n          return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n        }\n      } else if (autoPush !== undefined && autoPush !== null) {\n        opts.autoPush = !!autoPush;\n      }\n\n      if (typeof rememberDevice === 'function') {\n        try {\n          opts.rememberDevice = !!rememberDevice();\n        } catch (e) {\n          return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n        }\n      } else if (rememberDevice !== undefined && rememberDevice !== null) {\n        opts.rememberDevice = !!rememberDevice;\n      }\n\n      var href = pollLink.href + util.toQueryParams(opts);\n      return http.post(sdk, href, getStateToken(res), {\n        saveAuthnState: false\n      });\n    }\n\n    ref.isPolling = true;\n    var retryCount = 0;\n\n    var recursivePoll = function recursivePoll() {\n      // If the poll was manually stopped during the delay\n      if (!ref.isPolling) {\n        return Promise.reject(new AuthPollStopError());\n      }\n\n      return pollFn().then(function (pollRes) {\n        // Reset our retry counter on success\n        retryCount = 0; // If we're still waiting\n\n        if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n          // If the poll was manually stopped while the pollFn was called\n          if (!ref.isPolling) {\n            throw new AuthPollStopError();\n          }\n\n          if (typeof transactionCallBack === 'function') {\n            transactionCallBack(pollRes);\n          } // Continue poll\n\n\n          return util.delay(delay).then(recursivePoll);\n        } else {\n          // Any non-waiting result, even if polling was stopped\n          // during a request, will return\n          ref.isPolling = false;\n          return new AuthTransaction(sdk, pollRes);\n        }\n      }).catch(function (err) {\n        // Exponential backoff, up to 16 seconds\n        if (err.xhr && (err.xhr.status === 0 || err.xhr.status === 429) && retryCount <= 4) {\n          var delayLength = Math.pow(2, retryCount) * 1000;\n          retryCount++;\n          return util.delay(delayLength).then(recursivePoll);\n        }\n\n        throw err;\n      });\n    };\n\n    return recursivePoll().catch(function (err) {\n      ref.isPolling = false;\n      throw err;\n    });\n  };\n}\n\nfunction link2fn(sdk, res, obj, link, ref) {\n  if (Array.isArray(link)) {\n    return function (name, opts) {\n      if (!name) {\n        throw new AuthSdkError('Must provide a link name');\n      }\n\n      var lk = util.find(link, {\n        name: name\n      });\n\n      if (!lk) {\n        throw new AuthSdkError('No link found for that name');\n      }\n\n      return link2fn(sdk, res, obj, lk, ref)(opts);\n    };\n  } else if (link.hints && link.hints.allow && link.hints.allow.length === 1) {\n    var method = link.hints.allow[0];\n\n    switch (method) {\n      case 'GET':\n        return function () {\n          return http.get(sdk, link.href);\n        };\n\n      case 'POST':\n        return function (opts) {\n          if (ref && ref.isPolling) {\n            ref.isPolling = false;\n          }\n\n          var data = addStateToken(res, opts);\n\n          if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n            // Add factorType and provider\n            util.extend(data, {\n              factorType: obj.factorType,\n              provider: obj.provider\n            });\n          }\n\n          var params = {};\n          var autoPush = data.autoPush;\n\n          if (autoPush !== undefined) {\n            if (typeof autoPush === 'function') {\n              try {\n                params.autoPush = !!autoPush();\n              } catch (e) {\n                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n              }\n            } else if (autoPush !== null) {\n              params.autoPush = !!autoPush;\n            }\n\n            data = util.omit(data, 'autoPush');\n          }\n\n          var rememberDevice = data.rememberDevice;\n\n          if (rememberDevice !== undefined) {\n            if (typeof rememberDevice === 'function') {\n              try {\n                params.rememberDevice = !!rememberDevice();\n              } catch (e) {\n                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n              }\n            } else if (rememberDevice !== null) {\n              params.rememberDevice = !!rememberDevice;\n            }\n\n            data = util.omit(data, 'rememberDevice');\n          } else if (data.profile && data.profile.updatePhone !== undefined) {\n            if (data.profile.updatePhone) {\n              params.updatePhone = true;\n            }\n\n            data.profile = util.omit(data.profile, 'updatePhone');\n          }\n\n          var href = link.href + util.toQueryParams(params);\n          return postToTransaction(sdk, href, data);\n        };\n    }\n  }\n}\n\nfunction links2fns(sdk, res, obj, ref) {\n  var fns = {};\n\n  for (var linkName in obj._links) {\n    if (!obj._links.hasOwnProperty(linkName)) {\n      continue;\n    }\n\n    var link = obj._links[linkName];\n\n    if (linkName === 'next') {\n      linkName = link.name;\n    }\n\n    if (link.type) {\n      fns[linkName] = link;\n      continue;\n    }\n\n    switch (linkName) {\n      // poll is only found at the transaction\n      // level, so we don't need to pass the link\n      case 'poll':\n        fns.poll = getPollFn(sdk, res, ref);\n        break;\n\n      default:\n        var fn = link2fn(sdk, res, obj, link, ref);\n\n        if (fn) {\n          fns[linkName] = fn;\n        }\n\n    }\n  }\n\n  return fns;\n}\n\nfunction flattenEmbedded(sdk, res, obj, ref) {\n  obj = obj || res;\n  obj = util.clone(obj);\n\n  if (Array.isArray(obj)) {\n    var objArr = [];\n\n    for (var o = 0, ol = obj.length; o < ol; o++) {\n      objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n    }\n\n    return objArr;\n  }\n\n  var embedded = obj._embedded || {};\n\n  for (var key in embedded) {\n    if (!embedded.hasOwnProperty(key)) {\n      continue;\n    } // Flatten any nested _embedded objects\n\n\n    if (util.isObject(embedded[key]) || Array.isArray(embedded[key])) {\n      embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n    }\n  } // Convert any links on the embedded object\n\n\n  var fns = links2fns(sdk, res, obj, ref);\n  util.extend(embedded, fns);\n  obj = util.omit(obj, '_embedded', '_links');\n  util.extend(obj, embedded);\n  return obj;\n}\n\nfunction AuthTransaction(sdk, res) {\n  if (res) {\n    this.data = res;\n    util.extend(this, flattenEmbedded(sdk, res, res, {}));\n    delete this.stateToken; // RECOVERY_CHALLENGE has some responses without _links.\n    // Without _links, we emulate cancel to make it intuitive\n    // to return to the starting state. We may remove this\n    // when OKTA-75434 is resolved\n\n    if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n      this.cancel = function () {\n        return Promise.resolve(new AuthTransaction(sdk));\n      };\n    }\n  }\n}\n\nmodule.exports = {\n  transactionStatus: transactionStatus,\n  resumeTransaction: resumeTransaction,\n  transactionExists: transactionExists,\n  postToTransaction: postToTransaction,\n  introspect: introspect\n};\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nvar fetchRequest = __webpack_require__(12);\n\nvar storageUtil = __webpack_require__(2);\n\nmodule.exports = __webpack_require__(15)(storageUtil, fetchRequest);\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _typeof = __webpack_require__(6);\n\n/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nvar fetch = __webpack_require__(13);\n\nfunction readData(response) {\n  if (response.headers.get('Content-Type') && response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n    return response.json() // JSON parse can fail if response is not a valid object\n    .catch(function (e) {\n      return {\n        error: e,\n        errorSummary: 'Could not parse server response'\n      };\n    });\n  } else {\n    return response.text();\n  }\n}\n\nfunction formatResult(status, data) {\n  var isObject = _typeof(data) === 'object';\n  var result = {\n    responseText: isObject ? JSON.stringify(data) : data,\n    status: status\n  };\n\n  if (isObject) {\n    result.responseType = 'json';\n    result.responseJSON = data;\n  }\n\n  return result;\n}\n/* eslint-disable complexity */\n\n\nfunction fetchRequest(method, url, args) {\n  var body = args.data;\n  var headers = args.headers || {};\n  var contentType = headers['Content-Type'] || headers['content-type'] || ''; // JSON encode body (if appropriate)\n\n  if (contentType === 'application/json' && body && typeof body !== 'string') {\n    body = JSON.stringify(body);\n  }\n\n  var fetchPromise = fetch(url, {\n    method: method,\n    headers: args.headers,\n    body: body,\n    credentials: args.withCredentials ? 'include' : 'omit'\n  }).then(function (response) {\n    var error = !response.ok;\n    var status = response.status;\n    return readData(response).then(function (data) {\n      return formatResult(status, data);\n    }).then(function (result) {\n      if (error) {\n        // Throwing result object since error handling is done in http.js\n        throw result;\n      }\n\n      return result;\n    });\n  });\n  return fetchPromise;\n}\n\nmodule.exports = fetchRequest;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nvar __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (true) {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _regeneratorRuntime = __webpack_require__(8);\n\nvar _asyncToGenerator = __webpack_require__(9);\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n/* eslint-disable complexity */\n\n/* eslint-disable max-statements */\n\n/* SDK_VERSION is defined in webpack config */\n\n/* global SDK_VERSION */\n\n/* global window, navigator, document, crypto */\nvar Emitter = __webpack_require__(17);\n\nvar AuthSdkError = __webpack_require__(1);\n\nvar builderUtil = __webpack_require__(18);\n\nvar constants = __webpack_require__(3);\n\nvar cookies = __webpack_require__(2).storage;\n\nvar http = __webpack_require__(4);\n\nvar oauthUtil = __webpack_require__(5);\n\nvar session = __webpack_require__(21);\n\nvar token = __webpack_require__(22);\n\nvar TokenManager = __webpack_require__(26);\n\nvar tx = __webpack_require__(10);\n\nvar util = __webpack_require__(0);\n\nvar PromiseQueue = __webpack_require__(28);\n\nfunction getCookieSettings(sdk, args) {\n  // Secure cookies will be automatically used on a HTTPS connection\n  // Non-secure cookies will be automatically used on a HTTP connection\n  // secure option can override the automatic behavior\n  var cookieSettings = args.cookies || {};\n\n  if (typeof cookieSettings.secure === 'undefined') {\n    cookieSettings.secure = sdk.features.isHTTPS();\n  }\n\n  if (typeof cookieSettings.sameSite === 'undefined') {\n    cookieSettings.sameSite = cookieSettings.secure ? 'none' : 'lax';\n  } // If secure=true, but the connection is not HTTPS, set secure=false.\n\n\n  if (cookieSettings.secure && !sdk.features.isHTTPS()) {\n    // eslint-disable-next-line no-console\n    console.warn('The current page is not being served with the HTTPS protocol.\\n' + 'For security reasons, we strongly recommend using HTTPS.\\n' + 'If you cannot use HTTPS, set \"cookies.secure\" option to false.');\n    cookieSettings.secure = false;\n  } // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n  // If sameSite=none, but the connection is not HTTPS, set sameSite=lax.\n\n\n  if (cookieSettings.sameSite === 'none' && !cookieSettings.secure) {\n    cookieSettings.sameSite = 'lax';\n  }\n\n  return cookieSettings;\n}\n\nfunction OktaAuthBuilder(args) {\n  var sdk = this;\n  builderUtil.assertValidConfig(args);\n  this.options = {\n    clientId: args.clientId,\n    issuer: util.removeTrailingSlash(args.issuer),\n    authorizeUrl: util.removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: util.removeTrailingSlash(args.userinfoUrl),\n    tokenUrl: util.removeTrailingSlash(args.tokenUrl),\n    revokeUrl: util.removeTrailingSlash(args.revokeUrl),\n    logoutUrl: util.removeTrailingSlash(args.logoutUrl),\n    pkce: args.pkce === false ? false : true,\n    redirectUri: args.redirectUri,\n    postLogoutRedirectUri: args.postLogoutRedirectUri,\n    responseMode: args.responseMode,\n    httpRequestClient: args.httpRequestClient,\n    storageUtil: args.storageUtil,\n    transformErrorXHR: args.transformErrorXHR,\n    headers: args.headers,\n    onSessionExpired: args.onSessionExpired,\n    cookies: getCookieSettings(sdk, args)\n  };\n  this.userAgent = builderUtil.getUserAgent(args, \"okta-auth-js/\".concat(\"3.2.6\")); // Digital clocks will drift over time, so the server\n  // can misalign with the time reported by the browser.\n  // The maxClockSkew allows relaxing the time-based\n  // validation of tokens (in seconds, not milliseconds).\n  // It currently defaults to 300, because 5 min is the\n  // default maximum tolerance allowed by Kerberos.\n  // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n\n  if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n    this.options.maxClockSkew = constants.DEFAULT_MAX_CLOCK_SKEW;\n  } else {\n    this.options.maxClockSkew = args.maxClockSkew;\n  } // Give the developer the ability to disable token signature\n  // validation.\n\n\n  this.options.ignoreSignature = !!args.ignoreSignature;\n  sdk.session = {\n    close: util.bind(session.closeSession, null, sdk),\n    exists: util.bind(session.sessionExists, null, sdk),\n    get: util.bind(session.getSession, null, sdk),\n    refresh: util.bind(session.refreshSession, null, sdk),\n    setCookieAndRedirect: util.bind(session.setCookieAndRedirect, null, sdk)\n  };\n  sdk.tx = {\n    status: util.bind(tx.transactionStatus, null, sdk),\n    resume: util.bind(tx.resumeTransaction, null, sdk),\n    exists: util.bind(tx.transactionExists, null, sdk),\n    introspect: util.bind(tx.introspect, null, sdk)\n  }; // This is exposed so we can mock document.cookie in our tests\n\n  sdk.tx.exists._get = function (name) {\n    return cookies.get(name);\n  }; // This is exposed so we can mock window.location.href in our tests\n\n\n  sdk.idToken = {\n    authorize: {\n      _getLocationHref: function _getLocationHref() {\n        return window.location.href;\n      }\n    }\n  };\n  sdk._tokenQueue = new PromiseQueue();\n  sdk.token = {\n    getWithoutPrompt: util.bind(token.getWithoutPrompt, null, sdk),\n    getWithPopup: util.bind(token.getWithPopup, null, sdk),\n    getWithRedirect: util.bind(token.getWithRedirect, null, sdk),\n    parseFromUrl: util.bind(token.parseFromUrl, null, sdk),\n    decode: token.decodeToken,\n    revoke: util.bind(token.revokeToken, null, sdk),\n    renew: util.bind(token.renewToken, null, sdk),\n    getUserInfo: util.bind(token.getUserInfo, null, sdk),\n    verify: util.bind(token.verifyToken, null, sdk),\n    isLoginRedirect: util.bind(oauthUtil.isLoginRedirect, null, sdk)\n  }; // Wrap all async token API methods using MethodQueue to avoid issues with concurrency\n\n  var syncMethods = ['decode', 'isLoginRedirect'];\n  Object.keys(sdk.token).forEach(function (key) {\n    if (syncMethods.indexOf(key) >= 0) {\n      // sync methods should not be wrapped\n      return;\n    }\n\n    var method = sdk.token[key];\n    sdk.token[key] = util.bind(PromiseQueue.prototype.push, sdk._tokenQueue, method, null);\n  }); // This is exposed so we can set window.location in our tests\n\n  sdk.token.getWithRedirect._setLocation = function (url) {\n    window.location = url;\n  }; // This is exposed so we can mock getting window.history in our tests\n\n\n  sdk.token.parseFromUrl._getHistory = function () {\n    return window.history;\n  }; // This is exposed so we can mock getting window.location in our tests\n\n\n  sdk.token.parseFromUrl._getLocation = function () {\n    return window.location;\n  }; // This is exposed so we can mock getting window.document in our tests\n\n\n  sdk.token.parseFromUrl._getDocument = function () {\n    return window.document;\n  };\n\n  sdk.fingerprint._getUserAgent = function () {\n    return navigator.userAgent;\n  };\n\n  var isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\n\n  sdk.features.isFingerprintSupported = function () {\n    var agent = sdk.fingerprint._getUserAgent();\n\n    return agent && !isWindowsPhone.test(agent);\n  };\n\n  sdk.emitter = new Emitter();\n  sdk.tokenManager = new TokenManager(sdk, args.tokenManager);\n  sdk.tokenManager.on('error', this._onTokenManagerError, this);\n}\n\nvar proto = OktaAuthBuilder.prototype;\n\nproto._onTokenManagerError = function (error) {\n  var code = error.errorCode;\n\n  if (code === 'login_required' && error.accessToken) {\n    if (this.options.onSessionExpired) {\n      this.options.onSessionExpired();\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Session has expired or was closed outside the application.');\n    }\n  }\n};\n\nproto.features = {};\n\nproto.features.isPopupPostMessageSupported = function () {\n  var isIE8or9 = document.documentMode && document.documentMode < 10;\n\n  if (window.postMessage && !isIE8or9) {\n    return true;\n  }\n\n  return false;\n};\n\nproto.features.isTokenVerifySupported = function () {\n  return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n};\n\nproto.features.hasTextEncoder = function () {\n  return typeof TextEncoder !== 'undefined';\n};\n\nproto.features.isPKCESupported = function () {\n  return proto.features.isTokenVerifySupported() && proto.features.hasTextEncoder();\n};\n\nproto.features.isHTTPS = function () {\n  return window.location.protocol === 'https:';\n};\n\nproto.features.isLocalhost = function () {\n  return window.location.hostname === 'localhost';\n}; // { username, password, (relayState), (context) }\n\n\nproto.signIn = function (opts) {\n  var sdk = this;\n  opts = util.clone(opts || {});\n\n  function postToTransaction(options) {\n    delete opts.sendFingerprint;\n    return tx.postToTransaction(sdk, '/api/v1/authn', opts, options);\n  }\n\n  if (!opts.sendFingerprint) {\n    return postToTransaction();\n  }\n\n  return sdk.fingerprint().then(function (fingerprint) {\n    return postToTransaction({\n      headers: {\n        'X-Device-Fingerprint': fingerprint\n      }\n    });\n  });\n}; // Ends the current Okta SSO session without redirecting to Okta.\n\n\nproto.closeSession = function closeSession() {\n  var sdk = this; // Clear all local tokens\n\n  sdk.tokenManager.clear();\n  return sdk.session.close() // DELETE /api/v1/sessions/me\n  .catch(function (e) {\n    if (e.name === 'AuthApiError' && e.errorCode === 'E0000007') {\n      // Session does not exist or has already been closed\n      return;\n    }\n\n    throw e;\n  });\n}; // Revokes the access token for the application session\n\n\nproto.revokeAccessToken =\n/*#__PURE__*/\nfunction () {\n  var _revokeAccessToken = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(accessToken) {\n    var sdk;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            sdk = this;\n\n            if (accessToken) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 4;\n            return sdk.tokenManager.get(constants.ACCESS_TOKEN_STORAGE_KEY);\n\n          case 4:\n            accessToken = _context.sent;\n            sdk.tokenManager.remove(constants.ACCESS_TOKEN_STORAGE_KEY);\n\n          case 6:\n            if (accessToken) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve());\n\n          case 8:\n            return _context.abrupt(\"return\", sdk.token.revoke(accessToken));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  function revokeAccessToken(_x) {\n    return _revokeAccessToken.apply(this, arguments);\n  }\n\n  return revokeAccessToken;\n}(); // Revokes accessToken, clears all local tokens, then redirects to Okta to end the SSO session.\n\n\nproto.signOut =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(options) {\n    var defaultUri, currentUri, postLogoutRedirectUri, accessToken, revokeAccessToken, idToken, sdk, logoutUrl, state, idTokenHint, logoutUri;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            options = util.extend({}, options); // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n\n            defaultUri = window.location.origin;\n            currentUri = window.location.href;\n            postLogoutRedirectUri = options.postLogoutRedirectUri || this.options.postLogoutRedirectUri || defaultUri;\n            accessToken = options.accessToken;\n            revokeAccessToken = options.revokeAccessToken !== false;\n            idToken = options.idToken;\n            sdk = this;\n            logoutUrl = oauthUtil.getOAuthUrls(sdk).logoutUrl;\n\n            if (!(typeof idToken === 'undefined')) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.next = 12;\n            return sdk.tokenManager.get(constants.ID_TOKEN_STORAGE_KEY);\n\n          case 12:\n            idToken = _context2.sent;\n\n          case 13:\n            if (!(revokeAccessToken && typeof accessToken === 'undefined')) {\n              _context2.next = 17;\n              break;\n            }\n\n            _context2.next = 16;\n            return sdk.tokenManager.get(constants.ACCESS_TOKEN_STORAGE_KEY);\n\n          case 16:\n            accessToken = _context2.sent;\n\n          case 17:\n            // Clear all local tokens\n            sdk.tokenManager.clear();\n\n            if (!(revokeAccessToken && accessToken)) {\n              _context2.next = 21;\n              break;\n            }\n\n            _context2.next = 21;\n            return sdk.revokeAccessToken(accessToken);\n\n          case 21:\n            if (idToken) {\n              _context2.next = 23;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", sdk.closeSession() // can throw if the user cannot be signed out\n            .then(function () {\n              if (postLogoutRedirectUri === currentUri) {\n                window.location.reload(); // force a hard reload if URI is not changing\n              } else {\n                window.location.assign(postLogoutRedirectUri);\n              }\n            }));\n\n          case 23:\n            // logout redirect using the idToken.\n            state = options.state;\n            idTokenHint = idToken.idToken; // a string\n\n            logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) + '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri); // State allows option parameters to be passed to logout redirect uri\n\n            if (state) {\n              logoutUri += '&state=' + encodeURIComponent(state);\n            }\n\n            window.location.assign(logoutUri);\n\n          case 28:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function (_x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nbuilderUtil.addSharedPrototypes(proto); // { resource, (rel), (requestContext)}\n\nproto.webfinger = function (opts) {\n  var url = '/.well-known/webfinger' + util.toQueryParams(opts);\n  var options = {\n    headers: {\n      'Accept': 'application/jrd+json'\n    }\n  };\n  return http.get(this, url, options);\n};\n\nproto.fingerprint = function (options) {\n  options = options || {};\n  var sdk = this;\n\n  if (!sdk.features.isFingerprintSupported()) {\n    return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n  }\n\n  var timeout;\n  var iframe;\n  var listener;\n  var promise = new Promise(function (resolve, reject) {\n    iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n\n    listener = function listener(e) {\n      if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n        return;\n      }\n\n      try {\n        var msg = JSON.parse(e.data);\n      } catch (err) {\n        // iframe messages should all be parsable\n        // skip not parsable messages come from other sources in same origin (browser extensions)\n        // TODO: add namespace flag in okta-core to distinguish messages that come from other sources\n        return;\n      }\n\n      if (!msg) {\n        return;\n      }\n\n      if (msg.type === 'FingerprintAvailable') {\n        return resolve(msg.fingerprint);\n      }\n\n      if (msg.type === 'FingerprintServiceReady') {\n        e.source.postMessage(JSON.stringify({\n          type: 'GetFingerprint'\n        }), e.origin);\n      }\n    };\n\n    oauthUtil.addListener(window, 'message', listener);\n    iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n    document.body.appendChild(iframe);\n    timeout = setTimeout(function () {\n      reject(new AuthSdkError('Fingerprinting timed out'));\n    }, options.timeout || 15000);\n  });\n  return promise.finally(function () {\n    clearTimeout(timeout);\n    oauthUtil.removeListener(window, 'message', listener);\n\n    if (document.body.contains(iframe)) {\n      iframe.parentElement.removeChild(iframe);\n    }\n  });\n};\n\nmodule.exports = builderUtil.buildOktaAuth(OktaAuthBuilder);\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n   true ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nvar AuthSdkError = __webpack_require__(1);\n\nvar tx = __webpack_require__(10);\n\nvar util = __webpack_require__(0); // TODO: use @okta/configuration-validation (move module to this monorepo?)\n// eslint-disable-next-line complexity\n\n\nfunction assertValidConfig(args) {\n  if (!args) {\n    throw new AuthSdkError('No arguments passed to constructor. ' + 'Required usage: new OktaAuth(args)');\n  }\n\n  var issuer = args.issuer;\n\n  if (!issuer) {\n    throw new AuthSdkError('No issuer passed to constructor. ' + 'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n  }\n\n  var isUrlRegex = new RegExp('^http?s?://.+');\n\n  if (!isUrlRegex.test(args.issuer)) {\n    throw new AuthSdkError('Issuer must be a valid URL. ' + 'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n  }\n\n  if (issuer.indexOf('-admin.') !== -1) {\n    throw new AuthSdkError('Issuer URL passed to constructor contains \"-admin\" in subdomain. ' + 'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com})');\n  }\n\n  var userAgent = args.userAgent;\n  var userAgentTemplateWithNoPlaceholder = userAgent && userAgent.template && userAgent.template.indexOf('$OKTA_AUTH_JS') === -1;\n\n  if (userAgentTemplateWithNoPlaceholder) {\n    throw new AuthSdkError('UserAgentTemplate must include \"$OKTA_AUTH_JS\" placeholder. ' + 'Required usage: new OktaAuth({userAgentTemplate: \"xxx $OKTA_AUTH_JS xxx\"})');\n  }\n}\n\nfunction addSharedPrototypes(proto) {\n  proto.getIssuerOrigin = function () {\n    // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n    return this.options.issuer.split('/oauth2/')[0];\n  }; // { username, (relayState) }\n\n\n  proto.forgotPassword = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n  }; // { username, (relayState) }\n\n\n  proto.unlockAccount = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n  }; // { recoveryToken }\n\n\n  proto.verifyRecoveryToken = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n  };\n}\n\nfunction buildOktaAuth(OktaAuthBuilder) {\n  return function (storageUtil, httpRequestClient) {\n    function OktaAuth(args) {\n      if (!(this instanceof OktaAuth)) {\n        return new OktaAuth(args);\n      }\n\n      if (args) {\n        args.storageUtil = storageUtil;\n\n        if (args.ajaxRequest) {\n          util.deprecate('ajaxRequest is being deprecated, use httpRequestClient attribute instead.');\n          args.httpRequestClient = args.ajaxRequest;\n        } else if (!args.httpRequestClient) {\n          args.httpRequestClient = httpRequestClient;\n        }\n      }\n\n      util.bind(OktaAuthBuilder, this)(args);\n    }\n\n    OktaAuth.prototype = OktaAuthBuilder.prototype;\n    OktaAuth.prototype.constructor = OktaAuth; // Hoist feature detection functions to static type\n\n    OktaAuth.features = OktaAuthBuilder.prototype.features;\n    return OktaAuth;\n  };\n}\n\nfunction getUserAgent(args, sdkValue) {\n  var userAgent = args.userAgent || {};\n\n  if (userAgent.value) {\n    return userAgent.value;\n  }\n\n  if (userAgent.template) {\n    return userAgent.template.replace('$OKTA_AUTH_JS', sdkValue);\n  }\n\n  return sdkValue;\n}\n\nmodule.exports = {\n  addSharedPrototypes: addSharedPrototypes,\n  buildOktaAuth: buildOktaAuth,\n  assertValidConfig: assertValidConfig,\n  getUserAgent: getUserAgent\n};\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction AuthApiError(err, xhr) {\n  this.name = 'AuthApiError';\n  this.message = err.errorSummary;\n  this.errorSummary = err.errorSummary;\n  this.errorCode = err.errorCode;\n  this.errorLink = err.errorLink;\n  this.errorId = err.errorId;\n  this.errorCauses = err.errorCauses;\n\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\n\nAuthApiError.prototype = new Error();\nmodule.exports = AuthApiError;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction AuthPollStopError() {\n  this.name = 'AuthPollStopError';\n  this.message = 'The poll was stopped by the sdk';\n}\n\nAuthPollStopError.prototype = new Error();\nmodule.exports = AuthPollStopError;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* global window */\nvar util = __webpack_require__(0);\n\nvar http = __webpack_require__(4);\n\nfunction sessionExists(sdk) {\n  return sdk.session.get().then(function (res) {\n    if (res.status === 'ACTIVE') {\n      return true;\n    }\n\n    return false;\n  }).catch(function () {\n    return false;\n  });\n}\n\nfunction getSession(sdk) {\n  return http.get(sdk, '/api/v1/sessions/me').then(function (session) {\n    var res = util.omit(session, '_links');\n\n    res.refresh = function () {\n      return http.post(sdk, util.getLink(session, 'refresh').href);\n    };\n\n    res.user = function () {\n      return http.get(sdk, util.getLink(session, 'user').href);\n    };\n\n    return res;\n  }).catch(function () {\n    // Return INACTIVE status on failure\n    return {\n      status: 'INACTIVE'\n    };\n  });\n}\n\nfunction closeSession(sdk) {\n  return http.httpRequest(sdk, {\n    url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n    method: 'DELETE'\n  });\n}\n\nfunction refreshSession(sdk) {\n  return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\n\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n  redirectUrl = redirectUrl || window.location.href;\n  window.location = sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' + util.toQueryParams({\n    checkAccountSetupComplete: true,\n    token: sessionToken,\n    redirectUrl: redirectUrl\n  });\n}\n\nmodule.exports = {\n  sessionExists: sessionExists,\n  getSession: getSession,\n  closeSession: closeSession,\n  refreshSession: refreshSession,\n  setCookieAndRedirect: setCookieAndRedirect\n};\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _regeneratorRuntime = __webpack_require__(8);\n\nvar _asyncToGenerator = __webpack_require__(9);\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* global window, document, btoa */\n\n/* eslint-disable complexity, max-statements */\nvar http = __webpack_require__(4);\n\nvar util = __webpack_require__(0);\n\nvar oauthUtil = __webpack_require__(5);\n\nvar sdkCrypto = __webpack_require__(23);\n\nvar AuthSdkError = __webpack_require__(1);\n\nvar OAuthError = __webpack_require__(24);\n\nvar constants = __webpack_require__(3);\n\nvar cookies = __webpack_require__(2).storage;\n\nvar browserStorage = __webpack_require__(2);\n\nvar PKCE = __webpack_require__(25); // Only the access token can be revoked in SPA applications\n\n\nfunction revokeToken(sdk, token) {\n  return Promise.resolve().then(function () {\n    if (!token || !token.accessToken) {\n      throw new AuthSdkError('A valid access token object is required');\n    }\n\n    var clientId = sdk.options.clientId;\n\n    if (!clientId) {\n      throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n    }\n\n    var revokeUrl = oauthUtil.getOAuthUrls(sdk).revokeUrl;\n    var accessToken = token.accessToken;\n    var args = util.toQueryParams({\n      // eslint-disable-next-line camelcase\n      token_type_hint: 'access_token',\n      token: accessToken\n    }).slice(1);\n    var creds = btoa(clientId);\n    return http.post(sdk, revokeUrl, args, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': 'Basic ' + creds\n      }\n    });\n  });\n}\n\nfunction decodeToken(token) {\n  var jwt = token.split('.');\n  var decodedToken;\n\n  try {\n    decodedToken = {\n      header: JSON.parse(util.base64UrlToString(jwt[0])),\n      payload: JSON.parse(util.base64UrlToString(jwt[1])),\n      signature: jwt[2]\n    };\n  } catch (e) {\n    throw new AuthSdkError('Malformed token');\n  }\n\n  return decodedToken;\n} // Verify the id token\n\n\nfunction verifyToken(sdk, token, validationParams) {\n  return Promise.resolve().then(function () {\n    if (!token || !token.idToken) {\n      throw new AuthSdkError('Only idTokens may be verified');\n    }\n\n    var jwt = decodeToken(token.idToken);\n    var validationOptions = {\n      clientId: sdk.options.clientId,\n      issuer: sdk.options.issuer,\n      ignoreSignature: sdk.options.ignoreSignature\n    };\n    util.extend(validationOptions, validationParams); // Standard claim validation\n\n    oauthUtil.validateClaims(sdk, jwt.payload, validationOptions); // If the browser doesn't support native crypto or we choose not\n    // to verify the signature, bail early\n\n    if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n      return token;\n    }\n\n    return oauthUtil.getKey(sdk, token.issuer, jwt.header.kid).then(function (key) {\n      return sdkCrypto.verifyToken(token.idToken, key);\n    }).then(function (valid) {\n      if (!valid) {\n        throw new AuthSdkError('The token signature is not valid');\n      }\n\n      if (validationParams && validationParams.accessToken && token.claims.at_hash) {\n        return sdkCrypto.getOidcHash(validationParams.accessToken).then(function (hash) {\n          if (hash !== token.claims.at_hash) {\n            throw new AuthSdkError('Token hash verification failed');\n          }\n        });\n      }\n    }).then(function () {\n      return token;\n    });\n  });\n}\n\nfunction addPostMessageListener(sdk, timeout, state) {\n  var responseHandler;\n  var timeoutId;\n  var msgReceivedOrTimeout = new Promise(function (resolve, reject) {\n    responseHandler = function responseHandler(e) {\n      if (!e.data || e.data.state !== state) {\n        // A message not meant for us\n        return;\n      } // Configuration mismatch between saved token and current app instance\n      // This may happen if apps with different issuers are running on the same host url\n      // If they share the same storage key, they may read and write tokens in the same location.\n      // Common when developing against http://localhost\n\n\n      if (e.origin !== sdk.getIssuerOrigin()) {\n        return reject(new AuthSdkError('The request does not match client configuration'));\n      }\n\n      resolve(e.data);\n    };\n\n    oauthUtil.addListener(window, 'message', responseHandler);\n    timeoutId = setTimeout(function () {\n      reject(new AuthSdkError('OAuth flow timed out'));\n    }, timeout || 120000);\n  });\n  return msgReceivedOrTimeout.finally(function () {\n    clearTimeout(timeoutId);\n    oauthUtil.removeListener(window, 'message', responseHandler);\n  });\n}\n\nfunction exchangeCodeForToken(sdk, oauthParams, authorizationCode, urls) {\n  // PKCE authorization_code flow\n  // Retrieve saved values and build oauthParams for call to /token\n  var meta = PKCE.loadMeta(sdk);\n  var getTokenParams = {\n    clientId: oauthParams.clientId,\n    authorizationCode: authorizationCode,\n    codeVerifier: meta.codeVerifier,\n    redirectUri: meta.redirectUri\n  };\n  return PKCE.getToken(sdk, getTokenParams, urls).then(function (res) {\n    validateResponse(res, getTokenParams);\n    return res;\n  }).finally(function () {\n    PKCE.clearMeta(sdk);\n  });\n}\n\nfunction validateResponse(res, oauthParams) {\n  if (res['error'] || res['error_description']) {\n    throw new OAuthError(res['error'], res['error_description']);\n  }\n\n  if (res.state !== oauthParams.state) {\n    throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n  }\n}\n\nfunction handleOAuthResponse(sdk, oauthParams, res, urls) {\n  urls = urls || {};\n  var responseType = oauthParams.responseType;\n\n  if (!Array.isArray(responseType)) {\n    responseType = [responseType];\n  }\n\n  var scopes = util.clone(oauthParams.scopes);\n  var clientId = oauthParams.clientId || sdk.options.clientId;\n  var pkce = sdk.options.pkce !== false;\n  return Promise.resolve().then(function () {\n    validateResponse(res, oauthParams); // PKCE flow\n    // We do not support \"hybrid\" scenarios where the response includes both a code and a token.\n    // If the response contains a code it is used immediately to obtain new tokens.\n\n    if (res.code && pkce) {\n      // responseType is not sent to the token endpoint.\n      // We populate this array to validate the response below\n      responseType = ['token']; // an accessToken will always be returned\n\n      if (scopes.indexOf('openid') !== -1) {\n        responseType.push('id_token'); // an idToken will be returned if \"openid\" is in the scopes\n      }\n\n      return exchangeCodeForToken(sdk, oauthParams, res.code, urls);\n    }\n\n    return res;\n  }).then(function (res) {\n    var tokenDict = {};\n    var expiresIn = res.expires_in;\n    var tokenType = res.token_type;\n    var accessToken = res.access_token;\n    var idToken = res.id_token;\n\n    if (accessToken) {\n      tokenDict.accessToken = {\n        value: accessToken,\n        accessToken: accessToken,\n        expiresAt: Number(expiresIn) + Math.floor(Date.now() / 1000),\n        tokenType: tokenType,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        userinfoUrl: urls.userinfoUrl\n      };\n    }\n\n    if (idToken) {\n      var jwt = sdk.token.decode(idToken);\n      var idTokenObj = {\n        value: idToken,\n        idToken: idToken,\n        claims: jwt.payload,\n        expiresAt: jwt.payload.exp,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        issuer: urls.issuer,\n        clientId: clientId\n      };\n      var validationParams = {\n        clientId: clientId,\n        issuer: urls.issuer,\n        nonce: oauthParams.nonce,\n        accessToken: accessToken\n      };\n\n      if (oauthParams.ignoreSignature !== undefined) {\n        validationParams.ignoreSignature = oauthParams.ignoreSignature;\n      }\n\n      return verifyToken(sdk, idTokenObj, validationParams).then(function () {\n        tokenDict.idToken = idTokenObj;\n        return tokenDict;\n      });\n    }\n\n    return tokenDict;\n  }).then(function (tokenDict) {\n    // Validate received tokens against requested response types \n    if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n      // eslint-disable-next-line max-len\n      throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n    }\n\n    if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n      // eslint-disable-next-line max-len\n      throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n    }\n\n    return {\n      tokens: tokenDict,\n      state: res.state,\n      code: res.code\n    };\n  });\n}\n\nfunction getDefaultOAuthParams(sdk) {\n  return {\n    pkce: sdk.options.pkce,\n    clientId: sdk.options.clientId,\n    redirectUri: sdk.options.redirectUri || window.location.href,\n    responseType: ['token', 'id_token'],\n    responseMode: sdk.options.responseMode,\n    state: oauthUtil.generateState(),\n    nonce: oauthUtil.generateNonce(),\n    scopes: ['openid', 'email'],\n    ignoreSignature: sdk.options.ignoreSignature\n  };\n}\n\nfunction convertOAuthParamsToQueryParams(oauthParams) {\n  // Quick validation\n  if (!oauthParams.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (util.isString(oauthParams.responseType) && oauthParams.responseType.indexOf(' ') !== -1) {\n    throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n  } // Convert our params to their actual OAuth equivalents\n\n\n  var oauthQueryParams = util.removeNils({\n    'client_id': oauthParams.clientId,\n    'code_challenge': oauthParams.codeChallenge,\n    'code_challenge_method': oauthParams.codeChallengeMethod,\n    'display': oauthParams.display,\n    'idp': oauthParams.idp,\n    'idp_scope': oauthParams.idpScope,\n    'login_hint': oauthParams.loginHint,\n    'max_age': oauthParams.maxAge,\n    'nonce': oauthParams.nonce,\n    'prompt': oauthParams.prompt,\n    'redirect_uri': oauthParams.redirectUri,\n    'response_mode': oauthParams.responseMode,\n    'response_type': oauthParams.responseType,\n    'sessionToken': oauthParams.sessionToken,\n    'state': oauthParams.state\n  });\n  ['idp_scope', 'response_type'].forEach(function (mayBeArray) {\n    if (Array.isArray(oauthQueryParams[mayBeArray])) {\n      oauthQueryParams[mayBeArray] = oauthQueryParams[mayBeArray].join(' ');\n    }\n  });\n\n  if (oauthParams.responseType.indexOf('id_token') !== -1 && oauthParams.scopes.indexOf('openid') === -1) {\n    throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n  } else {\n    oauthQueryParams.scope = oauthParams.scopes.join(' ');\n  }\n\n  return oauthQueryParams;\n}\n\nfunction buildAuthorizeParams(oauthParams) {\n  var oauthQueryParams = convertOAuthParamsToQueryParams(oauthParams);\n  return util.toQueryParams(oauthQueryParams);\n}\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\n\n\nfunction getToken(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getToken\" takes only a single set of options'));\n  }\n\n  options = options || {};\n  return prepareOauthParams(sdk, options).then(function (oauthParams) {\n    // Start overriding any options that don't make sense\n    var sessionTokenOverrides = {\n      prompt: 'none',\n      responseMode: 'okta_post_message',\n      display: null\n    };\n    var idpOverrides = {\n      display: 'popup'\n    };\n\n    if (options.sessionToken) {\n      util.extend(oauthParams, sessionTokenOverrides);\n    } else if (options.idp) {\n      util.extend(oauthParams, idpOverrides);\n    } // Use the query params to build the authorize url\n\n\n    var requestUrl, endpoint, urls; // Get authorizeUrl and issuer\n\n    urls = oauthUtil.getOAuthUrls(sdk, oauthParams);\n    endpoint = options.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n    requestUrl = endpoint + buildAuthorizeParams(oauthParams); // Determine the flow type\n\n    var flowType;\n\n    if (oauthParams.sessionToken || oauthParams.display === null) {\n      flowType = 'IFRAME';\n    } else if (oauthParams.display === 'popup') {\n      flowType = 'POPUP';\n    } else {\n      flowType = 'IMPLICIT';\n    } // Execute the flow type\n\n\n    switch (flowType) {\n      case 'IFRAME':\n        var iframePromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        var iframeEl = oauthUtil.loadFrame(requestUrl);\n        return iframePromise.then(function (res) {\n          return handleOAuthResponse(sdk, oauthParams, res, urls);\n        }).finally(function () {\n          if (document.body.contains(iframeEl)) {\n            iframeEl.parentElement.removeChild(iframeEl);\n          }\n        });\n\n      case 'POPUP':\n        var oauthPromise; // resolves with OAuth response\n        // Add listener on postMessage before window creation, so\n        // postMessage isn't triggered before we're listening\n\n        if (oauthParams.responseMode === 'okta_post_message') {\n          if (!sdk.features.isPopupPostMessageSupported()) {\n            throw new AuthSdkError('This browser doesn\\'t have full postMessage support');\n          }\n\n          oauthPromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        } // Create the window\n\n\n        var windowOptions = {\n          popupTitle: options.popupTitle\n        };\n        var windowEl = oauthUtil.loadPopup(requestUrl, windowOptions); // The popup may be closed without receiving an OAuth response. Setup a poller to monitor the window.\n\n        var popupPromise = new Promise(function (resolve, reject) {\n          var closePoller = setInterval(function () {\n            if (!windowEl || windowEl.closed) {\n              clearInterval(closePoller);\n              reject(new AuthSdkError('Unable to parse OAuth flow response'));\n            }\n          }, 100); // Proxy the OAuth promise results\n\n          oauthPromise.then(function (res) {\n            clearInterval(closePoller);\n            resolve(res);\n          }).catch(function (err) {\n            clearInterval(closePoller);\n            reject(err);\n          });\n        });\n        return popupPromise.then(function (res) {\n          return handleOAuthResponse(sdk, oauthParams, res, urls);\n        }).finally(function () {\n          if (windowEl && !windowEl.closed) {\n            windowEl.close();\n          }\n        });\n\n      default:\n        throw new AuthSdkError('The full page redirect flow is not supported');\n    }\n  }).catch(function (e) {\n    if (sdk.options.pkce) {\n      PKCE.clearMeta(sdk);\n    }\n\n    throw e;\n  });\n}\n\nfunction getWithoutPrompt(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithoutPrompt\" takes only a single set of options'));\n  }\n\n  options = util.clone(options) || {};\n  util.extend(options, {\n    prompt: 'none',\n    responseMode: 'okta_post_message',\n    display: null\n  });\n  return getToken(sdk, options);\n}\n\nfunction getWithPopup(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithPopup\" takes only a single set of options'));\n  }\n\n  options = util.clone(options) || {};\n  util.extend(options, {\n    display: 'popup',\n    responseMode: 'okta_post_message'\n  });\n  return getToken(sdk, options);\n}\n\nfunction prepareOauthParams(sdk, options) {\n  if (oauthUtil.isLoginRedirect(sdk)) {\n    return Promise.reject(new AuthSdkError('The app should not attempt to call getToken on callback. ' + 'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n  } // clone and prepare options\n\n\n  options = util.clone(options) || {}; // build params using defaults + options\n\n  var oauthParams = getDefaultOAuthParams(sdk);\n  util.extend(oauthParams, options);\n\n  if (oauthParams.pkce === false) {\n    return Promise.resolve(oauthParams);\n  } // PKCE flow\n\n\n  if (!sdk.features.isPKCESupported()) {\n    var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n\n    if (!sdk.features.isHTTPS()) {\n      // eslint-disable-next-line max-len\n      errorMessage += '\\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol.';\n    }\n\n    if (!sdk.features.hasTextEncoder()) {\n      // eslint-disable-next-line max-len\n      errorMessage += '\\n\"TextEncoder\" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.';\n    }\n\n    return Promise.reject(new AuthSdkError(errorMessage));\n  } // set default code challenge method, if none provided\n\n\n  if (!oauthParams.codeChallengeMethod) {\n    oauthParams.codeChallengeMethod = PKCE.DEFAULT_CODE_CHALLENGE_METHOD;\n  } // responseType is forced\n\n\n  oauthParams.responseType = 'code';\n  return oauthUtil.getWellKnown(sdk, null).then(function (res) {\n    var methods = res['code_challenge_methods_supported'] || [];\n\n    if (methods.indexOf(oauthParams.codeChallengeMethod) === -1) {\n      throw new AuthSdkError('Invalid code_challenge_method');\n    }\n  }).then(function () {\n    // PKCE authorization_code flow\n    var codeVerifier = PKCE.generateVerifier(oauthParams.codeVerifier); // We will need these values after redirect when we call /token\n\n    var meta = {\n      codeVerifier: codeVerifier,\n      redirectUri: oauthParams.redirectUri\n    };\n    PKCE.saveMeta(sdk, meta);\n    return PKCE.computeChallenge(codeVerifier);\n  }).then(function (codeChallenge) {\n    // Clone/copy the params. Set codeChallenge\n    var clonedParams = util.clone(oauthParams) || {};\n    util.extend(clonedParams, oauthParams, {\n      codeChallenge: codeChallenge\n    });\n    return clonedParams;\n  });\n}\n\nfunction _addOAuthParamsToStorage(sdk, tokenParams, urls) {\n  var responseType = tokenParams.responseType,\n      state = tokenParams.state,\n      nonce = tokenParams.nonce,\n      scopes = tokenParams.scopes,\n      clientId = tokenParams.clientId,\n      ignoreSignature = tokenParams.ignoreSignature;\n  var tokenParamsStr = JSON.stringify({\n    responseType: responseType,\n    state: state,\n    nonce: nonce,\n    scopes: scopes,\n    clientId: clientId,\n    urls: urls,\n    ignoreSignature: ignoreSignature\n  }); // Add oauth_params to both cookies and sessionStorage for broader support\n\n  cookies.set(constants.REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr, null, sdk.options.cookies);\n\n  if (browserStorage.browserHasSessionStorage()) {\n    browserStorage.getSessionStorage().setItem(constants.REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr);\n  }\n}\n\nfunction getWithRedirect(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithRedirect\" takes only a single set of options'));\n  }\n\n  options = util.clone(options) || {};\n  return prepareOauthParams(sdk, options).then(function (oauthParams) {\n    var urls = oauthUtil.getOAuthUrls(sdk, options);\n    var requestUrl = urls.authorizeUrl + buildAuthorizeParams(oauthParams);\n\n    _addOAuthParamsToStorage(sdk, oauthParams, urls); // Set nonce cookie for servers to validate nonce in id_token\n\n\n    cookies.set(constants.REDIRECT_NONCE_COOKIE_NAME, oauthParams.nonce, null, sdk.options.cookies); // Set state cookie for servers to validate state\n\n    cookies.set(constants.REDIRECT_STATE_COOKIE_NAME, oauthParams.state, null, sdk.options.cookies);\n\n    sdk.token.getWithRedirect._setLocation(requestUrl);\n  });\n}\n\nfunction renewToken(sdk, token) {\n  if (!oauthUtil.isToken(token)) {\n    return Promise.reject(new AuthSdkError('Renew must be passed a token with ' + 'an array of scopes and an accessToken or idToken'));\n  }\n\n  var responseType;\n\n  if (sdk.options.pkce) {\n    responseType = 'code';\n  } else if (token.accessToken) {\n    responseType = 'token';\n  } else {\n    responseType = 'id_token';\n  }\n\n  return getWithoutPrompt(sdk, {\n    responseType: responseType,\n    scopes: token.scopes,\n    authorizeUrl: token.authorizeUrl,\n    userinfoUrl: token.userinfoUrl,\n    issuer: token.issuer\n  }).then(function (res) {\n    // Multiple tokens may have come back. Return only the token which was requested.\n    var tokens = res.tokens;\n    return token.idToken ? tokens.idToken : tokens.accessToken;\n  });\n}\n\nfunction removeHash(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n  } else {\n    nativeLoc.hash = '';\n  }\n}\n\nfunction removeSearch(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n  } else {\n    nativeLoc.search = '';\n  }\n}\n\nfunction _getOAuthParamsStrFromStorage() {\n  // try to read OAuth params from cookie first. This is for backward compatibility\n  var oauthParamsStr = cookies.get(constants.REDIRECT_OAUTH_PARAMS_NAME);\n  cookies.delete(constants.REDIRECT_OAUTH_PARAMS_NAME); // latest version of auth-js will store params in session storage\n\n  if (!oauthParamsStr && browserStorage.browserHasSessionStorage()) {\n    var storage = browserStorage.getSessionStorage();\n    oauthParamsStr = storage.getItem(constants.REDIRECT_OAUTH_PARAMS_NAME);\n    storage.removeItem(constants.REDIRECT_OAUTH_PARAMS_NAME);\n  }\n\n  return oauthParamsStr;\n}\n\nfunction parseFromUrl(sdk, options) {\n  options = options || {};\n\n  if (util.isString(options)) {\n    options = {\n      url: options\n    };\n  } // https://openid.net/specs/openid-connect-core-1_0.html#Authentication\n\n\n  var defaultResponseMode = sdk.options.pkce ? 'query' : 'fragment';\n  var url = options.url;\n  var responseMode = options.responseMode || sdk.options.responseMode || defaultResponseMode;\n\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n\n  var paramStr;\n\n  if (responseMode === 'query') {\n    paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n  } else {\n    paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n  }\n\n  if (!paramStr) {\n    return Promise.reject(new AuthSdkError('Unable to parse a token from the url'));\n  }\n\n  var oauthParamsStr = _getOAuthParamsStrFromStorage();\n\n  if (!oauthParamsStr) {\n    return Promise.reject(new AuthSdkError('Unable to retrieve OAuth redirect params from storage'));\n  }\n\n  try {\n    var oauthParams = JSON.parse(oauthParamsStr);\n    var urls = oauthParams.urls;\n    delete oauthParams.urls;\n  } catch (e) {\n    return Promise.reject(new AuthSdkError('Unable to parse the ' + constants.REDIRECT_OAUTH_PARAMS_NAME + ' value from storage: ' + e.message));\n  }\n\n  return Promise.resolve(oauthUtil.urlParamsToObject(paramStr)).then(function (res) {\n    if (!url) {\n      // Clean hash or search from the url\n      responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n    }\n\n    return handleOAuthResponse(sdk, oauthParams, res, urls);\n  });\n}\n\nfunction getUserInfo(_x, _x2, _x3) {\n  return _getUserInfo.apply(this, arguments);\n}\n\nfunction _getUserInfo() {\n  _getUserInfo = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(sdk, accessTokenObject, idTokenObject) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (accessTokenObject) {\n              _context.next = 4;\n              break;\n            }\n\n            _context.next = 3;\n            return sdk.tokenManager.get(constants.ACCESS_TOKEN_STORAGE_KEY);\n\n          case 3:\n            accessTokenObject = _context.sent;\n\n          case 4:\n            if (idTokenObject) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 7;\n            return sdk.tokenManager.get(constants.ID_TOKEN_STORAGE_KEY);\n\n          case 7:\n            idTokenObject = _context.sent;\n\n          case 8:\n            if (!(!accessTokenObject || !oauthUtil.isToken(accessTokenObject) && !accessTokenObject.accessToken && !accessTokenObject.userinfoUrl)) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(new AuthSdkError('getUserInfo requires an access token object')));\n\n          case 10:\n            if (!(!idTokenObject || !oauthUtil.isToken(idTokenObject) && !idTokenObject.idToken)) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(new AuthSdkError('getUserInfo requires an ID token object')));\n\n          case 12:\n            return _context.abrupt(\"return\", http.httpRequest(sdk, {\n              url: accessTokenObject.userinfoUrl,\n              method: 'GET',\n              accessToken: accessTokenObject.accessToken\n            }).then(function (userInfo) {\n              // Only return the userinfo response if subjects match to mitigate token substitution attacks\n              if (userInfo.sub === idTokenObject.claims.sub) {\n                return userInfo;\n              }\n\n              return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n            }).catch(function (err) {\n              if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n                var authenticateHeader;\n\n                if (err.xhr.headers && util.isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n                  authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n                } else if (util.isFunction(err.xhr.getResponseHeader)) {\n                  authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n                }\n\n                if (authenticateHeader) {\n                  var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n                  var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n                  var error = errorMatches[1];\n                  var errorDescription = errorDescriptionMatches[1];\n\n                  if (error && errorDescription) {\n                    err = new OAuthError(error, errorDescription);\n                  }\n                }\n              }\n\n              throw err;\n            }));\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getUserInfo.apply(this, arguments);\n}\n\nmodule.exports = {\n  revokeToken: revokeToken,\n  getToken: getToken,\n  getWithoutPrompt: getWithoutPrompt,\n  getWithPopup: getWithPopup,\n  getWithRedirect: getWithRedirect,\n  parseFromUrl: parseFromUrl,\n  decodeToken: decodeToken,\n  renewToken: renewToken,\n  getUserInfo: getUserInfo,\n  verifyToken: verifyToken,\n  handleOAuthResponse: handleOAuthResponse,\n  prepareOauthParams: prepareOauthParams,\n  _addOAuthParamsToStorage: _addOAuthParamsToStorage,\n  // export for testing purpose\n  _getOAuthParamsStrFromStorage: _getOAuthParamsStrFromStorage // export for testing purpose\n\n};\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n/* global crypto, Uint8Array, TextEncoder */\nvar util = __webpack_require__(0);\n\nfunction getOidcHash(str) {\n  var buffer = new TextEncoder().encode(str);\n  return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n    var intBuffer = new Uint8Array(arrayBuffer);\n    var firstHalf = intBuffer.slice(0, 16);\n    var hash = String.fromCharCode.apply(null, firstHalf);\n    var b64u = util.stringToBase64Url(hash); // url-safe base64 variant\n\n    return b64u;\n  });\n}\n\nfunction verifyToken(idToken, key) {\n  key = util.clone(key);\n  var format = 'jwk';\n  var algo = {\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: {\n      name: 'SHA-256'\n    }\n  };\n  var extractable = true;\n  var usages = ['verify']; // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n  // This is a metadata tag that specifies the intent of how the key should be used.\n  // It's not necessary to properly verify the jwt's signature.\n\n  delete key.use;\n  return crypto.subtle.importKey(format, key, algo, extractable, usages).then(function (cryptoKey) {\n    var jwt = idToken.split('.');\n    var payload = util.stringToBuffer(jwt[0] + '.' + jwt[1]);\n    var b64Signature = util.base64UrlDecode(jwt[2]);\n    var signature = util.stringToBuffer(b64Signature);\n    return crypto.subtle.verify(algo, cryptoKey, signature, payload);\n  });\n}\n\nmodule.exports = {\n  getOidcHash: getOidcHash,\n  verifyToken: verifyToken\n};\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction OAuthError(errorCode, summary) {\n  this.name = 'OAuthError';\n  this.message = summary;\n  this.errorCode = errorCode;\n  this.errorSummary = summary;\n}\n\nOAuthError.prototype = new Error();\nmodule.exports = OAuthError;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* global crypto */\n\n/* eslint-disable complexity, max-statements */\nvar AuthSdkError = __webpack_require__(1);\n\nvar http = __webpack_require__(4);\n\nvar util = __webpack_require__(0); // Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\n\n\nvar MIN_VERIFIER_LENGTH = 43;\nvar MAX_VERIFIER_LENGTH = 128;\nvar DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\n\nfunction dec2hex(dec) {\n  return ('0' + dec.toString(16)).substr(-2);\n}\n\nfunction getRandomString(length) {\n  var a = new Uint8Array(Math.ceil(length / 2));\n  crypto.getRandomValues(a);\n  var str = Array.from(a, dec2hex).join('');\n  return str.slice(0, length);\n}\n\nfunction generateVerifier(prefix) {\n  var verifier = prefix || '';\n\n  if (verifier.length < MIN_VERIFIER_LENGTH) {\n    verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n  }\n\n  return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\n\nfunction getStorage(sdk, options) {\n  options = util.extend({}, sdk.options.cookies, options);\n  return sdk.options.storageUtil.getPKCEStorage(options);\n}\n\nfunction saveMeta(sdk, meta) {\n  // There must be only one PKCE flow executing at a time.\n  // Before saving meta, check to see if a codeVerfier is already stored.\n  var storage = getStorage(sdk, {\n    preferLocalStorage: true\n  });\n  var obj = storage.getStorage();\n\n  if (obj.codeVerifier) {\n    // eslint-disable-next-line max-len\n    util.warn('saveMeta: PKCE codeVerifier exists in localStorage. This may indicate an auth flow is already in progress.');\n  }\n\n  storage = getStorage(sdk);\n  obj = storage.getStorage();\n\n  if (obj.codeVerifier) {\n    // eslint-disable-next-line max-len\n    util.warn('saveMeta: PKCE codeVerifier exists in sessionStorage. This may indicate an auth flow is already in progress.');\n  } // clear all PKCE meta storage before saving.\n\n\n  clearMeta(sdk);\n  storage.setStorage(meta);\n}\n\nfunction loadMeta(sdk) {\n  // Try reading from localStorage first.\n  // This is for compatibility with older versions of the signin widget. OKTA-304806\n  var storage = getStorage(sdk, {\n    preferLocalStorage: true\n  });\n  var obj = storage.getStorage(); // Verify the Meta\n\n  if (!obj.codeVerifier) {\n    // If meta is not valid, read from sessionStorage. This is expected for current versions of the SDK.\n    storage = getStorage(sdk, {\n      preferLocalStorage: false\n    });\n    obj = storage.getStorage();\n\n    if (!obj.codeVerifier) {\n      // If meta is not valid, throw an exception to avoid misleading server-side error\n      // The most likely cause of this error is trying to handle a callback twice\n      // eslint-disable-next-line max-len\n      throw new AuthSdkError('Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.', null);\n    }\n  }\n\n  return obj;\n}\n\nfunction clearMeta(sdk) {\n  // clear sessionStorage (current version)\n  var storage = getStorage(sdk);\n  storage.clearStorage(); // clear localStorage (previous versions, signin widget)\n\n  storage = getStorage(sdk, {\n    preferLocalStorage: true\n  });\n  storage.clearStorage();\n}\n/* global Uint8Array, TextEncoder */\n\n\nfunction computeChallenge(str) {\n  var buffer = new TextEncoder().encode(str);\n  return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n    var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n    var b64u = util.stringToBase64Url(hash); // url-safe base64 variant\n\n    return b64u;\n  });\n}\n\nfunction validateOptions(oauthOptions) {\n  // Quick validation\n  if (!oauthOptions.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (!oauthOptions.redirectUri) {\n    throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n  }\n\n  if (!oauthOptions.authorizationCode) {\n    throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n  }\n\n  if (!oauthOptions.codeVerifier) {\n    throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n  }\n}\n\nfunction getPostData(options) {\n  // Convert options to OAuth params\n  var params = util.removeNils({\n    'client_id': options.clientId,\n    'redirect_uri': options.redirectUri,\n    'grant_type': 'authorization_code',\n    'code': options.authorizationCode,\n    'code_verifier': options.codeVerifier\n  }); // Encode as URL string\n\n  return util.toQueryParams(params).slice(1);\n} // exchange authorization code for an access token\n\n\nfunction getToken(sdk, oauthOptions, urls) {\n  validateOptions(oauthOptions);\n  var data = getPostData(oauthOptions);\n  return http.httpRequest(sdk, {\n    url: urls.tokenUrl,\n    method: 'POST',\n    args: data,\n    withCredentials: false,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n\nmodule.exports = {\n  DEFAULT_CODE_CHALLENGE_METHOD: DEFAULT_CODE_CHALLENGE_METHOD,\n  generateVerifier: generateVerifier,\n  clearMeta: clearMeta,\n  saveMeta: saveMeta,\n  loadMeta: loadMeta,\n  computeChallenge: computeChallenge,\n  getToken: getToken\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _typeof = __webpack_require__(6);\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* global localStorage, sessionStorage */\n\n/* eslint complexity:[0,8] max-statements:[0,21] */\nvar util = __webpack_require__(0);\n\nvar AuthSdkError = __webpack_require__(1);\n\nvar storageUtil = __webpack_require__(2);\n\nvar constants = __webpack_require__(3);\n\nvar storageBuilder = __webpack_require__(7);\n\nvar SdkClock = __webpack_require__(27);\n\nvar oauthUtil = __webpack_require__(5);\n\nvar DEFAULT_OPTIONS = {\n  autoRenew: true,\n  storage: 'localStorage',\n  expireEarlySeconds: 30\n};\n\nfunction getExpireTime(tokenMgmtRef, token) {\n  var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n  return expireTime;\n}\n\nfunction hasExpired(tokenMgmtRef, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  return expireTime <= tokenMgmtRef.clock.now();\n}\n\nfunction emitExpired(tokenMgmtRef, key, token) {\n  tokenMgmtRef.emitter.emit('expired', key, token);\n}\n\nfunction emitError(tokenMgmtRef, error) {\n  tokenMgmtRef.emitter.emit('error', error);\n}\n\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n  clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n  delete tokenMgmtRef.expireTimeouts[key]; // Remove the renew promise (if it exists)\n\n  delete tokenMgmtRef.renewPromise[key];\n}\n\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n  var expireTimeouts = tokenMgmtRef.expireTimeouts;\n\n  for (var key in expireTimeouts) {\n    if (!expireTimeouts.hasOwnProperty(key)) {\n      continue;\n    }\n\n    clearExpireEventTimeout(tokenMgmtRef, key);\n  }\n}\n\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000; // Clear any existing timeout\n\n  clearExpireEventTimeout(tokenMgmtRef, key);\n  var expireEventTimeout = setTimeout(function () {\n    emitExpired(tokenMgmtRef, key, token);\n  }, expireEventWait); // Add a new timeout\n\n  tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\n\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n  try {\n    var tokenStorage = storage.getStorage();\n  } catch (e) {\n    // Any errors thrown on instantiation will not be caught,\n    // because there are no listeners yet\n    emitError(tokenMgmtRef, e);\n    return;\n  }\n\n  for (var key in tokenStorage) {\n    if (!tokenStorage.hasOwnProperty(key)) {\n      continue;\n    }\n\n    var token = tokenStorage[key];\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n  }\n}\n\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n  var tokenStorage = storage.getStorage();\n\n  if (!util.isObject(token) || !token.scopes || !token.expiresAt && token.expiresAt !== 0 || !token.idToken && !token.accessToken) {\n    throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties');\n  }\n\n  tokenStorage[key] = token;\n  storage.setStorage(tokenStorage);\n  setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\n\nfunction get(storage, key) {\n  var tokenStorage = storage.getStorage();\n  return tokenStorage[key];\n}\n\nfunction getAsync(sdk, tokenMgmtRef, storage, key) {\n  return new Promise(function (resolve, reject) {\n    if (tokenMgmtRef.options.autoRenew && oauthUtil.isLoginRedirect(sdk)) {\n      return reject(new AuthSdkError('The app should not attempt to call authorize API on callback. ' + 'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n    }\n\n    var token = get(storage, key);\n\n    if (!token || !hasExpired(tokenMgmtRef, token)) {\n      return resolve(token);\n    }\n\n    var tokenPromise = tokenMgmtRef.options.autoRenew ? renew(sdk, tokenMgmtRef, storage, key) : remove(tokenMgmtRef, storage, key);\n    return resolve(tokenPromise);\n  });\n}\n\nfunction remove(tokenMgmtRef, storage, key) {\n  // Clear any listener for this token\n  clearExpireEventTimeout(tokenMgmtRef, key); // Remove it from storage\n\n  var tokenStorage = storage.getStorage();\n  delete tokenStorage[key];\n  storage.setStorage(tokenStorage);\n}\n\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n  // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n  var existingPromise = tokenMgmtRef.renewPromise[key];\n\n  if (existingPromise) {\n    return existingPromise;\n  }\n\n  try {\n    var token = get(storage, key);\n\n    if (!token) {\n      throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n    }\n  } catch (e) {\n    return Promise.reject(e);\n  } // Remove existing autoRenew timeout for this key\n\n\n  clearExpireEventTimeout(tokenMgmtRef, key); // Store the renew promise state, to avoid renewing again\n\n  tokenMgmtRef.renewPromise[key] = sdk.token.renew(token).then(function (freshToken) {\n    var oldToken = get(storage, key);\n\n    if (!oldToken) {\n      // It is possible to enter a state where the tokens have been cleared\n      // after a renewal request was triggered. To ensure we do not store a\n      // renewed token, we verify the promise key doesn't exist and return.\n      return;\n    }\n\n    add(sdk, tokenMgmtRef, storage, key, freshToken);\n    tokenMgmtRef.emitter.emit('renewed', key, freshToken, oldToken);\n    return freshToken;\n  }).catch(function (err) {\n    if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n      remove(tokenMgmtRef, storage, key);\n      err.tokenKey = key;\n      err.accessToken = !!token.accessToken;\n      emitError(tokenMgmtRef, err);\n    }\n\n    throw err;\n  }).finally(function () {\n    // Remove existing promise key\n    delete tokenMgmtRef.renewPromise[key];\n  });\n  return tokenMgmtRef.renewPromise[key];\n}\n\nfunction clear(tokenMgmtRef, storage) {\n  clearExpireEventTimeoutAll(tokenMgmtRef);\n  storage.clearStorage();\n}\n\nfunction TokenManager(sdk, options) {\n  options = util.extend({}, DEFAULT_OPTIONS, util.removeNils(options));\n\n  if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n    util.warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n    options.storage = 'sessionStorage';\n  }\n\n  if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n    util.warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n    options.storage = 'cookie';\n  }\n\n  var storageProvider;\n\n  if (_typeof(options.storage) === 'object') {\n    // A custom storage provider must implement getItem(key) and setItem(key, val)\n    storageProvider = options.storage;\n  } else {\n    switch (options.storage) {\n      case 'localStorage':\n        storageProvider = localStorage;\n        break;\n\n      case 'sessionStorage':\n        storageProvider = sessionStorage;\n        break;\n\n      case 'cookie':\n        // Implement customized cookie storage to make sure each token is stored separatedly in cookie\n        storageProvider = function (options) {\n          var storage = storageUtil.getCookieStorage(options);\n          return {\n            getItem: function getItem(key) {\n              var data = storage.getItem();\n              var value = {};\n              Object.keys(data).forEach(function (k) {\n                if (k.indexOf(key) === 0) {\n                  value[k.replace(\"\".concat(key, \"_\"), '')] = JSON.parse(data[k]);\n                }\n              });\n              return JSON.stringify(value);\n            },\n            setItem: function setItem(key, value) {\n              var existingValues = JSON.parse(this.getItem(key));\n              value = JSON.parse(value); // Set key-value pairs from input to cookies\n\n              Object.keys(value).forEach(function (k) {\n                var storageKey = key + '_' + k;\n                var valueToStore = JSON.stringify(value[k]);\n                storage.setItem(storageKey, valueToStore);\n                delete existingValues[k];\n              }); // Delete unmatched keys from existing cookies\n\n              Object.keys(existingValues).forEach(function (k) {\n                storageUtil.storage.delete(key + '_' + k);\n              });\n            }\n          };\n        }(sdk.options.cookies);\n\n        break;\n\n      case 'memory':\n        storageProvider = storageUtil.getInMemoryStorage();\n        break;\n\n      default:\n        throw new AuthSdkError('Unrecognized storage option');\n    }\n  }\n\n  var storageKey = options.storageKey || constants.TOKEN_STORAGE_NAME;\n  var storage = storageBuilder(storageProvider, storageKey);\n  var clock = SdkClock.create(sdk, options);\n  var tokenMgmtRef = {\n    clock: clock,\n    options: options,\n    emitter: sdk.emitter,\n    expireTimeouts: {},\n    renewPromise: {}\n  };\n  this.add = util.bind(add, this, sdk, tokenMgmtRef, storage);\n  this.get = util.bind(getAsync, this, sdk, tokenMgmtRef, storage);\n  this.remove = util.bind(remove, this, tokenMgmtRef, storage);\n  this.clear = util.bind(clear, this, tokenMgmtRef, storage);\n  this.renew = util.bind(renew, this, sdk, tokenMgmtRef, storage);\n  this.on = util.bind(tokenMgmtRef.emitter.on, tokenMgmtRef.emitter);\n  this.off = util.bind(tokenMgmtRef.emitter.off, tokenMgmtRef.emitter);\n  setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n}\n\nmodule.exports = TokenManager;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\n\nfunction SdkClock(localOffset) {\n  // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n  this.localOffset = parseInt(localOffset || 0);\n}\n\nutil.extend(SdkClock.prototype, {\n  // Return the current time (in seconds)\n  now: function now() {\n    var now = (Date.now() + this.localOffset) / 1000;\n    return now;\n  }\n}); // factory method. Create an instance of a clock from current context.\n\nSdkClock.create = function ()\n/* sdk, options */\n{\n  // TODO: calculate localOffset\n  var localOffset = 0;\n  return new SdkClock(localOffset);\n};\n\nmodule.exports = SdkClock;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0); // Implements a queue for synchronous or asynchronous methods\n// Methods will be wrapped in a promise and execute sequentially\n// This can be used to prevent concurrent calls to a single method or a set of methods\n\n\nfunction PromiseQueue() {\n  this.queue = [];\n  this.running = false;\n}\n\nutil.extend(PromiseQueue.prototype, {\n  // Returns a promise\n  // If the method is synchronous, it will resolve when the method completes\n  // If the method returns a promise, it will resolve (or reject) with the value from the method's promise\n  push: function push()\n  /* method, thisObject, args... */\n  {\n    var _this = this;\n\n    var args = Array.prototype.slice.call(arguments);\n    var method = args[0];\n    var thisObject = args[1];\n    args = args.slice(2);\n    return new Promise(function (resolve, reject) {\n      _this.queue.push({\n        method: method,\n        thisObject: thisObject,\n        args: args,\n        resolve: resolve,\n        reject: reject\n      });\n\n      _this.run();\n    });\n  },\n  run: function run() {\n    var _this2 = this;\n\n    if (this.running) {\n      return;\n    }\n\n    if (this.queue.length === 0) {\n      return;\n    }\n\n    this.running = true;\n    var queueItem = this.queue.shift();\n    var res = queueItem.method.apply(queueItem.thisObject, queueItem.args);\n\n    if (util.isPromise(res)) {\n      res.then(queueItem.resolve, queueItem.reject).finally(function () {\n        _this2.running = false;\n\n        _this2.run();\n      });\n    } else {\n      queueItem.resolve(res);\n      this.running = false;\n      this.run();\n    }\n  }\n});\nmodule.exports = PromiseQueue;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// okta-auth-js.min.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global window, document, btoa, atob, Uint8Array */\n\nvar util = module.exports;\n\n// converts a string to base64 (url/filename safe variant)\nutil.stringToBase64Url = function(str) {\n  var b64 = btoa(str);\n  return util.base64ToBase64Url(b64);\n};\n\n// converts a standard base64-encoded string to a \"url/filename safe\" variant\nutil.base64ToBase64Url = function(b64) {\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n};\n\n// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\nutil.base64UrlToBase64 = function(b64u) {\n  return b64u.replace(/-/g, '+').replace(/_/g, '/');\n};\n\nutil.base64UrlToString = function(b64u) {\n  var b64 = util.base64UrlToBase64(b64u);\n  switch (b64.length % 4) {\n    case 0:\n      break;\n    case 2:\n      b64 += '==';\n      break;\n    case 3:\n      b64 += '=';\n      break;\n    default:\n      throw 'Not a valid Base64Url';\n  }\n  var utf8 = atob(b64);\n  try {\n    return decodeURIComponent(escape(utf8));\n  } catch (e) {\n    return utf8;\n  }\n};\n\nutil.stringToBuffer = function(str) {\n  var buffer = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    buffer[i] = str.charCodeAt(i);\n  }\n  return buffer;\n};\n\nutil.base64UrlDecode = function(str) {\n  return atob(util.base64UrlToBase64(str));\n};\n\nutil.bind = function(fn, ctx) {\n  var additionalArgs = Array.prototype.slice.call(arguments, 2);\n  return function() {\n    var args = Array.prototype.slice.call(arguments);\n    args = additionalArgs.concat(args);\n    return fn.apply(ctx, args);\n  };\n};\n\nutil.isAbsoluteUrl = function(url) {\n  return /^(?:[a-z]+:)?\\/\\//i.test(url);\n};\n\nutil.isString = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object String]';\n};\n\nutil.isObject = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\nutil.isNumber = function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Number]';\n};\n\nutil.isoToUTCString = function(str) {\n  var parts = str.match(/\\d+/g),\n      isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]),\n      isoDate = new Date(isoTime);\n\n  return isoDate.toUTCString();\n};\n\nutil.toQueryParams = function(obj) {\n  var str = [];\n  if (obj !== null) {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) &&\n          obj[key] !== undefined &&\n          obj[key] !== null) {\n        str.push(key + '=' + encodeURIComponent(obj[key]));\n      }\n    }\n  }\n  if (str.length) {\n    return '?' + str.join('&');\n  } else {\n    return '';\n  }\n};\n\nutil.genRandomString = function(length) {\n  var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  var random = '';\n  for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n    random += randomCharset[Math.floor(Math.random() * cl)];\n  }\n  return random;\n};\n\nutil.extend = function() {\n  // First object will be modified!\n  var obj1 = arguments[0];\n  // Properties from other objects will be copied over\n  var objArray = [].slice.call(arguments, 1);\n  objArray.forEach(function(obj) {\n    for (var prop in obj) {\n      // copy over all properties with defined values\n      if (obj.hasOwnProperty(prop) && obj[prop] !== undefined) {\n        obj1[prop] = obj[prop];\n      }\n    }\n  });\n  return obj1; // return the modified object\n};\n\nutil.removeNils = function(obj) {\n  var cleaned = {};\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      var value = obj[prop];\n      if (value !== null && value !== undefined) {\n        cleaned[prop] = value;\n      }\n    }\n  }\n  return cleaned;\n};\n\nutil.clone = function(obj) {\n  if (obj) {\n    var str = JSON.stringify(obj);\n    if (str) {\n      return JSON.parse(str);\n    }\n  }\n  return obj;\n};\n\n// Analogous to _.omit\nutil.omit = function(obj) {\n  var props = Array.prototype.slice.call(arguments, 1);\n  var newobj = {};\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p) && props.indexOf(p) == -1) {\n      newobj[p] = obj[p];\n    }\n  }\n  return util.clone(newobj);\n};\n\nutil.find = function(collection, searchParams) {\n  var c = collection.length;\n  while (c--) {\n    var item = collection[c];\n    var found = true;\n    for (var prop in searchParams) {\n      if (!searchParams.hasOwnProperty(prop)) {\n        continue;\n      }\n      if (item[prop] !== searchParams[prop]) {\n        found = false;\n        break;\n      }\n    }\n    if (found) {\n      return item;\n    }\n  }\n};\n\nutil.getLink = function(obj, linkName, altName) {\n  if (!obj || !obj._links) {\n    return;\n  }\n\n  var link = util.clone(obj._links[linkName]);\n\n  // If a link has a name and we have an altName, return if they match\n  if (link && link.name && altName) {\n    if (link.name === altName) {\n      return link;\n    }\n  } else {\n    return link;\n  }\n};\n\nutil.getNativeConsole = function() {\n  if (typeof window !== 'undefined') {\n    return window.console;\n  } else if (typeof console !== 'undefined') {\n    return console;\n  } else {\n    return undefined;\n  }\n};\n\nutil.getConsole = function() {\n  var nativeConsole = util.getNativeConsole();\n  if (nativeConsole && nativeConsole.log) {\n    return nativeConsole;\n  }\n  return {\n    log: function() {}\n  };\n};\n\nutil.warn = function(text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] WARN: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecate = function(text) {\n  /* eslint-disable no-console */\n  util.getConsole().log('[okta-auth-sdk] DEPRECATION: ' + text);\n  /* eslint-enable */\n};\n\nutil.deprecateWrap = function(text, fn) {\n  return function() {\n    util.deprecate(text);\n    return fn.apply(null, arguments);\n  };\n};\n\nutil.removeTrailingSlash = function(path) {\n  if (!path) {\n    return;\n  }\n  // Remove any whitespace before or after string\n  var trimmed = path.replace(/^\\s+|\\s+$/gm,'');\n  // Remove trailing slash(es)\n  trimmed = trimmed.replace(/\\/+$/, '');\n\n  return trimmed;\n};\n\nutil.isIE11OrLess = function() {\n  return !!document.documentMode && document.documentMode <= 11;\n};\n\nutil.isFunction = function(fn) {\n  return !!fn && {}.toString.call(fn) === '[object Function]';\n};\n\nutil.delay = function(ms) {\n  return new Promise(function(resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nutil.isPromise = function(obj) {\n  return obj && obj.finally && (typeof obj.finally === 'function');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/util.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthSdkError(msg, xhr) {\n  this.name = 'AuthSdkError';\n  this.message = msg;\n\n  this.errorCode = 'INTERNAL';\n  this.errorSummary = msg;\n  this.errorLink = 'INTERNAL';\n  this.errorId = 'INTERNAL';\n  this.errorCauses = [];\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\nAuthSdkError.prototype = new Error();\n\nmodule.exports = AuthSdkError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/AuthSdkError.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global localStorage, sessionStorage */\nvar Cookies = require('js-cookie');\nvar storageBuilder = require('../storageBuilder');\nvar constants = require('../constants');\nvar AuthSdkError = require('../errors/AuthSdkError');\n\n// Building this as an object allows us to mock the functions in our tests\nvar storageUtil = {};\n\n// IE11 bug that Microsoft doesn't plan to fix\n// https://connect.microsoft.com/IE/Feedback/Details/1496040\nstorageUtil.browserHasLocalStorage = function() {\n  try {\n    var storage = storageUtil.getLocalStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.browserHasSessionStorage = function() {\n  try {\n    var storage = storageUtil.getSessionStorage();\n    return storageUtil.testStorage(storage);\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.getPKCEStorage = function(options) {\n  options = options || {};\n  if (!options.preferLocalStorage && storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.PKCE_STORAGE_NAME);\n  } else if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.PKCE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage(options), constants.PKCE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getHttpCache = function(options) {\n  if (storageUtil.browserHasLocalStorage()) {\n    return storageBuilder(storageUtil.getLocalStorage(), constants.CACHE_STORAGE_NAME);\n  } else if (storageUtil.browserHasSessionStorage()) {\n    return storageBuilder(storageUtil.getSessionStorage(), constants.CACHE_STORAGE_NAME);\n  } else {\n    return storageBuilder(storageUtil.getCookieStorage(options), constants.CACHE_STORAGE_NAME);\n  }\n};\n\nstorageUtil.getLocalStorage = function() {\n  return localStorage;\n};\n\nstorageUtil.getSessionStorage = function() {\n  return sessionStorage;\n};\n\n// Provides webStorage-like interface for cookies\nstorageUtil.getCookieStorage = function(options) {\n  const secure = options.secure;\n  const sameSite = options.sameSite;\n  if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n    throw new AuthSdkError('getCookieStorage: \"secure\" and \"sameSite\" options must be provided');\n  }\n  return {\n    getItem: storageUtil.storage.get,\n    setItem: function(key, value) {\n      // Cookie shouldn't expire\n      storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n        secure: secure, \n        sameSite: sameSite\n      });\n    }\n  };\n};\n\n// Provides an in-memory solution\nstorageUtil.getInMemoryStorage = function() {\n  var store = {};\n  return {\n    getItem: function(key) {\n      return store[key];\n    },\n    setItem: function(key, value) {\n      store[key] = value;\n    }\n  };\n};\n\nstorageUtil.testStorage = function(storage) {\n  var key = 'okta-test-storage';\n  try {\n    storage.setItem(key, key);\n    storage.removeItem(key);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nstorageUtil.storage = {\n  set: function(name, value, expiresAt, options) {\n    const secure = options.secure;\n    const sameSite = options.sameSite;\n    if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n      throw new AuthSdkError('storage.set: \"secure\" and \"sameSite\" options must be provided');\n    }\n    var cookieOptions = {\n      path: options.path || '/',\n      secure,\n      sameSite\n    };\n\n    // eslint-disable-next-line no-extra-boolean-cast\n    if (!!(Date.parse(expiresAt))) {\n      // Expires value can be converted to a Date object.\n      //\n      // If the 'expiresAt' value is not provided, or the value cannot be\n      // parsed as a Date object, the cookie will set as a session cookie.\n      cookieOptions.expires = new Date(expiresAt);\n    }\n\n    Cookies.set(name, value, cookieOptions);\n    return storageUtil.storage.get(name);\n  },\n\n  get: function(name) {\n    return Cookies.get(name);\n  },\n\n  delete: function(name) {\n    return Cookies.remove(name, { path: '/' });\n  }\n};\n\nmodule.exports = storageUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/browser/browserStorage.js","module.exports = {\n  'STATE_TOKEN_KEY_NAME': 'oktaStateToken',\n  'DEFAULT_POLLING_DELAY': 500,\n  'DEFAULT_MAX_CLOCK_SKEW': 300,\n  'DEFAULT_CACHE_DURATION': 86400,\n  'REDIRECT_OAUTH_PARAMS_NAME': 'okta-oauth-redirect-params',\n  'REDIRECT_STATE_COOKIE_NAME': 'okta-oauth-state',\n  'REDIRECT_NONCE_COOKIE_NAME': 'okta-oauth-nonce',\n  'TOKEN_STORAGE_NAME': 'okta-token-storage',\n  'CACHE_STORAGE_NAME': 'okta-cache-storage',\n  'PKCE_STORAGE_NAME': 'okta-pkce-storage',\n  'ACCESS_TOKEN_STORAGE_KEY': 'accessToken',\n  'ID_TOKEN_STORAGE_KEY': 'idToken'\n};\n\n\n// WEBPACK FOOTER //\n// ./lib/constants.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity */\nvar util = require('./util');\nvar AuthApiError = require('./errors/AuthApiError');\nvar constants = require('./constants');\n\nfunction httpRequest(sdk, options) {\n  options = options || {};\n  var url = options.url,\n      method = options.method,\n      args = options.args,\n      saveAuthnState = options.saveAuthnState,\n      accessToken = options.accessToken,\n      withCredentials = options.withCredentials !== false, // default value is true\n      storageUtil = sdk.options.storageUtil,\n      storage = storageUtil.storage,\n      httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n\n  if (options.cacheResponse) {\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[url];\n    if (cachedResponse && Date.now()/1000 < cachedResponse.expiresAt) {\n      return Promise.resolve(cachedResponse.response);\n    }\n  }\n\n  var headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'X-Okta-User-Agent-Extended': sdk.userAgent\n  };\n  util.extend(headers, sdk.options.headers, options.headers);\n\n  if (accessToken && util.isString(accessToken)) {\n    headers['Authorization'] = 'Bearer ' + accessToken;\n  }\n\n  var ajaxOptions = {\n    headers: headers,\n    data: args || undefined,\n    withCredentials: withCredentials\n  };\n\n  var err, res;\n  return sdk.options.httpRequestClient(method, url, ajaxOptions)\n    .then(function(resp) {\n      res = resp.responseText;\n      if (res && util.isString(res)) {\n        res = JSON.parse(res);\n      }\n\n      if (saveAuthnState) {\n        if (!res.stateToken) {\n          storage.delete(constants.STATE_TOKEN_KEY_NAME);\n        }\n      }\n\n      if (res && res.stateToken && res.expiresAt) {\n        storage.set(constants.STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt, sdk.options.cookies);\n      }\n\n      if (res && options.cacheResponse) {\n        httpCache.updateStorage(url, {\n          expiresAt: Math.floor(Date.now()/1000) + constants.DEFAULT_CACHE_DURATION,\n          response: res\n        });\n      }\n\n      return res;\n    })\n    .catch(function(resp) {\n      var serverErr = resp.responseText || {};\n      if (util.isString(serverErr)) {\n        try {\n          serverErr = JSON.parse(serverErr);\n        } catch (e) {\n          serverErr = {\n            errorSummary: 'Unknown error'\n          };\n        }\n      }\n\n      if (resp.status >= 500) {\n        serverErr.errorSummary = 'Unknown error';\n      }\n\n      if (sdk.options.transformErrorXHR) {\n        resp = sdk.options.transformErrorXHR(util.clone(resp));\n      }\n\n      err = new AuthApiError(serverErr, resp);\n\n      if (err.errorCode === 'E0000011') {\n        storage.delete(constants.STATE_TOKEN_KEY_NAME);\n      }\n\n      throw err;\n    });\n}\n\nfunction get(sdk, url, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n  var getOptions = {\n    url: url,\n    method: 'GET'\n  };\n  util.extend(getOptions, options);\n  return httpRequest(sdk, getOptions);\n}\n\nfunction post(sdk, url, args, options) {\n  url = util.isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n  var postOptions = {\n    url: url,\n    method: 'POST',\n    args: args,\n    saveAuthnState: true\n  };\n  util.extend(postOptions, options);\n  return httpRequest(sdk, postOptions);\n}\n\nmodule.exports = {\n  get: get,\n  post: post,\n  httpRequest: httpRequest\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/http.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window, document */\n/* eslint-disable complexity, max-statements */\nvar http = require('./http');\nvar util = require('./util');\nvar storageUtil = require('./browser/browserStorage');\nvar AuthSdkError = require('./errors/AuthSdkError');\n\nfunction generateState() {\n  return util.genRandomString(64);\n}\n\nfunction generateNonce() {\n  return util.genRandomString(64);\n}\n\nfunction isToken(obj) {\n  if (obj &&\n      (obj.accessToken || obj.idToken) &&\n      Array.isArray(obj.scopes)) {\n    return true;\n  }\n  return false;\n}\n\nfunction addListener(eventTarget, name, fn) {\n  if (eventTarget.addEventListener) {\n    eventTarget.addEventListener(name, fn);\n  } else {\n    eventTarget.attachEvent('on' + name, fn);\n  }\n}\n\nfunction removeListener(eventTarget, name, fn) {\n  if (eventTarget.removeEventListener) {\n    eventTarget.removeEventListener(name, fn);\n  } else {\n    eventTarget.detachEvent('on' + name, fn);\n  }\n}\n\nfunction loadFrame(src) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.src = src;\n\n  return document.body.appendChild(iframe);\n}\n\nfunction loadPopup(src, options) {\n  var title = options.popupTitle || 'External Identity Provider User Authentication';\n  var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n    'top=100, left=500, width=600, height=600';\n\n  if (util.isIE11OrLess()) {\n    // IE<=11 doesn't fully support postMessage at time of writting.\n    // the following simple solution happened to solve the issue\n    // without adding another proxy layer which makes flow more complecated.\n    var winEl = window.open('/', title, appearance);\n    winEl.location.href = src;\n    return winEl;\n  } else {\n    return window.open(src, title, appearance);\n  }\n}\n\nfunction getWellKnown(sdk, issuer) {\n  var authServerUri = (issuer || sdk.options.issuer);\n  return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n    cacheResponse: true\n  });\n}\n\nfunction getKey(sdk, issuer, kid) {\n  var httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n\n  return getWellKnown(sdk, issuer)\n  .then(function(wellKnown) {\n    var jwksUri = wellKnown['jwks_uri'];\n\n    // Check our kid against the cached version (if it exists and isn't expired)\n    var cacheContents = httpCache.getStorage();\n    var cachedResponse = cacheContents[jwksUri];\n    if (cachedResponse && Date.now()/1000 < cachedResponse.expiresAt) {\n      var cachedKey = util.find(cachedResponse.response.keys, {\n        kid: kid\n      });\n\n      if (cachedKey) {\n        return cachedKey;\n      }\n    }\n\n    // Remove cache for the key\n    httpCache.clearStorage(jwksUri);\n\n    // Pull the latest keys if the key wasn't in the cache\n    return http.get(sdk, jwksUri, {\n      cacheResponse: true\n    })\n    .then(function(res) {\n      var key = util.find(res.keys, {\n        kid: kid\n      });\n\n      if (key) {\n        return key;\n      }\n\n      throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n    });\n  });\n}\n\nfunction validateClaims(sdk, claims, validationParams) {\n  var aud = validationParams.clientId;\n  var iss = validationParams.issuer;\n  var nonce = validationParams.nonce;\n\n  if (!claims || !iss || !aud) {\n    throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n  }\n\n  if (nonce && claims.nonce !== nonce) {\n    throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n  }\n\n  var now = Math.floor(Date.now()/1000);\n\n  if (claims.iss !== iss) {\n    throw new AuthSdkError('The issuer [' + claims.iss + '] ' +\n      'does not match [' + iss + ']');\n  }\n\n  if (claims.aud !== aud) {\n    throw new AuthSdkError('The audience [' + claims.aud + '] ' +\n      'does not match [' + aud + ']');\n  }\n\n  if (claims.iat > claims.exp) {\n    throw new AuthSdkError('The JWT expired before it was issued');\n  }\n\n  if ((now - sdk.options.maxClockSkew) > claims.exp) {\n    throw new AuthSdkError('The JWT expired and is no longer valid');\n  }\n\n  if (claims.iat > (now + sdk.options.maxClockSkew)) {\n    throw new AuthSdkError('The JWT was issued in the future');\n  }\n}\n\nfunction getOAuthUrls(sdk, options) {\n  if (arguments.length > 2) {\n    throw new AuthSdkError('As of version 3.0, \"getOAuthUrls\" takes only a single set of options');\n  }\n  options = options || {};\n\n  // Get user-supplied arguments\n  var authorizeUrl = util.removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n  var issuer = util.removeTrailingSlash(options.issuer) || sdk.options.issuer;\n  var userinfoUrl = util.removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n  var tokenUrl = util.removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n  var logoutUrl = util.removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n  var revokeUrl = util.removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n\n  var baseUrl = issuer.indexOf('/oauth2') > 0 ? issuer : issuer + '/oauth2';\n\n  authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n  userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n  tokenUrl = tokenUrl || baseUrl + '/v1/token';\n  revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n  logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n\n  return {\n    issuer: issuer,\n    authorizeUrl: authorizeUrl,\n    userinfoUrl: userinfoUrl,\n    tokenUrl: tokenUrl,\n    revokeUrl: revokeUrl,\n    logoutUrl: logoutUrl\n  };\n}\n\nfunction urlParamsToObject(hashOrSearch) {\n  // Predefine regexs for parsing hash\n  var plus2space = /\\+/g;\n  var paramSplit = /([^&=]+)=?([^&]*)/g;\n  var fragment = hashOrSearch;\n\n  // Some hash based routers will automatically add a / character after the hash\n  if (fragment.charAt(0) === '#' && fragment.charAt(1) === '/') {\n    fragment = fragment.substring(2);\n  }\n\n  // Remove the leading # or ?\n  if (fragment.charAt(0) === '#' || fragment.charAt(0) === '?') {\n    fragment = fragment.substring(1);\n  }\n\n\n  var obj = {};\n\n  // Loop until we have no more params\n  var param;\n  while (true) { // eslint-disable-line no-constant-condition\n    param = paramSplit.exec(fragment);\n    if (!param) { break; }\n\n    var key = param[1];\n    var value = param[2];\n\n    // id_token should remain base64url encoded\n    if (key === 'id_token' || key === 'access_token' || key === 'code') {\n      obj[key] = value;\n    } else {\n      obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n    }\n  }\n  return obj;\n}\n\nfunction hasTokensInHash(hash) {\n  return /((id|access)_token=)/i.test(hash);\n}\n\nfunction hasCodeInUrl(hashOrSearch) {\n  return /(code=)/i.test(hashOrSearch);\n}\n\nfunction isRedirectUri(uri, sdk) {\n  var authParams = sdk.options;\n  return uri && uri.indexOf(authParams.redirectUri) == 0;\n}\n\n/**\n * Check if tokens or a code have been passed back into the url, which happens in\n * the social auth IDP redirect flow.\n */\nfunction isLoginRedirect (sdk) {\n  var authParams = sdk.options;\n  if (authParams.pkce || authParams.responseType === 'code' || authParams.responseMode === 'query') {\n    // Look for code\n    var hasCode = authParams.responseMode === 'fragment' ?\n      hasCodeInUrl(window.location.hash) :\n      hasCodeInUrl(window.location.search);\n    return isRedirectUri(window.location.href, sdk) && hasCode;\n  }\n  // Look for tokens (Implicit OIDC flow)\n  return hasTokensInHash(window.location.hash);\n}\n\nmodule.exports = {\n  generateState: generateState,\n  generateNonce: generateNonce,\n  getWellKnown: getWellKnown,\n  getKey: getKey,\n  validateClaims: validateClaims,\n  getOAuthUrls: getOAuthUrls,\n  loadFrame: loadFrame,\n  loadPopup: loadPopup,\n  urlParamsToObject: urlParamsToObject,\n  isToken: isToken,\n  addListener: addListener,\n  removeListener: removeListener,\n  isLoginRedirect: isLoginRedirect\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/oauthUtil.js","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/@babel/runtime/helpers/typeof.js\n// module id = 6\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar AuthSdkError = require('./errors/AuthSdkError');\n\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n  if (typeof storageName !== 'string' || !storageName.length) {\n    throw new AuthSdkError('\"storageName\" is required');\n  }\n\n  function getStorage() {\n    var storageString = webstorage.getItem(storageName);\n    storageString = storageString || '{}';\n    try {\n      return JSON.parse(storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n    }\n  }\n\n  function setStorage(storage) {\n    try {\n      var storageString = JSON.stringify(storage);\n      webstorage.setItem(storageName, storageString);\n    } catch(e) {\n      throw new AuthSdkError('Unable to set storage: ' + storageName);\n    }\n  }\n\n  function clearStorage(key) {\n    if (!key) {\n      return setStorage({});\n    }\n    var storage = getStorage();\n    delete storage[key];\n    setStorage(storage);\n  }\n\n  function updateStorage(key, value) {\n    var storage = getStorage();\n    storage[key] = value;\n    setStorage(storage);\n  }\n\n  return {\n    getStorage: getStorage,\n    setStorage: setStorage,\n    clearStorage: clearStorage,\n    updateStorage: updateStorage\n  };\n}\n\nmodule.exports = storageBuilder;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/storageBuilder.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/@babel/runtime/regenerator/index.js\n// module id = 8\n// module chunks = 0","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/@babel/runtime/helpers/asyncToGenerator.js\n// module id = 9\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\n/* eslint-disable complexity, max-statements */\nvar http              = require('./http');\nvar util              = require('./util');\nvar AuthSdkError      = require('./errors/AuthSdkError');\nvar AuthPollStopError = require('./errors/AuthPollStopError');\nvar constants         = require('./constants');\n\nfunction addStateToken(res, options) {\n  var builtArgs = {};\n  util.extend(builtArgs, options);\n\n  // Add the stateToken if one isn't passed and we have one\n  if (!builtArgs.stateToken && res.stateToken) {\n    builtArgs.stateToken = res.stateToken;\n  }\n\n  return builtArgs;\n}\n\nfunction getStateToken(res) {\n  return addStateToken(res);\n}\n\nfunction transactionStatus(sdk, args) {\n  args = addStateToken(sdk, args);\n  return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args);\n}\n\nfunction resumeTransaction(sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to resume'));\n    }\n  }\n  return sdk.tx.status(args)\n    .then(function(res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction introspect (sdk, args) {\n  if (!args || !args.stateToken) {\n    var stateToken = sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n    if (stateToken) {\n      args = {\n        stateToken: stateToken\n      };\n    } else {\n      return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n    }\n  }\n  return transactionStep(sdk, args)\n    .then(function (res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction transactionStep(sdk, args) {\n  args = addStateToken(sdk, args);\n  // v1 pipeline introspect API\n  return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args);\n}\n\nfunction transactionExists(sdk) {\n  // We have a cookie state token\n  return !!sdk.tx.exists._get(constants.STATE_TOKEN_KEY_NAME);\n}\n\nfunction postToTransaction(sdk, url, args, options) {\n  return http.post(sdk, url, args, options)\n    .then(function(res) {\n      return new AuthTransaction(sdk, res);\n    });\n}\n\nfunction getPollFn(sdk, res, ref) {\n  return function (options) {\n    var delay;\n    var rememberDevice;\n    var autoPush;\n    var transactionCallBack;\n\n    if (util.isNumber(options)) {\n      delay = options;\n    } else if (util.isObject(options)) {\n      delay = options.delay;\n      rememberDevice = options.rememberDevice;\n      autoPush = options.autoPush;\n      transactionCallBack = options.transactionCallBack;\n    }\n\n    if (!delay && delay !== 0) {\n      delay = constants.DEFAULT_POLLING_DELAY;\n    }\n\n    // Get the poll function\n    var pollLink = util.getLink(res, 'next', 'poll');\n    function pollFn() {\n      var opts = {};\n      if (typeof autoPush === 'function') {\n        try {\n          opts.autoPush = !!autoPush();\n        }\n        catch (e) {\n          return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n        }\n      }\n      else if (autoPush !== undefined && autoPush !== null) {\n        opts.autoPush = !!autoPush;\n      }\n      if (typeof rememberDevice === 'function') {\n        try {\n          opts.rememberDevice = !!rememberDevice();\n        }\n        catch (e) {\n          return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n        }\n      }\n      else if (rememberDevice !== undefined && rememberDevice !== null) {\n        opts.rememberDevice = !!rememberDevice;\n      }\n\n      var href = pollLink.href + util.toQueryParams(opts);\n      return http.post(sdk, href, getStateToken(res), {\n        saveAuthnState: false  \n      });\n    }\n\n    ref.isPolling = true;\n\n    var retryCount = 0;\n    var recursivePoll = function () {\n      // If the poll was manually stopped during the delay\n      if (!ref.isPolling) {\n        return Promise.reject(new AuthPollStopError());\n      }\n      return pollFn()\n        .then(function (pollRes) {\n          // Reset our retry counter on success\n          retryCount = 0;\n\n          // If we're still waiting\n          if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n\n            // If the poll was manually stopped while the pollFn was called\n            if (!ref.isPolling) {\n              throw new AuthPollStopError();\n            }\n\n            if (typeof transactionCallBack === 'function') {\n              transactionCallBack(pollRes);\n            }\n\n            // Continue poll\n            return util.delay(delay).then(recursivePoll);\n\n          } else {\n            // Any non-waiting result, even if polling was stopped\n            // during a request, will return\n            ref.isPolling = false;\n            return new AuthTransaction(sdk, pollRes);\n          }\n        })\n        .catch(function(err) {\n          // Exponential backoff, up to 16 seconds\n          if (err.xhr &&\n              (err.xhr.status === 0 || err.xhr.status === 429) &&\n              retryCount <= 4) {\n            var delayLength = Math.pow(2, retryCount) * 1000;\n            retryCount++;\n            return util.delay(delayLength)\n              .then(recursivePoll);\n          }\n          throw err;\n        });\n    };\n    return recursivePoll()\n      .catch(function(err) {\n        ref.isPolling = false;\n        throw err;\n      });\n  };\n}\n\nfunction link2fn(sdk, res, obj, link, ref) {\n  if (Array.isArray(link)) {\n    return function(name, opts) {\n      if (!name) {\n        throw new AuthSdkError('Must provide a link name');\n      }\n\n      var lk = util.find(link, {name: name});\n      if (!lk) {\n        throw new AuthSdkError('No link found for that name');\n      }\n\n      return link2fn(sdk, res, obj, lk, ref)(opts);\n    };\n\n  } else if (link.hints &&\n      link.hints.allow &&\n      link.hints.allow.length === 1) {\n    var method = link.hints.allow[0];\n    switch (method) {\n\n      case 'GET':\n        return function() {\n          return http.get(sdk, link.href);\n        };\n\n      case 'POST':\n        return function(opts) {\n          if (ref && ref.isPolling) {\n            ref.isPolling = false;\n          }\n\n          var data = addStateToken(res, opts);\n\n          if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n            // Add factorType and provider\n            util.extend(data, {\n              factorType: obj.factorType,\n              provider: obj.provider\n            });\n          }\n\n          var params = {};\n          var autoPush = data.autoPush;\n          if (autoPush !== undefined) {\n            if (typeof autoPush === 'function') {\n              try {\n                params.autoPush = !!autoPush();\n              }\n              catch (e) {\n                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n              }\n            }\n            else if (autoPush !== null) {\n              params.autoPush = !!autoPush;\n            }\n            data = util.omit(data, 'autoPush');\n          }\n\n          var rememberDevice = data.rememberDevice;\n          if (rememberDevice !== undefined) {\n            if (typeof rememberDevice === 'function') {\n              try {\n                params.rememberDevice = !!rememberDevice();\n              }\n              catch (e) {\n                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n              }\n            }\n            else if (rememberDevice !== null) {\n              params.rememberDevice = !!rememberDevice;\n            }\n            data = util.omit(data, 'rememberDevice');\n\n          } else if (data.profile &&\n                    data.profile.updatePhone !== undefined) {\n            if (data.profile.updatePhone) {\n              params.updatePhone = true;\n            }\n            data.profile = util.omit(data.profile, 'updatePhone');\n          }\n          var href = link.href + util.toQueryParams(params);\n          return postToTransaction(sdk, href, data);\n        };\n    }\n  }\n}\n\nfunction links2fns(sdk, res, obj, ref) {\n  var fns = {};\n  for (var linkName in obj._links) {\n    if (!obj._links.hasOwnProperty(linkName)) {\n      continue;\n    }\n\n    var link = obj._links[linkName];\n    \n    if (linkName === 'next') {\n      linkName = link.name;\n    }\n\n    if (link.type) {\n      fns[linkName] = link;\n      continue;\n    }\n\n    switch (linkName) {\n      // poll is only found at the transaction\n      // level, so we don't need to pass the link\n      case 'poll':\n        fns.poll = getPollFn(sdk, res, ref);\n        break;\n\n      default:\n        var fn = link2fn(sdk, res, obj, link, ref);\n        if (fn) {\n          fns[linkName] = fn;\n        }\n    }\n  }\n  return fns;\n}\n\nfunction flattenEmbedded(sdk, res, obj, ref) {\n  obj = obj || res;\n  obj = util.clone(obj);\n\n  if (Array.isArray(obj)) {\n    var objArr = [];\n    for (var o = 0, ol = obj.length; o < ol; o++) {\n      objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n    }\n    return objArr;\n  }\n\n  var embedded = obj._embedded || {};\n\n  for (var key in embedded) {\n    if (!embedded.hasOwnProperty(key)) {\n      continue;\n    }\n\n    // Flatten any nested _embedded objects\n    if (util.isObject(embedded[key]) || Array.isArray(embedded[key])) {\n      embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n    }\n  }\n\n  // Convert any links on the embedded object\n  var fns = links2fns(sdk, res, obj, ref);\n  util.extend(embedded, fns);\n\n  obj = util.omit(obj, '_embedded', '_links');\n  util.extend(obj, embedded);\n  return obj;\n}\n\nfunction AuthTransaction(sdk, res) {\n  if (res) {\n    this.data = res;\n    util.extend(this, flattenEmbedded(sdk, res, res, {}));\n    delete this.stateToken;\n\n    // RECOVERY_CHALLENGE has some responses without _links.\n    // Without _links, we emulate cancel to make it intuitive\n    // to return to the starting state. We may remove this\n    // when OKTA-75434 is resolved\n    if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n      this.cancel = function() {\n        return Promise.resolve(new AuthTransaction(sdk));\n      };\n    }\n  }\n}\n\nmodule.exports = {\n  transactionStatus: transactionStatus,\n  resumeTransaction: resumeTransaction,\n  transactionExists: transactionExists,\n  postToTransaction: postToTransaction,\n  introspect: introspect,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/tx.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nvar fetchRequest = require('../fetch/fetchRequest');\nvar storageUtil = require('./browserStorage');\n\nmodule.exports = require('./browser')(storageUtil, fetchRequest);\n\n\n\n// WEBPACK FOOTER //\n// ./lib/browser/browserIndex.js","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar fetch = require('cross-fetch');\n\n\nfunction readData(response) {\n  if (response.headers.get('Content-Type') &&\n    response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n  return response.json()\n    // JSON parse can fail if response is not a valid object\n    .catch(e => {\n      return {\n        error: e,\n        errorSummary: 'Could not parse server response'\n      };\n    });\n  } else {\n    return response.text();\n  }\n}\n\nfunction formatResult(status, data) {\n  const isObject = typeof data === 'object'; \n  const result = {\n    responseText: isObject ? JSON.stringify(data) : data,\n    status: status\n  };\n  if (isObject) {\n    result.responseType = 'json';\n    result.responseJSON = data;\n  }\n  return result;\n}\n\n/* eslint-disable complexity */\nfunction fetchRequest(method, url, args) {\n  var body = args.data;\n  var headers = args.headers || {};\n  var contentType = (headers['Content-Type'] || headers['content-type'] || '');\n\n  // JSON encode body (if appropriate)\n  if (contentType === 'application/json' && body && typeof body !== 'string') {\n    body = JSON.stringify(body);\n  }\n\n  var fetchPromise = fetch(url, {\n    method: method,\n    headers: args.headers,\n    body: body,\n    credentials: args.withCredentials ? 'include' : 'omit'\n  })\n  .then(function(response) {\n    var error = !response.ok;\n    var status = response.status;\n    return readData(response)\n      .then(data => {\n        return formatResult(status, data);\n      })\n      .then(result => {\n        if (error) {\n          // Throwing result object since error handling is done in http.js\n          throw result;\n        }\n        return result;\n      });\n  });\n  return fetchPromise;\n}\n\nmodule.exports = fetchRequest;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/fetch/fetchRequest.js","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/cross-fetch/dist/browser-ponyfill.js\n// module id = 13\n// module chunks = 0","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/js-cookie/src/js.cookie.js\n// module id = 14\n// module chunks = 0","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-disable complexity */\n/* eslint-disable max-statements */\n/* SDK_VERSION is defined in webpack config */ \n/* global SDK_VERSION */\n/* global window, navigator, document, crypto */\nvar Emitter           = require('tiny-emitter');\nvar AuthSdkError      = require('../errors/AuthSdkError');\nvar builderUtil       = require('../builderUtil');\nvar constants         = require('../constants');\nvar cookies           = require('./browserStorage').storage;\nvar http              = require('../http');\nvar oauthUtil         = require('../oauthUtil');\nvar session           = require('../session');\nvar token             = require('../token');\nvar TokenManager      = require('../TokenManager');\nvar tx                = require('../tx');\nvar util              = require('../util');\nvar PromiseQueue       = require('../PromiseQueue');\n\nfunction getCookieSettings(sdk, args) {\n  // Secure cookies will be automatically used on a HTTPS connection\n  // Non-secure cookies will be automatically used on a HTTP connection\n  // secure option can override the automatic behavior\n  var cookieSettings = args.cookies || {};\n  if (typeof cookieSettings.secure === 'undefined') {\n    cookieSettings.secure = sdk.features.isHTTPS();\n  }\n  if (typeof cookieSettings.sameSite === 'undefined') {\n    cookieSettings.sameSite = cookieSettings.secure ? 'none' : 'lax';\n  }\n\n  // If secure=true, but the connection is not HTTPS, set secure=false.\n  if (cookieSettings.secure && !sdk.features.isHTTPS()) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'The current page is not being served with the HTTPS protocol.\\n' +\n      'For security reasons, we strongly recommend using HTTPS.\\n' +\n      'If you cannot use HTTPS, set \"cookies.secure\" option to false.'\n    );\n    cookieSettings.secure = false;\n  }\n\n  // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n  // If sameSite=none, but the connection is not HTTPS, set sameSite=lax.\n  if (cookieSettings.sameSite === 'none' && !cookieSettings.secure) {\n    cookieSettings.sameSite = 'lax';\n  }\n\n  return cookieSettings;\n}\n\nfunction OktaAuthBuilder(args) {\n  var sdk = this;\n\n  builderUtil.assertValidConfig(args);\n\n  this.options = {\n    clientId: args.clientId,\n    issuer: util.removeTrailingSlash(args.issuer),\n    authorizeUrl: util.removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: util.removeTrailingSlash(args.userinfoUrl),\n    tokenUrl: util.removeTrailingSlash(args.tokenUrl),\n    revokeUrl: util.removeTrailingSlash(args.revokeUrl),\n    logoutUrl: util.removeTrailingSlash(args.logoutUrl),\n    pkce: args.pkce === false ? false : true,\n    redirectUri: args.redirectUri,\n    postLogoutRedirectUri: args.postLogoutRedirectUri,\n    responseMode: args.responseMode,\n    httpRequestClient: args.httpRequestClient,\n    storageUtil: args.storageUtil,\n    transformErrorXHR: args.transformErrorXHR,\n    headers: args.headers,\n    onSessionExpired: args.onSessionExpired,\n    cookies: getCookieSettings(sdk, args)\n  };\n\n  this.userAgent = builderUtil.getUserAgent(args, `okta-auth-js/${SDK_VERSION}`);\n\n  // Digital clocks will drift over time, so the server\n  // can misalign with the time reported by the browser.\n  // The maxClockSkew allows relaxing the time-based\n  // validation of tokens (in seconds, not milliseconds).\n  // It currently defaults to 300, because 5 min is the\n  // default maximum tolerance allowed by Kerberos.\n  // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n  if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n    this.options.maxClockSkew = constants.DEFAULT_MAX_CLOCK_SKEW;\n  } else {\n    this.options.maxClockSkew = args.maxClockSkew;\n  }\n\n  // Give the developer the ability to disable token signature\n  // validation.\n  this.options.ignoreSignature = !!args.ignoreSignature;\n\n  sdk.session = {\n    close: util.bind(session.closeSession, null, sdk),\n    exists: util.bind(session.sessionExists, null, sdk),\n    get: util.bind(session.getSession, null, sdk),\n    refresh: util.bind(session.refreshSession, null, sdk),\n    setCookieAndRedirect: util.bind(session.setCookieAndRedirect, null, sdk)\n  };\n\n  sdk.tx = {\n    status: util.bind(tx.transactionStatus, null, sdk),\n    resume: util.bind(tx.resumeTransaction, null, sdk),\n    exists: util.bind(tx.transactionExists, null, sdk),\n    introspect: util.bind(tx.introspect, null, sdk)\n  };\n\n  // This is exposed so we can mock document.cookie in our tests\n  sdk.tx.exists._get = function(name) {\n    return cookies.get(name);\n  };\n\n  // This is exposed so we can mock window.location.href in our tests\n  sdk.idToken = {\n    authorize: {\n      _getLocationHref: function() {\n        return window.location.href;\n      }\n    }\n  };\n\n  sdk._tokenQueue = new PromiseQueue();\n  sdk.token = {\n    getWithoutPrompt: util.bind(token.getWithoutPrompt, null, sdk),\n    getWithPopup: util.bind(token.getWithPopup, null, sdk),\n    getWithRedirect: util.bind(token.getWithRedirect, null, sdk),\n    parseFromUrl: util.bind(token.parseFromUrl, null, sdk),\n    decode: token.decodeToken,\n    revoke: util.bind(token.revokeToken, null, sdk),\n    renew: util.bind(token.renewToken, null, sdk),\n    getUserInfo: util.bind(token.getUserInfo, null, sdk),\n    verify: util.bind(token.verifyToken, null, sdk),\n    isLoginRedirect: util.bind(oauthUtil.isLoginRedirect, null, sdk)\n  };\n  // Wrap all async token API methods using MethodQueue to avoid issues with concurrency\n  const syncMethods = ['decode', 'isLoginRedirect'];\n  Object.keys(sdk.token).forEach(key => {\n    if (syncMethods.indexOf(key) >= 0) { // sync methods should not be wrapped\n      return;\n    }\n    var method = sdk.token[key];\n    sdk.token[key] = util.bind(PromiseQueue.prototype.push, sdk._tokenQueue, method, null);\n  });\n  // This is exposed so we can set window.location in our tests\n  sdk.token.getWithRedirect._setLocation = function(url) {\n    window.location = url;\n  };\n\n  // This is exposed so we can mock getting window.history in our tests\n  sdk.token.parseFromUrl._getHistory = function() {\n    return window.history;\n  };\n\n  // This is exposed so we can mock getting window.location in our tests\n  sdk.token.parseFromUrl._getLocation = function() {\n    return window.location;\n  };\n\n  // This is exposed so we can mock getting window.document in our tests\n  sdk.token.parseFromUrl._getDocument = function() {\n    return window.document;\n  };\n\n  sdk.fingerprint._getUserAgent = function() {\n    return navigator.userAgent;\n  };\n\n  var isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\n  sdk.features.isFingerprintSupported = function() {\n    var agent = sdk.fingerprint._getUserAgent();\n    return agent && !isWindowsPhone.test(agent);\n  };\n\n  sdk.emitter = new Emitter();\n  sdk.tokenManager = new TokenManager(sdk, args.tokenManager);\n  sdk.tokenManager.on('error', this._onTokenManagerError, this);\n}\n\nvar proto = OktaAuthBuilder.prototype;\nproto._onTokenManagerError = function(error) {\n  var code = error.errorCode;\n  if (code === 'login_required' && error.accessToken) {\n    if (this.options.onSessionExpired) {\n      this.options.onSessionExpired();\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Session has expired or was closed outside the application.');\n    }\n  }\n};\n\nproto.features = {};\n\nproto.features.isPopupPostMessageSupported = function() {\n  var isIE8or9 = document.documentMode && document.documentMode < 10;\n  if (window.postMessage && !isIE8or9) {\n    return true;\n  }\n  return false;\n};\n\nproto.features.isTokenVerifySupported = function() {\n  return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n};\n\nproto.features.hasTextEncoder = function() {\n  return typeof TextEncoder !== 'undefined';\n};\n\nproto.features.isPKCESupported = function() {\n  return proto.features.isTokenVerifySupported() && proto.features.hasTextEncoder();\n};\n\nproto.features.isHTTPS = function() {\n  return window.location.protocol === 'https:';\n};\n\nproto.features.isLocalhost = function() {\n  return window.location.hostname === 'localhost';\n};\n// { username, password, (relayState), (context) }\nproto.signIn = function (opts) {\n  var sdk = this;\n  opts = util.clone(opts || {});\n  function postToTransaction(options) {\n    delete opts.sendFingerprint;\n    return tx.postToTransaction(sdk, '/api/v1/authn', opts, options);\n  }\n  if (!opts.sendFingerprint) {\n    return postToTransaction();\n  }\n  return sdk.fingerprint()\n  .then(function(fingerprint) {\n    return postToTransaction({\n      headers: {\n        'X-Device-Fingerprint': fingerprint\n      }\n    });\n  });\n};\n\n// Ends the current Okta SSO session without redirecting to Okta.\nproto.closeSession = function closeSession() {\n  var sdk = this;\n  \n  // Clear all local tokens\n  sdk.tokenManager.clear();\n\n  return sdk.session.close() // DELETE /api/v1/sessions/me\n  .catch(function(e) {\n    if (e.name === 'AuthApiError' && e.errorCode === 'E0000007') {\n      // Session does not exist or has already been closed\n      return;\n    }\n    throw e;\n  });\n};\n\n// Revokes the access token for the application session\nproto.revokeAccessToken = async function revokeAccessToken(accessToken) {\n  var sdk = this;\n  if (!accessToken) {\n    accessToken = await sdk.tokenManager.get(constants.ACCESS_TOKEN_STORAGE_KEY);\n    sdk.tokenManager.remove(constants.ACCESS_TOKEN_STORAGE_KEY);\n  }\n  // Access token may have been removed. In this case, we will silently succeed.\n  if (!accessToken) {\n    return Promise.resolve();\n  }\n  return sdk.token.revoke(accessToken);\n};\n\n// Revokes accessToken, clears all local tokens, then redirects to Okta to end the SSO session.\nproto.signOut = async function (options) {\n  options = util.extend({}, options);\n\n  // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n  var defaultUri = window.location.origin;\n  var currentUri = window.location.href;\n  var postLogoutRedirectUri = options.postLogoutRedirectUri\n    || this.options.postLogoutRedirectUri\n    || defaultUri;\n\n  var accessToken = options.accessToken;\n  var revokeAccessToken = options.revokeAccessToken !== false;\n  var idToken = options.idToken;\n\n  var sdk = this;\n  var logoutUrl = oauthUtil.getOAuthUrls(sdk).logoutUrl;\n\n  if (typeof idToken === 'undefined') {\n    idToken = await sdk.tokenManager.get(constants.ID_TOKEN_STORAGE_KEY);\n  }\n\n  if (revokeAccessToken && typeof accessToken === 'undefined') {\n    accessToken = await sdk.tokenManager.get(constants.ACCESS_TOKEN_STORAGE_KEY);\n  }\n\n  // Clear all local tokens\n  sdk.tokenManager.clear();\n\n  if (revokeAccessToken && accessToken) {\n    await sdk.revokeAccessToken(accessToken);\n  }\n\n  // No idToken? This can happen if the storage was cleared.\n  // Fallback to XHR signOut, then simulate a redirect to the post logout uri\n  if (!idToken) {\n    return sdk.closeSession() // can throw if the user cannot be signed out\n    .then(function() {\n      if (postLogoutRedirectUri === currentUri) {\n        window.location.reload(); // force a hard reload if URI is not changing\n      } else {\n        window.location.assign(postLogoutRedirectUri);\n      }\n    });\n  }\n\n  // logout redirect using the idToken.\n  var state = options.state;\n  var idTokenHint = idToken.idToken; // a string\n  var logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) +\n    '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri);\n\n  // State allows option parameters to be passed to logout redirect uri\n  if (state) {\n    logoutUri += '&state=' + encodeURIComponent(state);\n  }\n  \n  window.location.assign(logoutUri);\n};\n\nbuilderUtil.addSharedPrototypes(proto);\n\n// { resource, (rel), (requestContext)}\nproto.webfinger = function (opts) {\n  var url = '/.well-known/webfinger' + util.toQueryParams(opts);\n  var options = {\n    headers: {\n      'Accept': 'application/jrd+json'\n    }\n  };\n  return http.get(this, url, options);\n};\n\nproto.fingerprint = function(options) {\n  options = options || {};\n  var sdk = this;\n  if (!sdk.features.isFingerprintSupported()) {\n    return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n  }\n\n  var timeout;\n  var iframe;\n  var listener;\n  var promise = new Promise(function (resolve, reject) {\n    iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n\n    listener = function listener(e) {\n      if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n        return;\n      }\n\n      try {\n        var msg = JSON.parse(e.data);\n      } catch (err) {\n        // iframe messages should all be parsable\n        // skip not parsable messages come from other sources in same origin (browser extensions)\n        // TODO: add namespace flag in okta-core to distinguish messages that come from other sources\n        return;\n      }\n\n      if (!msg) { return; }\n      if (msg.type === 'FingerprintAvailable') {\n        return resolve(msg.fingerprint);\n      }\n      if (msg.type === 'FingerprintServiceReady') {\n        e.source.postMessage(JSON.stringify({\n          type: 'GetFingerprint'\n        }), e.origin);\n      }\n    };\n    oauthUtil.addListener(window, 'message', listener);\n\n    iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n    document.body.appendChild(iframe);\n\n    timeout = setTimeout(function() {\n      reject(new AuthSdkError('Fingerprinting timed out'));\n    }, options.timeout || 15000);\n  });\n\n  return promise.finally(function() {\n    clearTimeout(timeout);\n    oauthUtil.removeListener(window, 'message', listener);\n    if (document.body.contains(iframe)) {\n      iframe.parentElement.removeChild(iframe);\n    }\n  });\n};\n\nmodule.exports = builderUtil.buildOktaAuth(OktaAuthBuilder);\n\n\n\n// WEBPACK FOOTER //\n// ./lib/browser/browser.js","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/regenerator-runtime/runtime.js\n// module id = 16\n// module chunks = 0","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /root/okta/okta-auth-js/node_modules/tiny-emitter/index.js\n// module id = 17\n// module chunks = 0","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar AuthSdkError = require('./errors/AuthSdkError');\nvar tx = require('./tx');\nvar util = require('./util');\n\n// TODO: use @okta/configuration-validation (move module to this monorepo?)\n// eslint-disable-next-line complexity\nfunction assertValidConfig(args) {\n  if (!args) {\n    throw new AuthSdkError('No arguments passed to constructor. ' +\n      'Required usage: new OktaAuth(args)');\n  }\n\n  var issuer = args.issuer;\n  if (!issuer) {\n    throw new AuthSdkError('No issuer passed to constructor. ' + \n      'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n  }\n\n  var isUrlRegex = new RegExp('^http?s?://.+');\n  if (!isUrlRegex.test(args.issuer)) {\n    throw new AuthSdkError('Issuer must be a valid URL. ' + \n      'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n  }\n\n  if (issuer.indexOf('-admin.') !== -1) {\n    throw new AuthSdkError('Issuer URL passed to constructor contains \"-admin\" in subdomain. ' +\n      'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com})');\n  }\n\n  var userAgent = args.userAgent;\n  var userAgentTemplateWithNoPlaceholder = \n    userAgent && userAgent.template && userAgent.template.indexOf('$OKTA_AUTH_JS') === -1;\n  if (userAgentTemplateWithNoPlaceholder) {\n    throw new AuthSdkError('UserAgentTemplate must include \"$OKTA_AUTH_JS\" placeholder. ' + \n      'Required usage: new OktaAuth({userAgentTemplate: \"xxx $OKTA_AUTH_JS xxx\"})');\n  }\n}\n\nfunction addSharedPrototypes(proto) {\n  proto.getIssuerOrigin = function() {\n    // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n    return this.options.issuer.split('/oauth2/')[0];\n  };\n\n  // { username, (relayState) }\n  proto.forgotPassword = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n  };\n\n  // { username, (relayState) }\n  proto.unlockAccount = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n  };\n\n  // { recoveryToken }\n  proto.verifyRecoveryToken = function (opts) {\n    return tx.postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n  };\n}\n\nfunction buildOktaAuth(OktaAuthBuilder) {\n  return function(storageUtil, httpRequestClient) {\n    function OktaAuth(args) {\n      if (!(this instanceof OktaAuth)) {\n        return new OktaAuth(args);\n      }\n\n      if (args) {\n        args.storageUtil = storageUtil;\n\n        if (args.ajaxRequest) {\n          util.deprecate('ajaxRequest is being deprecated, use httpRequestClient attribute instead.');\n          args.httpRequestClient = args.ajaxRequest;\n        } else if (!args.httpRequestClient) {\n          args.httpRequestClient = httpRequestClient;\n        }\n      }\n\n      util.bind(OktaAuthBuilder, this)(args);\n    }\n    OktaAuth.prototype = OktaAuthBuilder.prototype;\n    OktaAuth.prototype.constructor = OktaAuth;\n\n    // Hoist feature detection functions to static type\n    OktaAuth.features = OktaAuthBuilder.prototype.features;\n\n    return OktaAuth;\n  };\n}\n\nfunction getUserAgent(args, sdkValue) {\n  var userAgent = args.userAgent || {};\n\n  if (userAgent.value) {\n    return userAgent.value;\n  }\n\n  if (userAgent.template) {\n    return userAgent.template.replace('$OKTA_AUTH_JS', sdkValue);\n  }\n\n  return sdkValue;\n}\n\nmodule.exports = {\n  addSharedPrototypes: addSharedPrototypes,\n  buildOktaAuth: buildOktaAuth,\n  assertValidConfig: assertValidConfig,\n  getUserAgent: getUserAgent\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/builderUtil.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthApiError(err, xhr) {\n  this.name = 'AuthApiError';\n  this.message = err.errorSummary;\n  this.errorSummary = err.errorSummary;\n  this.errorCode = err.errorCode;\n  this.errorLink = err.errorLink;\n  this.errorId = err.errorId;\n  this.errorCauses = err.errorCauses;\n\n  if (xhr) {\n    this.xhr = xhr;\n  }\n}\nAuthApiError.prototype = new Error();\n\nmodule.exports = AuthApiError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/AuthApiError.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction AuthPollStopError() {\n  this.name = 'AuthPollStopError';\n  this.message = 'The poll was stopped by the sdk';\n}\nAuthPollStopError.prototype = new Error();\n\nmodule.exports = AuthPollStopError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/AuthPollStopError.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window */\nvar util = require('./util');\nvar http = require('./http');\n\nfunction sessionExists(sdk) {\n  return sdk.session.get()\n    .then(function(res) {\n      if (res.status === 'ACTIVE') {\n        return true;\n      }\n      return false;\n    })\n    .catch(function() {\n      return false;\n    });\n}\n\nfunction getSession(sdk) { \n  return http.get(sdk, '/api/v1/sessions/me')\n  .then(function(session) {\n    var res = util.omit(session, '_links');\n\n    res.refresh = function() {\n      return http.post(sdk, util.getLink(session, 'refresh').href);\n    };\n\n    res.user = function() {\n      return http.get(sdk, util.getLink(session, 'user').href);\n    };\n\n    return res;\n  })\n  .catch(function() {\n    // Return INACTIVE status on failure\n    return {status: 'INACTIVE'};\n  });\n}\n\nfunction closeSession(sdk) {\n  return http.httpRequest(sdk, {\n    url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n    method: 'DELETE'\n  });\n}\n\nfunction refreshSession(sdk) {\n  return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\n\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n  redirectUrl = redirectUrl || window.location.href;\n  window.location = sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' +\n    util.toQueryParams({\n      checkAccountSetupComplete: true,\n      token: sessionToken,\n      redirectUrl: redirectUrl\n    });\n}\n\nmodule.exports = {\n  sessionExists: sessionExists,\n  getSession: getSession,\n  closeSession: closeSession,\n  refreshSession: refreshSession,\n  setCookieAndRedirect: setCookieAndRedirect\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/session.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window, document, btoa */\n/* eslint-disable complexity, max-statements */\nvar http          = require('./http');\nvar util          = require('./util');\nvar oauthUtil     = require('./oauthUtil');\nvar sdkCrypto     = require('./crypto');\nvar AuthSdkError  = require('./errors/AuthSdkError');\nvar OAuthError    = require('./errors/OAuthError');\nvar constants     = require('./constants');\nvar cookies       = require('./browser/browserStorage').storage;\nvar browserStorage = require('./browser/browserStorage');\nvar PKCE          = require('./pkce');\n\n// Only the access token can be revoked in SPA applications\nfunction revokeToken(sdk, token) {\n  return Promise.resolve()\n  .then(function() {\n    if (!token || !token.accessToken) {\n      throw new AuthSdkError('A valid access token object is required');\n    }\n    var clientId = sdk.options.clientId;\n    if (!clientId) {\n      throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n    }\n    var revokeUrl = oauthUtil.getOAuthUrls(sdk).revokeUrl;\n    var accessToken = token.accessToken;\n    var args = util.toQueryParams({\n      // eslint-disable-next-line camelcase\n      token_type_hint: 'access_token',\n      token: accessToken\n    }).slice(1);\n    var creds = btoa(clientId);\n    return http.post(sdk, revokeUrl, args, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': 'Basic ' + creds\n      }\n    });\n  });\n}\n\nfunction decodeToken(token) {\n  var jwt = token.split('.');\n  var decodedToken;\n\n  try {\n    decodedToken = {\n      header: JSON.parse(util.base64UrlToString(jwt[0])),\n      payload: JSON.parse(util.base64UrlToString(jwt[1])),\n      signature: jwt[2]\n    };\n  } catch(e) {\n    throw new AuthSdkError('Malformed token');\n  }\n\n  return decodedToken;\n}\n\n// Verify the id token\nfunction verifyToken(sdk, token, validationParams) {\n  return Promise.resolve()\n  .then(function() {\n    if (!token || !token.idToken) {\n      throw new AuthSdkError('Only idTokens may be verified');\n    }\n\n    var jwt = decodeToken(token.idToken);\n\n    var validationOptions = {\n      clientId: sdk.options.clientId,\n      issuer: sdk.options.issuer,\n      ignoreSignature: sdk.options.ignoreSignature\n    };\n\n    util.extend(validationOptions, validationParams);\n\n    // Standard claim validation\n    oauthUtil.validateClaims(sdk, jwt.payload, validationOptions);\n\n    // If the browser doesn't support native crypto or we choose not\n    // to verify the signature, bail early\n    if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n      return token;\n    }\n\n    return oauthUtil.getKey(sdk, token.issuer, jwt.header.kid)\n    .then(function(key) {\n      return sdkCrypto.verifyToken(token.idToken, key);\n    })\n    .then(function(valid) {\n      if (!valid) {\n        throw new AuthSdkError('The token signature is not valid');\n      }\n      if (validationParams && validationParams.accessToken && token.claims.at_hash) {\n        return sdkCrypto.getOidcHash(validationParams.accessToken)\n          .then(hash => {\n            if (hash !== token.claims.at_hash) {\n              throw new AuthSdkError('Token hash verification failed');\n            }\n          });\n      }\n    })\n    .then(() => {\n      return token;\n    });\n  });\n}\n\nfunction addPostMessageListener(sdk, timeout, state) {\n  var responseHandler;\n  var timeoutId;\n  var msgReceivedOrTimeout = new Promise(function(resolve, reject) {\n\n    responseHandler = function responseHandler(e) {\n      if (!e.data || e.data.state !== state) {\n        // A message not meant for us\n        return;\n      }\n\n      // Configuration mismatch between saved token and current app instance\n      // This may happen if apps with different issuers are running on the same host url\n      // If they share the same storage key, they may read and write tokens in the same location.\n      // Common when developing against http://localhost\n      if (e.origin !== sdk.getIssuerOrigin()) {\n        return reject(new AuthSdkError('The request does not match client configuration'));\n      }\n      resolve(e.data);\n    };\n\n    oauthUtil.addListener(window, 'message', responseHandler);\n\n    timeoutId = setTimeout(function() {\n      reject(new AuthSdkError('OAuth flow timed out'));\n    }, timeout || 120000);\n  });\n\n  return msgReceivedOrTimeout\n    .finally(function() {\n      clearTimeout(timeoutId);\n      oauthUtil.removeListener(window, 'message', responseHandler);\n    });\n}\n\nfunction exchangeCodeForToken(sdk, oauthParams, authorizationCode, urls) {\n  // PKCE authorization_code flow\n  // Retrieve saved values and build oauthParams for call to /token\n  var meta = PKCE.loadMeta(sdk);\n  var getTokenParams = {\n    clientId: oauthParams.clientId,\n    authorizationCode: authorizationCode,\n    codeVerifier: meta.codeVerifier,\n    redirectUri: meta.redirectUri\n  };\n  return PKCE.getToken(sdk, getTokenParams, urls)\n  .then(function(res) {\n    validateResponse(res, getTokenParams);\n    return res;\n  })\n  .finally(function() {\n    PKCE.clearMeta(sdk);\n  });\n}\n\nfunction validateResponse(res, oauthParams) {\n  if (res['error'] || res['error_description']) {\n    throw new OAuthError(res['error'], res['error_description']);\n  }\n\n  if (res.state !== oauthParams.state) {\n    throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n  }\n}\n\nfunction handleOAuthResponse(sdk, oauthParams, res, urls) {\n  urls = urls || {};\n\n  var responseType = oauthParams.responseType;\n  if (!Array.isArray(responseType)) {\n    responseType = [responseType];\n  }\n\n  var scopes = util.clone(oauthParams.scopes);\n  var clientId = oauthParams.clientId || sdk.options.clientId;\n  var pkce = sdk.options.pkce !== false;\n\n  return Promise.resolve()\n  .then(function() {\n    validateResponse(res, oauthParams);\n\n    // PKCE flow\n    // We do not support \"hybrid\" scenarios where the response includes both a code and a token.\n    // If the response contains a code it is used immediately to obtain new tokens.\n    if (res.code && pkce) {\n      // responseType is not sent to the token endpoint.\n      // We populate this array to validate the response below\n      responseType = ['token']; // an accessToken will always be returned\n      if (scopes.indexOf('openid') !== -1) {\n        responseType.push('id_token'); // an idToken will be returned if \"openid\" is in the scopes\n      }\n      return exchangeCodeForToken(sdk, oauthParams, res.code, urls);\n    }\n    return res;\n  }).then(function(res) {\n    var tokenDict = {};\n    var expiresIn = res.expires_in;\n    var tokenType = res.token_type;\n    var accessToken = res.access_token;\n    var idToken = res.id_token;\n    \n    if (accessToken) {\n      tokenDict.accessToken = {\n        value: accessToken,\n        accessToken: accessToken,\n        expiresAt: Number(expiresIn) + Math.floor(Date.now()/1000),\n        tokenType: tokenType,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        userinfoUrl: urls.userinfoUrl\n      };\n    }\n\n    if (idToken) {\n      var jwt = sdk.token.decode(idToken);\n\n      var idTokenObj = {\n        value: idToken,\n        idToken: idToken,\n        claims: jwt.payload,\n        expiresAt: jwt.payload.exp,\n        scopes: scopes,\n        authorizeUrl: urls.authorizeUrl,\n        issuer: urls.issuer,\n        clientId: clientId\n      };\n\n      var validationParams = {\n        clientId: clientId,\n        issuer: urls.issuer,\n        nonce: oauthParams.nonce,\n        accessToken: accessToken\n      };\n\n      if (oauthParams.ignoreSignature !== undefined) {\n        validationParams.ignoreSignature = oauthParams.ignoreSignature;\n      }\n\n      return verifyToken(sdk, idTokenObj, validationParams)\n      .then(function() {\n        tokenDict.idToken = idTokenObj;\n        return tokenDict;\n      });\n    }\n\n    return tokenDict;\n  })\n  .then(function(tokenDict) {\n    // Validate received tokens against requested response types \n    if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n      // eslint-disable-next-line max-len\n      throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n    }\n    if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n      // eslint-disable-next-line max-len\n      throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n    }\n\n    return {\n      tokens: tokenDict,\n      state: res.state,\n      code: res.code\n    };\n  });\n}\n\nfunction getDefaultOAuthParams(sdk) {\n  return {\n    pkce: sdk.options.pkce,\n    clientId: sdk.options.clientId,\n    redirectUri: sdk.options.redirectUri || window.location.href,\n    responseType: ['token', 'id_token'],\n    responseMode: sdk.options.responseMode,\n    state: oauthUtil.generateState(),\n    nonce: oauthUtil.generateNonce(),\n    scopes: ['openid', 'email'],\n    ignoreSignature: sdk.options.ignoreSignature\n  };\n}\n\nfunction convertOAuthParamsToQueryParams(oauthParams) {\n  // Quick validation\n  if (!oauthParams.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (util.isString(oauthParams.responseType) && oauthParams.responseType.indexOf(' ') !== -1) {\n    throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n  }\n\n  // Convert our params to their actual OAuth equivalents\n  var oauthQueryParams = util.removeNils({\n    'client_id': oauthParams.clientId,\n    'code_challenge': oauthParams.codeChallenge,\n    'code_challenge_method': oauthParams.codeChallengeMethod,\n    'display': oauthParams.display,\n    'idp': oauthParams.idp,\n    'idp_scope': oauthParams.idpScope,\n    'login_hint': oauthParams.loginHint,\n    'max_age': oauthParams.maxAge,\n    'nonce': oauthParams.nonce,\n    'prompt': oauthParams.prompt,\n    'redirect_uri': oauthParams.redirectUri,\n    'response_mode': oauthParams.responseMode,\n    'response_type': oauthParams.responseType,\n    'sessionToken': oauthParams.sessionToken,\n    'state': oauthParams.state,\n  });\n\n  ['idp_scope', 'response_type'].forEach( function( mayBeArray ) { \n    if (Array.isArray(oauthQueryParams[mayBeArray])) {\n      oauthQueryParams[mayBeArray] = oauthQueryParams[mayBeArray].join(' ');\n    }\n  });\n\n  if (oauthParams.responseType.indexOf('id_token') !== -1 &&\n      oauthParams.scopes.indexOf('openid') === -1) {\n    throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n  } else {\n    oauthQueryParams.scope = oauthParams.scopes.join(' ');\n  }\n\n  return oauthQueryParams;\n}\n\nfunction buildAuthorizeParams(oauthParams) {\n  var oauthQueryParams = convertOAuthParamsToQueryParams(oauthParams);\n  return util.toQueryParams(oauthQueryParams);\n}\n\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\nfunction getToken(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getToken\" takes only a single set of options'));\n  }\n  \n  options = options || {};\n\n  return prepareOauthParams(sdk, options)\n  .then(function(oauthParams) {\n\n    // Start overriding any options that don't make sense\n    var sessionTokenOverrides = {\n      prompt: 'none',\n      responseMode: 'okta_post_message',\n      display: null\n    };\n\n    var idpOverrides = {\n      display: 'popup'\n    };\n\n    if (options.sessionToken) {\n      util.extend(oauthParams, sessionTokenOverrides);\n    } else if (options.idp) {\n      util.extend(oauthParams, idpOverrides);\n    }\n\n    // Use the query params to build the authorize url\n    var requestUrl,\n        endpoint,\n        urls;\n\n    // Get authorizeUrl and issuer\n    urls = oauthUtil.getOAuthUrls(sdk, oauthParams);\n    endpoint = options.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n    requestUrl = endpoint + buildAuthorizeParams(oauthParams);\n\n    // Determine the flow type\n    var flowType;\n    if (oauthParams.sessionToken || oauthParams.display === null) {\n      flowType = 'IFRAME';\n    } else if (oauthParams.display === 'popup') {\n      flowType = 'POPUP';\n    } else {\n      flowType = 'IMPLICIT';\n    }\n\n    // Execute the flow type\n    switch (flowType) {\n      case 'IFRAME':\n        var iframePromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        var iframeEl = oauthUtil.loadFrame(requestUrl);\n        return iframePromise\n          .then(function(res) {\n            return handleOAuthResponse(sdk, oauthParams, res, urls);\n          })\n          .finally(function() {\n            if (document.body.contains(iframeEl)) {\n              iframeEl.parentElement.removeChild(iframeEl);\n            }\n          });\n\n      case 'POPUP':\n        var oauthPromise; // resolves with OAuth response\n\n        // Add listener on postMessage before window creation, so\n        // postMessage isn't triggered before we're listening\n        if (oauthParams.responseMode === 'okta_post_message') {\n          if (!sdk.features.isPopupPostMessageSupported()) {\n            throw new AuthSdkError('This browser doesn\\'t have full postMessage support');\n          }\n          oauthPromise = addPostMessageListener(sdk, options.timeout, oauthParams.state);\n        }\n\n        // Create the window\n        var windowOptions = {\n          popupTitle: options.popupTitle\n        };\n        var windowEl = oauthUtil.loadPopup(requestUrl, windowOptions);\n\n        // The popup may be closed without receiving an OAuth response. Setup a poller to monitor the window.\n        var popupPromise = new Promise(function(resolve, reject) {\n          var closePoller = setInterval(function() {\n            if (!windowEl || windowEl.closed) {\n              clearInterval(closePoller);\n              reject(new AuthSdkError('Unable to parse OAuth flow response'));\n            }\n          }, 100);\n\n          // Proxy the OAuth promise results\n          oauthPromise\n          .then(function(res) {\n            clearInterval(closePoller);\n            resolve(res);\n          })\n          .catch(function(err) {\n            clearInterval(closePoller);\n            reject(err);\n          });\n        });\n\n        return popupPromise\n          .then(function(res) {\n            return handleOAuthResponse(sdk, oauthParams, res, urls);\n          })\n          .finally(function() {\n            if (windowEl && !windowEl.closed) {\n              windowEl.close();\n            }\n          });\n\n      default:\n        throw new AuthSdkError('The full page redirect flow is not supported');\n    }\n  })\n  .catch(e => {\n    if (sdk.options.pkce) {\n      PKCE.clearMeta(sdk);\n    }\n    throw e;\n  });\n}\n\nfunction getWithoutPrompt(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithoutPrompt\" takes only a single set of options'));\n  }\n  options = util.clone(options) || {};\n  util.extend(options, {\n    prompt: 'none',\n    responseMode: 'okta_post_message',\n    display: null\n  });\n  return getToken(sdk, options);\n}\n\nfunction getWithPopup(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithPopup\" takes only a single set of options'));\n  }\n  options = util.clone(options) || {};\n  util.extend(options, {\n    display: 'popup',\n    responseMode: 'okta_post_message'\n  });\n  return getToken(sdk, options);\n}\n\nfunction prepareOauthParams(sdk, options) {\n  if (oauthUtil.isLoginRedirect(sdk)) {\n    return Promise.reject(new AuthSdkError(\n      'The app should not attempt to call getToken on callback. ' +\n      'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'\n    ));\n  }\n\n  // clone and prepare options\n  options = util.clone(options) || {};\n\n  // build params using defaults + options\n  var oauthParams = getDefaultOAuthParams(sdk);\n  util.extend(oauthParams, options);\n\n  if (oauthParams.pkce === false) {\n    return Promise.resolve(oauthParams);\n  }\n\n  // PKCE flow\n  if (!sdk.features.isPKCESupported()) {\n    var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n    if (!sdk.features.isHTTPS()) {\n      // eslint-disable-next-line max-len\n      errorMessage += '\\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol.';\n    }\n    if (!sdk.features.hasTextEncoder()) {\n      // eslint-disable-next-line max-len\n      errorMessage += '\\n\"TextEncoder\" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.';\n    }\n    return Promise.reject(new AuthSdkError(errorMessage));\n  }\n\n  // set default code challenge method, if none provided\n  if (!oauthParams.codeChallengeMethod) {\n    oauthParams.codeChallengeMethod = PKCE.DEFAULT_CODE_CHALLENGE_METHOD;\n  }\n\n  // responseType is forced\n  oauthParams.responseType = 'code';\n\n  return oauthUtil.getWellKnown(sdk, null)\n    .then(function(res) {\n      var methods = res['code_challenge_methods_supported'] || [];\n      if (methods.indexOf(oauthParams.codeChallengeMethod) === -1) {\n        throw new AuthSdkError('Invalid code_challenge_method');\n      }\n    })\n    .then(function() {\n      // PKCE authorization_code flow\n      var codeVerifier = PKCE.generateVerifier(oauthParams.codeVerifier);\n\n      // We will need these values after redirect when we call /token\n      var meta = {\n        codeVerifier: codeVerifier,\n        redirectUri: oauthParams.redirectUri\n      };\n      PKCE.saveMeta(sdk, meta);\n\n      return PKCE.computeChallenge(codeVerifier);\n    })\n    .then(function(codeChallenge) {\n\n      // Clone/copy the params. Set codeChallenge\n      var clonedParams = util.clone(oauthParams) || {};\n      util.extend(clonedParams, oauthParams, {\n        codeChallenge: codeChallenge,\n      });\n      return clonedParams;\n    });\n}\n\nfunction _addOAuthParamsToStorage(sdk, tokenParams, urls) {\n  const { responseType, state, nonce, scopes, clientId, ignoreSignature } = tokenParams;\n  const tokenParamsStr = JSON.stringify({\n    responseType,\n    state,\n    nonce,\n    scopes,\n    clientId,\n    urls,\n    ignoreSignature\n  });\n  // Add oauth_params to both cookies and sessionStorage for broader support\n  cookies.set(constants.REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr, null, sdk.options.cookies);\n  if (browserStorage.browserHasSessionStorage()) {\n    browserStorage.getSessionStorage().setItem(constants.REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr);\n  }\n}\n\nfunction getWithRedirect(sdk, options) {\n  if (arguments.length > 2) {\n    return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithRedirect\" takes only a single set of options'));\n  }\n  options = util.clone(options) || {};\n\n  return prepareOauthParams(sdk, options)\n    .then(function(oauthParams) {\n      var urls = oauthUtil.getOAuthUrls(sdk, options);\n      var requestUrl = urls.authorizeUrl + buildAuthorizeParams(oauthParams);\n\n      _addOAuthParamsToStorage(sdk, oauthParams, urls);\n\n      // Set nonce cookie for servers to validate nonce in id_token\n      cookies.set(constants.REDIRECT_NONCE_COOKIE_NAME, oauthParams.nonce, null, sdk.options.cookies);\n\n      // Set state cookie for servers to validate state\n      cookies.set(constants.REDIRECT_STATE_COOKIE_NAME, oauthParams.state, null, sdk.options.cookies);\n\n      sdk.token.getWithRedirect._setLocation(requestUrl);\n    });\n}\n\nfunction renewToken(sdk, token) {\n  if (!oauthUtil.isToken(token)) {\n    return Promise.reject(new AuthSdkError('Renew must be passed a token with ' +\n      'an array of scopes and an accessToken or idToken'));\n  }\n\n  var responseType;\n  if (sdk.options.pkce) {\n    responseType = 'code';\n  } else if (token.accessToken) {\n    responseType = 'token';\n  } else {\n    responseType = 'id_token';\n  }\n\n  return getWithoutPrompt(sdk, {\n    responseType: responseType,\n    scopes: token.scopes,\n    authorizeUrl: token.authorizeUrl,\n    userinfoUrl: token.userinfoUrl,\n    issuer: token.issuer\n  })\n  .then(function(res) {\n    // Multiple tokens may have come back. Return only the token which was requested.\n    var tokens = res.tokens;\n    return token.idToken ? tokens.idToken : tokens.accessToken;\n  });\n}\n\nfunction removeHash(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n  } else {\n    nativeLoc.hash = '';\n  }\n}\n\nfunction removeSearch(sdk) {\n  var nativeHistory = sdk.token.parseFromUrl._getHistory();\n  var nativeDoc = sdk.token.parseFromUrl._getDocument();\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  if (nativeHistory && nativeHistory.replaceState) {\n    nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n  } else {\n    nativeLoc.search = '';\n  }\n}\n\nfunction _getOAuthParamsStrFromStorage() {\n  // try to read OAuth params from cookie first. This is for backward compatibility\n  let oauthParamsStr = cookies.get(constants.REDIRECT_OAUTH_PARAMS_NAME);\n  cookies.delete(constants.REDIRECT_OAUTH_PARAMS_NAME);\n\n  // latest version of auth-js will store params in session storage\n  if (!oauthParamsStr && browserStorage.browserHasSessionStorage()) {\n    const storage = browserStorage.getSessionStorage();\n    oauthParamsStr = storage.getItem(constants.REDIRECT_OAUTH_PARAMS_NAME);\n    storage.removeItem(constants.REDIRECT_OAUTH_PARAMS_NAME);\n  }\n\n  return oauthParamsStr;\n}\n\nfunction parseFromUrl(sdk, options) {\n  options = options || {};\n  if (util.isString(options)) {\n    options = { url: options };\n  }\n\n  // https://openid.net/specs/openid-connect-core-1_0.html#Authentication\n  var defaultResponseMode = sdk.options.pkce ? 'query' : 'fragment';\n\n  var url = options.url;\n  var responseMode = options.responseMode || sdk.options.responseMode || defaultResponseMode;\n  var nativeLoc = sdk.token.parseFromUrl._getLocation();\n  var paramStr;\n\n  if (responseMode === 'query') {\n    paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n  } else {\n    paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n  }\n\n  if (!paramStr) {\n    return Promise.reject(new AuthSdkError('Unable to parse a token from the url'));\n  }\n\n  const oauthParamsStr = _getOAuthParamsStrFromStorage();  \n  if (!oauthParamsStr) {\n    return Promise.reject(new AuthSdkError('Unable to retrieve OAuth redirect params from storage'));\n  }\n\n  try {\n    var oauthParams = JSON.parse(oauthParamsStr);\n    var urls = oauthParams.urls;\n    delete oauthParams.urls;\n  } catch(e) {\n    return Promise.reject(new AuthSdkError('Unable to parse the ' +\n    constants.REDIRECT_OAUTH_PARAMS_NAME + ' value from storage: ' + e.message));\n  }\n\n  return Promise.resolve(oauthUtil.urlParamsToObject(paramStr))\n    .then(function(res) {\n      if (!url) {\n        // Clean hash or search from the url\n        responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n      }\n      return handleOAuthResponse(sdk, oauthParams, res, urls);\n    });\n}\n\nasync function getUserInfo(sdk, accessTokenObject, idTokenObject) {\n  // If token objects were not passed, attempt to read from the TokenManager\n  if (!accessTokenObject) {\n    accessTokenObject = await sdk.tokenManager.get(constants.ACCESS_TOKEN_STORAGE_KEY);\n  }\n  if (!idTokenObject) {\n    idTokenObject = await sdk.tokenManager.get(constants.ID_TOKEN_STORAGE_KEY);\n  }\n\n  if (!accessTokenObject ||\n      (!oauthUtil.isToken(accessTokenObject) && !accessTokenObject.accessToken && !accessTokenObject.userinfoUrl)) {\n    return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n  }\n\n  if (!idTokenObject ||\n    (!oauthUtil.isToken(idTokenObject) && !idTokenObject.idToken)) {\n    return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n  }\n\n  return http.httpRequest(sdk, {\n    url: accessTokenObject.userinfoUrl,\n    method: 'GET',\n    accessToken: accessTokenObject.accessToken\n  })\n  .then(userInfo => {\n    // Only return the userinfo response if subjects match to mitigate token substitution attacks\n    if (userInfo.sub === idTokenObject.claims.sub) {\n      return userInfo;\n    }\n    return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n  })\n  .catch(function(err) {\n    if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n      var authenticateHeader;\n      if (err.xhr.headers && util.isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n        authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n      } else if (util.isFunction(err.xhr.getResponseHeader)) {\n        authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n      }\n      if (authenticateHeader) {\n        var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n        var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n        var error = errorMatches[1];\n        var errorDescription = errorDescriptionMatches[1];\n        if (error && errorDescription) {\n          err = new OAuthError(error, errorDescription);\n        }\n      }\n    }\n    throw err;\n  });\n}\n\nmodule.exports = {\n  revokeToken: revokeToken,\n  getToken: getToken,\n  getWithoutPrompt: getWithoutPrompt,\n  getWithPopup: getWithPopup,\n  getWithRedirect: getWithRedirect,\n  parseFromUrl: parseFromUrl,\n  decodeToken: decodeToken,\n  renewToken: renewToken,\n  getUserInfo: getUserInfo,\n  verifyToken: verifyToken,\n  handleOAuthResponse: handleOAuthResponse,\n  prepareOauthParams: prepareOauthParams,\n  _addOAuthParamsToStorage, // export for testing purpose\n  _getOAuthParamsStrFromStorage // export for testing purpose\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/token.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global crypto, Uint8Array, TextEncoder */\nvar util = require('./util');\n\nfunction getOidcHash(str) {  \n  var buffer = new TextEncoder().encode(str);\n  return crypto.subtle.digest('SHA-256', buffer).then(function(arrayBuffer) {\n    var intBuffer = new Uint8Array(arrayBuffer);\n    var firstHalf = intBuffer.slice(0, 16);\n    var hash = String.fromCharCode.apply(null, firstHalf);\n    var b64u = util.stringToBase64Url(hash); // url-safe base64 variant\n    return b64u;\n  });\n}\n\nfunction verifyToken(idToken, key) {\n  key = util.clone(key);\n\n  var format = 'jwk';\n  var algo = {\n    name: 'RSASSA-PKCS1-v1_5',\n    hash: { name: 'SHA-256' }\n  };\n  var extractable = true;\n  var usages = ['verify'];\n\n  // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n  // This is a metadata tag that specifies the intent of how the key should be used.\n  // It's not necessary to properly verify the jwt's signature.\n  delete key.use;\n\n  return crypto.subtle.importKey(\n    format,\n    key,\n    algo,\n    extractable,\n    usages\n  )\n  .then(function(cryptoKey) {\n    var jwt = idToken.split('.');\n    var payload = util.stringToBuffer(jwt[0] + '.' + jwt[1]);\n    var b64Signature = util.base64UrlDecode(jwt[2]);\n    var signature = util.stringToBuffer(b64Signature);\n\n    return crypto.subtle.verify(\n      algo,\n      cryptoKey,\n      signature,\n      payload\n    );\n  });\n}\n\nmodule.exports = {\n  getOidcHash: getOidcHash,\n  verifyToken: verifyToken\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/crypto.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction OAuthError(errorCode, summary) {\n  this.name = 'OAuthError';\n  this.message = summary;\n\n  this.errorCode = errorCode;\n  this.errorSummary = summary;\n}\nOAuthError.prototype = new Error();\n\nmodule.exports = OAuthError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/OAuthError.js","/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global crypto */\n /* eslint-disable complexity, max-statements */\nvar AuthSdkError  = require('./errors/AuthSdkError');\nvar http          = require('./http');\nvar util          = require('./util');\n\n// Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\nvar MIN_VERIFIER_LENGTH = 43;\nvar MAX_VERIFIER_LENGTH = 128;\nvar DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\n\nfunction dec2hex (dec) {\n  return ('0' + dec.toString(16)).substr(-2);\n}\n\nfunction getRandomString(length) {\n  var a = new Uint8Array(Math.ceil(length / 2));\n  crypto.getRandomValues(a);\n  var str = Array.from(a, dec2hex).join('');\n  return str.slice(0, length);\n}\n\nfunction generateVerifier(prefix) {\n  var verifier = prefix || '';\n  if (verifier.length < MIN_VERIFIER_LENGTH) {\n    verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n  }\n  return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\n\nfunction getStorage(sdk, options) {\n  options = util.extend({}, sdk.options.cookies, options);\n  return sdk.options.storageUtil.getPKCEStorage(options);\n}\n\nfunction saveMeta(sdk, meta) {\n  // There must be only one PKCE flow executing at a time.\n  // Before saving meta, check to see if a codeVerfier is already stored.\n  var storage = getStorage(sdk, { preferLocalStorage: true });\n  var obj = storage.getStorage();\n  if (obj.codeVerifier) {\n    // eslint-disable-next-line max-len\n    util.warn('saveMeta: PKCE codeVerifier exists in localStorage. This may indicate an auth flow is already in progress.');\n  }\n\n  storage = getStorage(sdk);\n  obj = storage.getStorage();\n  if (obj.codeVerifier) {\n    // eslint-disable-next-line max-len\n    util.warn('saveMeta: PKCE codeVerifier exists in sessionStorage. This may indicate an auth flow is already in progress.');\n  }\n\n  // clear all PKCE meta storage before saving.\n  clearMeta(sdk);\n\n  storage.setStorage(meta);\n}\n\nfunction loadMeta(sdk) {\n  // Try reading from localStorage first.\n  // This is for compatibility with older versions of the signin widget. OKTA-304806\n  var storage = getStorage(sdk, { preferLocalStorage: true });\n  var obj = storage.getStorage();\n  // Verify the Meta\n  if (!obj.codeVerifier) {\n    // If meta is not valid, read from sessionStorage. This is expected for current versions of the SDK.\n    storage = getStorage(sdk, { preferLocalStorage: false });\n    obj = storage.getStorage();\n    if (!obj.codeVerifier) {\n      // If meta is not valid, throw an exception to avoid misleading server-side error\n      // The most likely cause of this error is trying to handle a callback twice\n      // eslint-disable-next-line max-len\n      throw new AuthSdkError('Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.', null);\n    }\n  }\n  return obj;\n}\n\nfunction clearMeta(sdk) {\n  // clear sessionStorage (current version)\n  var storage = getStorage(sdk);\n  storage.clearStorage();\n  // clear localStorage (previous versions, signin widget)\n  storage = getStorage(sdk, { preferLocalStorage: true });\n  storage.clearStorage();\n}\n\n/* global Uint8Array, TextEncoder */\nfunction computeChallenge(str) {  \n  var buffer = new TextEncoder().encode(str);\n  return crypto.subtle.digest('SHA-256', buffer).then(function(arrayBuffer) {\n    var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n    var b64u = util.stringToBase64Url(hash); // url-safe base64 variant\n    return b64u;\n  });\n}\n\n\nfunction validateOptions(oauthOptions) {\n  // Quick validation\n  if (!oauthOptions.clientId) {\n    throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n  }\n\n  if (!oauthOptions.redirectUri) {\n    throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n  }\n\n  if (!oauthOptions.authorizationCode) {\n    throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n  }\n\n  if (!oauthOptions.codeVerifier) {\n    throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n  }\n}\n\nfunction getPostData(options) {\n  // Convert options to OAuth params\n  var params = util.removeNils({\n    'client_id': options.clientId,\n    'redirect_uri': options.redirectUri,\n    'grant_type': 'authorization_code',\n    'code': options.authorizationCode,\n    'code_verifier': options.codeVerifier\n  });\n  // Encode as URL string\n  return util.toQueryParams(params).slice(1);\n}\n\n// exchange authorization code for an access token\nfunction getToken(sdk, oauthOptions, urls) {\n  validateOptions(oauthOptions);\n  var data = getPostData(oauthOptions);\n\n  return http.httpRequest(sdk, {\n    url: urls.tokenUrl,\n    method: 'POST',\n    args: data,\n    withCredentials: false,\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n}\n\nmodule.exports = {\n  DEFAULT_CODE_CHALLENGE_METHOD: DEFAULT_CODE_CHALLENGE_METHOD,\n  generateVerifier: generateVerifier,\n  clearMeta: clearMeta,\n  saveMeta: saveMeta,\n  loadMeta: loadMeta,\n  computeChallenge: computeChallenge,\n  getToken: getToken\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/pkce.js","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global localStorage, sessionStorage */\n/* eslint complexity:[0,8] max-statements:[0,21] */\nvar util = require('./util');\nvar AuthSdkError = require('./errors/AuthSdkError');\nvar storageUtil = require('./browser/browserStorage');\nvar constants = require('./constants');\nvar storageBuilder = require('./storageBuilder');\nvar SdkClock = require('./clock');\nvar oauthUtil = require('./oauthUtil');\n\nvar DEFAULT_OPTIONS = {\n  autoRenew: true,\n  storage: 'localStorage',\n  expireEarlySeconds: 30\n};\n\nfunction getExpireTime(tokenMgmtRef, token) {\n  var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n  return expireTime;\n}\n\nfunction hasExpired(tokenMgmtRef, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  return expireTime <= tokenMgmtRef.clock.now();\n}\n\nfunction emitExpired(tokenMgmtRef, key, token) {\n  tokenMgmtRef.emitter.emit('expired', key, token);\n}\n\nfunction emitError(tokenMgmtRef, error) {\n  tokenMgmtRef.emitter.emit('error', error);\n}\n\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n  clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n  delete tokenMgmtRef.expireTimeouts[key];\n\n  // Remove the renew promise (if it exists)\n  delete tokenMgmtRef.renewPromise[key];\n}\n\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n  var expireTimeouts = tokenMgmtRef.expireTimeouts;\n  for (var key in expireTimeouts) {\n    if (!expireTimeouts.hasOwnProperty(key)) {\n      continue;\n    }\n    clearExpireEventTimeout(tokenMgmtRef, key);\n  }\n}\n\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n  var expireTime = getExpireTime(tokenMgmtRef, token);\n  var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000;\n\n  // Clear any existing timeout\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  var expireEventTimeout = setTimeout(function() {\n    emitExpired(tokenMgmtRef, key, token);\n  }, expireEventWait);\n\n  // Add a new timeout\n  tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\n\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n  try {\n    var tokenStorage = storage.getStorage();\n  } catch(e) {\n    // Any errors thrown on instantiation will not be caught,\n    // because there are no listeners yet\n    emitError(tokenMgmtRef, e);\n    return;\n  }\n\n  for(var key in tokenStorage) {\n    if (!tokenStorage.hasOwnProperty(key)) {\n      continue;\n    }\n    var token = tokenStorage[key];\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n  }\n}\n\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n  var tokenStorage = storage.getStorage();\n  if (!util.isObject(token) ||\n      !token.scopes ||\n      (!token.expiresAt && token.expiresAt !== 0) ||\n      (!token.idToken && !token.accessToken)) {\n    throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties');\n  }\n  tokenStorage[key] = token;\n  storage.setStorage(tokenStorage);\n  setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\n\nfunction get(storage, key) {\n  var tokenStorage = storage.getStorage();\n  return tokenStorage[key];\n}\n\nfunction getAsync(sdk, tokenMgmtRef, storage, key) {\n  return new Promise(function(resolve, reject) {\n    if (tokenMgmtRef.options.autoRenew && oauthUtil.isLoginRedirect(sdk)) {\n      return reject(new AuthSdkError(\n        'The app should not attempt to call authorize API on callback. ' + \n        'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'\n      ));\n    }\n\n    var token = get(storage, key);\n    if (!token || !hasExpired(tokenMgmtRef, token)) {\n      return resolve(token);\n    }\n\n    var tokenPromise = tokenMgmtRef.options.autoRenew\n      ? renew(sdk, tokenMgmtRef, storage, key)\n      : remove(tokenMgmtRef, storage, key);\n\n    return resolve(tokenPromise);\n  });\n}\n\nfunction remove(tokenMgmtRef, storage, key) {\n  // Clear any listener for this token\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  // Remove it from storage\n  var tokenStorage = storage.getStorage();\n  delete tokenStorage[key];\n  storage.setStorage(tokenStorage);\n}\n\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n  // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n  var existingPromise = tokenMgmtRef.renewPromise[key];\n  if (existingPromise) {\n    return existingPromise;\n  }\n\n  try {\n    var token = get(storage, key);\n    if (!token) {\n      throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n    }\n  } catch (e) {\n    return Promise.reject(e);\n  }\n\n  // Remove existing autoRenew timeout for this key\n  clearExpireEventTimeout(tokenMgmtRef, key);\n\n  // Store the renew promise state, to avoid renewing again\n  tokenMgmtRef.renewPromise[key] = sdk.token.renew(token)\n    .then(function(freshToken) {\n      var oldToken = get(storage, key);\n      if (!oldToken) {\n        // It is possible to enter a state where the tokens have been cleared\n        // after a renewal request was triggered. To ensure we do not store a\n        // renewed token, we verify the promise key doesn't exist and return.\n        return;\n      }\n      add(sdk, tokenMgmtRef, storage, key, freshToken);\n      tokenMgmtRef.emitter.emit('renewed', key, freshToken, oldToken);\n      return freshToken;\n    })\n    .catch(function(err) {\n      if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n        remove(tokenMgmtRef, storage, key);\n        err.tokenKey = key;\n        err.accessToken = !!token.accessToken;\n        emitError(tokenMgmtRef, err);\n      }\n      throw err;\n    })\n    .finally(function() {\n      // Remove existing promise key\n      delete tokenMgmtRef.renewPromise[key];\n    });\n\n  return tokenMgmtRef.renewPromise[key];\n}\n\nfunction clear(tokenMgmtRef, storage) {\n  clearExpireEventTimeoutAll(tokenMgmtRef);\n  storage.clearStorage();\n}\n\nfunction TokenManager(sdk, options) {\n  options = util.extend({}, DEFAULT_OPTIONS, util.removeNils(options));\n\n  if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n    util.warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n    options.storage = 'sessionStorage';\n  }\n\n  if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n    util.warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n    options.storage = 'cookie';\n  }\n\n  var storageProvider;\n  if (typeof options.storage === 'object') {\n    // A custom storage provider must implement getItem(key) and setItem(key, val)\n    storageProvider = options.storage;\n  } else {\n    switch(options.storage) {\n      case 'localStorage':\n        storageProvider = localStorage;\n        break;\n      case 'sessionStorage':\n        storageProvider = sessionStorage;\n        break;\n      case 'cookie':\n        // Implement customized cookie storage to make sure each token is stored separatedly in cookie\n        storageProvider = (function(options) {\n          var storage = storageUtil.getCookieStorage(options);\n          return {\n            getItem: function(key) {\n              var data = storage.getItem();\n              var value = {};\n              Object.keys(data).forEach(k => {\n                if (k.indexOf(key) === 0) {\n                  value[k.replace(`${key}_`, '')] = JSON.parse(data[k]);\n                }\n              });\n              return JSON.stringify(value);\n            },\n            setItem: function(key, value) {\n              var existingValues = JSON.parse(this.getItem(key));\n              value = JSON.parse(value);\n              // Set key-value pairs from input to cookies\n              Object.keys(value).forEach(k => {\n                var storageKey = key + '_' + k;\n                var valueToStore = JSON.stringify(value[k]);\n                storage.setItem(storageKey, valueToStore);\n                delete existingValues[k];\n              });\n              // Delete unmatched keys from existing cookies\n              Object.keys(existingValues).forEach(k => {\n                storageUtil.storage.delete(key + '_' + k);\n              });\n            }\n          };\n        }(sdk.options.cookies));\n        break;\n      case 'memory':\n        storageProvider = storageUtil.getInMemoryStorage();\n        break;\n      default:\n        throw new AuthSdkError('Unrecognized storage option');\n    }\n  }\n  var storageKey = options.storageKey || constants.TOKEN_STORAGE_NAME;\n  var storage = storageBuilder(storageProvider, storageKey);\n  var clock = SdkClock.create(sdk, options);\n  var tokenMgmtRef = {\n    clock: clock,\n    options: options,\n    emitter: sdk.emitter,\n    expireTimeouts: {},\n    renewPromise: {}\n  };\n\n  this.add = util.bind(add, this, sdk, tokenMgmtRef, storage);\n  this.get = util.bind(getAsync, this, sdk, tokenMgmtRef, storage);\n  this.remove = util.bind(remove, this, tokenMgmtRef, storage);\n  this.clear = util.bind(clear, this, tokenMgmtRef, storage);\n  this.renew = util.bind(renew, this, sdk, tokenMgmtRef, storage);\n  this.on = util.bind(tokenMgmtRef.emitter.on, tokenMgmtRef.emitter);\n  this.off = util.bind(tokenMgmtRef.emitter.off, tokenMgmtRef.emitter);\n\n  setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n}\n\nmodule.exports = TokenManager;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/TokenManager.js","var util = require('./util');\n\nfunction SdkClock(localOffset) {\n  // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n  this.localOffset = parseInt(localOffset || 0);\n}\n\nutil.extend(SdkClock.prototype, {\n  // Return the current time (in seconds)\n  now: function() {\n    var now = (Date.now() + this.localOffset) / 1000;\n    return now;\n  }\n});\n\n// factory method. Create an instance of a clock from current context.\nSdkClock.create = function(/* sdk, options */) {\n  // TODO: calculate localOffset\n  var localOffset = 0;\n  return new SdkClock(localOffset);\n};\n\nmodule.exports = SdkClock;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/clock.js","var util = require('./util');\n\n// Implements a queue for synchronous or asynchronous methods\n// Methods will be wrapped in a promise and execute sequentially\n// This can be used to prevent concurrent calls to a single method or a set of methods\nfunction PromiseQueue() {\n  this.queue = [];\n  this.running = false;\n}\n\nutil.extend(PromiseQueue.prototype, {\n  // Returns a promise\n  // If the method is synchronous, it will resolve when the method completes\n  // If the method returns a promise, it will resolve (or reject) with the value from the method's promise\n  push: function(/* method, thisObject, args... */) {\n    var args = Array.prototype.slice.call(arguments);\n    var method = args[0];\n    var thisObject = args[1];\n    args = args.slice(2);\n    return new Promise((resolve, reject) => {\n      this.queue.push({\n        method,\n        thisObject,\n        args,\n        resolve,\n        reject\n      });\n      this.run();\n    });\n  },\n  run: function() {\n    if (this.running) {\n      return;\n    }\n    if (this.queue.length === 0) {\n      return;\n    }\n    this.running = true;\n    var queueItem = this.queue.shift();\n    var res = queueItem.method.apply(queueItem.thisObject, queueItem.args);\n    if (util.isPromise(res)) {\n      res.then(queueItem.resolve, queueItem.reject).finally(() => {\n        this.running = false;\n        this.run();\n      });\n    } else {\n      queueItem.resolve(res);\n      this.running = false;\n      this.run();\n    }\n  }\n});\n\nmodule.exports = PromiseQueue;\n\n\n// WEBPACK FOOTER //\n// ./lib/PromiseQueue.js"],"sourceRoot":""}